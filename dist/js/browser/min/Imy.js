!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){!function(e,n){"use strict";var r=t("./lib/stringToFragments.js").stringToFragments,i=t("./ImyDBRdbms.js").ImyDBRdbms,o=t("./ImyDBIndexedDB.js").ImyDBIndexedDB,s=t("./param/Error.js").ERROR,a=t("./lib/SyncPromise.js").SyncPromise,u=t("./lib/asyncLoop").asyncLoop,c=t("./conf/conf.json"),l=t("./conf/database.json"),f=function(){this.db=null,this._lang=c.default_lang||"ja",this._driver=c.driver,this._dbconf=l[this._driver],this._conf=null};f._name_="Imy",f.prototype.initialize=function(){var t=s.config_error(this.constructor._name_,"initialize"),e=s.driver_error;if(!this._conf){if(!c[this._lang])throw t("default config is not support lang '"+this._lang+".");this._conf=c[this._lang]}if(!this._conf.skip)throw t("config has no 'skip' parameter for lang '"+this._lang+"'.");if(!Array.isArray(this._conf.omit))throw t("'omit' parameter (of conf) must be Array.");if(!this._dbconf)throw t("no database config");if("mysql"===this._driver||"pg"===this._driver||"sqlite3"===this._driver)this.db=new i(this._conf);else{if("idb"!==this._driver)throw e(this._driver);this.db=new o(this._conf)}this.db.useConfig(this._dbconf)},f.prototype._isInitialize=function(){var t=this,e=s.is_not_initialize;return new a(function(n,r){t.db?n():r(e("Imy"))})},f.prototype.open=function(){var t=this;return this._isInitialize().then(function(){return t.db.open()})},f.prototype.close=function(){return this.db.close()},f.prototype.useLang=function(t){this.lang=t},f.prototype.useDatabaseConfig=function(t,e){t&&(this._driver=t),this._dbconf=e},f.prototype.useConfig=function(t){this._conf=t},f.prototype.getDatabaseObject=function(){return this.db.db},f.prototype._createFragment=function(t,e){for(var n=r(t,e),i=[],o=0;o<n.length;o+=1)for(var s=n[o],a=s.skip,u=s.frags,c=0;c<u.length;c+=1){var l=i.length;i[l]={},i[l].skip=a,i[l].frag=u[c][0].frag+u[c][1].frag,i[l].pos1=u[c][0].pos,i[l].pos2=u[c][1].pos,i[l].sort_flag=s.sort_flags[c]}return i},f.prototype.save=function(t,e){var n=this,r=this.db,i=null;return new a(function(o,a){r.transaction(function(){r.getDataForTypeAndContent(t,e).then(function(o){if(null===o||0===o.length){var a=n._createFragment(e,n._conf);r.addDatum(t,e).then(function(e){u(a,function(n,o){var s=0;r.getIndexFragmentIdForTypeAndValue(t,n.frag).then(function(e){return null==e||0===e.length?r.addIndexFragment(t,n.frag).then(function(t){s=t}):void(s=e)}).then(function(){return r.addIndexParameter(t,s,e,n.pos1,n.pos2,n.sort_flag,n.skip)}).then(o)["catch"](function(t){i=t,r.rollback()})}).then(function(){r.commit()})["catch"](function(t){i=t,r.rollback()})})["catch"](function(t){console.error(t)})}else i=s.data_duplicate(t,e),r.rollback()})}).then(o)["catch"](function(t){a(t||i)})})},f.prototype.update=function(t,e){var n=this,r=this.db,i=null;return new a(function(o,a){r.transaction(function(){r.getDataForTypeAndContent(t.type,t.content).then(function(o){if(null!==o&&0!==o.length){var a=o[0].id,c=n._createFragment(t.content,n._conf),l=n._createFragment(e.content,n._conf);u(c,function(e,n){r.countIndexParametersOfFragment(t.type,e.frag).then(function(t){if(1===t)return r.removeIndexFragments(c.type,e.frag)}).then(n)["catch"](function(t){i=t,r.rollback()})}).then(function(){return r.removeIndexParameters(a)}).then(function(){return u(l,function(t,n){var o=0;r.getIndexFragmentIdForTypeAndValue(e.type,t.frag).then(function(n){return null==n||0===n.length?r.addIndexFragment(e.type,t.frag).then(function(t){o=t}):void(o=n)}).then(function(){return r.addIndexParameter(e.type,o,a,t.pos1,t.pos2,t.sort_flag,t.skip)}).then(n)["catch"](function(t){i=t,r.rollback()})})}).then(function(){return r.updateData({type:e.type,content:e.content},{id:a})}).then(function(){r.commit()})["catch"](function(t){i=t,r.rollback()})}else i=s.not_registry_data(t.type,t.content),r.rollback()})}).then(o)["catch"](function(t){a(t||i)})})},f.prototype.remove=function(t,e){var n=this,r=this.db,i=null;return new a(function(o,a){r.transaction(function(){r.getDataForTypeAndContent(t,e).then(function(o){if(null!==o&&0!==o.length){var a=o[0].id,c=n._createFragment(e,n._conf);u(c,function(e,n){r.countIndexParametersOfFragment(t,e.frag).then(function(n){if(1===n)return r.removeIndexFragments(t,e.frag)}).then(n)["catch"](function(t){i=t,r.rollback()})}).then(function(){return r.removeIndexParameters(a)}).then(function(){return r.removeData(a)}).then(function(){r.commit()})["catch"](function(t){i=t,r.rollback()})}else i=s.not_registry_data(t,e),r.rollback()})}).then(o)["catch"](function(t){a(t||i)})})},f.prototype.search=function(t,e){var n=this,r=this.db;return new a(function(i,o){var s=[];r.search(t,e,n._conf).then(function(t){u(t,function(t,e){r.getDatumForId(t.id).then(function(n){s[s.length]={data_id:t.id,start_pos:t.start_pos,end_pos:t.end_pos,weight:t.weight,sort_num:t.sort_num,type:n[0].type,content:n[0].content,created_at:n[0].created_at,updated_at:n[0].updated_at},e()})["catch"](o)}).then(function(){i(s)})["catch"](o)})["catch"](function(t){console.log(t)})})},f.prototype.truncate=function(){var t=this.db;return new a(function(e,n){t.truncateIndexFragments().then(function(){return t.truncateIndexParameters()}).then(function(){return t.truncateData()}).then(e)["catch"](n)})},e.Imy=f,n.Imy=f}(this,(0,eval)("this"))},{"./ImyDBIndexedDB.js":2,"./ImyDBRdbms.js":3,"./conf/conf.json":4,"./conf/database.json":5,"./lib/SyncPromise.js":7,"./lib/asyncLoop":10,"./lib/stringToFragments.js":13,"./param/Error.js":16}],2:[function(t,e,n){!function(e,n){"use strict";var r=t("./lib/ImyDBBase.js").ImyDBBase,i=n.SLI2||t("sli2").SLI2||n.SLI2,o=t("./param/ImyDBSLI2.param.js").ImyDBSLI2,s=t("./lib/util.js").util,a=t("./param/ERROR.js").ERROR,u=function(t){r.call(this,t),this.tables=["imy_idx_fragments","imy_idx_parameters","imy_data"]};u._name_="ImyDBIndexedDB",u.prototype=Object.create(r.prototype,{constructor:{value:u,enumerable:!0,writable:!1,configurable:!0}}),u.prototype.open=function(){return this.db.open()},u.prototype.close=function(){return this.db.close()},u.prototype.useConfig=function(t){this.db=new i(t)},u.prototype.transaction=function(t){var e=this;return this.db.beginTransaction(this.tables,i.READ_WRITE,function(){e.trx=e.db,t()}).then(function(){e.trx=null})["catch"](function(){e.trx=null})},u.prototype.commit=function(){null!==this.trx||a.no_transaction("commit")},u.prototype.rollback=function(){null!==this.trx?this.trx.rollback():a.no_transaction("rollback")},u.prototype.getAllIndexFragments=function(){var t=o.fr.select.all(this._getInstance());return this._doDebugging({name:"getAllIndexFragments",query:t}),t},u.prototype.getIndexFragmentIdForTypeAndValue=function(t,e){var n=o.fr.select["id.for_type_value"](this._getInstance(),{type:s._string(t),value:s._string(e)});return this._doDebugging({name:"getIndexFragmentIdForTypeAndValue",query:n}),n.then(function(t){return t[0]?t[0].id:null})},u.prototype.addIndexFragment=function(t,e){var n=o.fr.insert(this._getInstance(),{type:s._string(t),value:s._string(e)});return this._doDebugging({name:"addIndexFragment",query:n}),n},u.prototype.removeIndexFragments=function(t,e){var n=o.fr["delete"].for_type_value(this._getInstance(),{type:s._string(t),value:s._string(e)});return this._doDebugging({name:"removeIndexFragments",query:n}),n},u.prototype.truncateIndexFragments=function(){var t=o.fr["delete"].all(this._getInstance());return this._doDebugging({name:"truncateIndexFragments",query:t}),t},u.prototype.getAllIndexParameters=function(){var t=o.pa.select.all(this._getInstance());return this._doDebugging({name:"getAllIndexParameters",query:t}),t},u.prototype.addIndexParameter=function(t,e,n,r,i,a,u){var c=o.pa.insert(this._getInstance(),{type:s._string(t),idx_fragment_id:s._double(e),data_id:s._double(n),content_pos1:s._int(r),content_pos2:s._int(i),sort_flag:s._int(a),skip:s._int(u)});return this._doDebugging({name:"addIndexParameter",query:c}),c},u.prototype.removeIndexParameters=function(t){var e=o.pa["delete"].for_dataid(this._getInstance(),{data_id:s._double(t)});return this._doDebugging({name:"removeIndexParameter",query:e}),e},u.prototype.countIndexParametersOfFragment=function(t,e){var n=o.count["parametered_fragment.for_type_value"](this._getInstance(),{type:s._string(t),value:s._string(e)});return this._doDebugging({name:"countIndexParametersOfFragment",query:n}),n.then(function(t){return t[0]?t[0][Object.keys(t[0])[0]]:0})},u.prototype.truncateIndexParameters=function(){var t=o.pa["delete"].all(this._getInstance());return this._doDebugging({name:"truncateIndexParameters",query:t}),t},u.prototype.getAllData=function(){var t=o.da.select["all.for"](this._getInstance());return this._doDebugging({name:"getAllData",query:t}),t},u.prototype.getDataForTypeAndContent=function(t,e){var n=o.da.select["all.for"](this._getInstance(),{type:s._string(t),content:s._string(e)});return this._doDebugging({name:"getDataForTypeAndContent",query:n}),n},u.prototype.getDatumForId=function(t){var e=o.da.select["all.for"](this._getInstance(),{id:s._double(t)});return this._doDebugging({name:"getDatumForId",query:e}),e},u.prototype.addDatum=function(t,e){var n=o.da.insert(this._getInstance(),{type:s._string(t),content:s._string(e)});return this._doDebugging({name:"addDatum",query:n}),n},u.prototype.removeData=function(t){var e=o.da["delete"]["for"](this._getInstance(),{id:s._double(t)});return this._doDebugging({name:"removeData",query:e}),e},u.prototype.updateData=function(t,e){var n=o.da.update["for"](this._getInstance(),{type:s._string(t.type),content:s._string(t.content)},{id:s._double(e.id),type:s._double(e.type),content:s._double(e.type)});return this._doDebugging({name:"updateData",query:n}),n},u.prototype.truncateData=function(){var t=o.da["delete"].all(this._getInstance());return this._doDebugging({name:"truncateData",query:t}),t},u.prototype.getForTypeAndValues=function(t,e){var n=o.search["parametered_fragment.for_type_values"](this._getInstance(),{type:s._string(t),values:e});return this._doDebugging({name:"getForTypeAndValues",query:n}),n},e.ImyDBIndexedDB=u,n.ImyDBIndexedDB=u}(this,(0,eval)("this"))},{"./lib/ImyDBBase.js":6,"./lib/util.js":14,"./param/ERROR.js":15,"./param/ImyDBSLI2.param.js":18,sli2:188}],3:[function(t,e,n){!function(e){"use strict";var n=t("./lib/ImyDBBase.js").ImyDBBase,r=t("knex"),i=t("./param/ImyDBKnex.param.js").ImyDBKnex,o=t("./lib/util.js").util,s=t("./param/ERROR.js").ERROR,a=function(t){n.call(this,t)};a._name_="ImyDBRdbms",a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!0,writable:!1,configurable:!0}}),a.prototype.open=function(){return new Promise(function(){return!0})},a.prototype.close=function(){return console.log(this.db.destroy),this.db.destroy()},a.prototype.useConfig=function(t){this.db=r(t)},a.prototype.transaction=function(t){var e=this;return this.db.transaction(function(n){e.trx=n,t()}).then(function(){e.trx=null})["catch"](function(){e.trx=null})},a.prototype.commit=function(){null!==this.trx?this.trx.commit():s.no_transaction("commit")},a.prototype.rollback=function(){null!==this.trx?this.trx.rollback():s.no_transaction("rollback")},a.prototype.getAllIndexFragments=function(){var t=i.fr.select.all(this._getInstance());return this._doDebugging({name:"getAllIndexFragments",query:t}),t},a.prototype.getIndexFragmentIdForTypeAndValue=function(t,e){var n=i.fr.select["id.for_type_value"](this._getInstance(),{type:o._string(t),value:o._string(e)});return this._doDebugging({name:"getIndexFragmentIdForTypeAndValue",query:n}),n.then(function(t){return t[0]?t[0].id:null})},a.prototype.addIndexFragment=function(t,e){var n=i.fr.insert(this._getInstance(),{type:o._string(t),value:o._string(e)});return this._doDebugging({name:"addIndexFragment",query:n}),n},a.prototype.removeIndexFragments=function(t,e){var n=i.fr["delete"].for_type_value(this._getInstance(),{type:o._string(t),value:o._string(e)});return this._doDebugging({name:"removeIndexFragments",query:n}),n},a.prototype.truncateIndexFragments=function(){var t=i.fr["delete"].all(this._getInstance());return this._doDebugging({name:"truncateIndexFragments",query:t}),t},a.prototype.getAllIndexParameters=function(){var t=i.pa.select.all(this._getInstance());return this._doDebugging({name:"getAllIndexParameters",query:t}),t},a.prototype.addIndexParameter=function(t,e,n,r,s,a,u){var c=i.pa.insert(this._getInstance(),{type:o._string(t),idx_fragment_id:o._double(e),data_id:o._double(n),content_pos1:o._int(r),content_pos2:o._int(s),sort_flag:o._int(a),skip:o._int(u)});return this._doDebugging({name:"addIndexParameter",query:c}),c},a.prototype.removeIndexParameters=function(t){var e=i.pa["delete"].for_dataid(this._getInstance(),{data_id:o._double(t)});return this._doDebugging({name:"removeIndexParameter",query:e}),e},a.prototype.countIndexParametersOfFragment=function(t,e){var n=i.count["parametered_fragment.for_type_value"](this._getInstance(),{type:o._string(t),value:o._string(e)});return this._doDebugging({name:"countIndexParametersOfFragment",query:n}),n.then(function(t){return t[0]?t[0][Object.keys(t[0])[0]]:0})},a.prototype.truncateIndexParameters=function(){var t=i.pa["delete"].all(this._getInstance());return this._doDebugging({name:"truncateIndexParameters",query:t}),t},a.prototype.getAllData=function(){var t=i.da.select["all.for"](this._getInstance());return this._doDebugging({name:"getAllData",query:t}),t},a.prototype.getDataForTypeAndContent=function(t,e){var n=i.da.select["all.for"](this._getInstance(),{type:o._string(t),content:o._string(e)});return this._doDebugging({name:"getDataForTypeAndContent",query:n}),n},a.prototype.getDatumForId=function(t){var e=i.da.select["all.for"](this._getInstance(),{id:o._double(t)});return this._doDebugging({name:"getDatumForId",query:e}),e},a.prototype.addDatum=function(t,e){var n=i.da.insert(this._getInstance(),{type:o._string(t),content:o._string(e)});return this._doDebugging({name:"addDatum",query:n}),n},a.prototype.removeData=function(t){var e=i.da["delete"]["for"](this._getInstance(),{id:o._double(t)});return this._doDebugging({name:"removeData",query:e}),e},a.prototype.updateData=function(t,e){var n=i.da.update["for"](this._getInstance(),{type:o._string(t.type),content:o._string(t.content)},{id:o._double(e.id),type:o._double(e.type),content:o._double(e.type)});return this._doDebugging({name:"updateData",query:n}),n},a.prototype.truncateData=function(){var t=i.da["delete"].all(this._getInstance());return this._doDebugging({name:"truncateData",query:t}),t},a.prototype.getForTypeAndValues=function(t,e){var n=i.search["parametered_fragment.for_type_values"](this._getInstance(),{type:o._string(t),values:e});return this._doDebugging({name:"getForTypeAndValues",query:n}),n},e.ImyDBRdbms=a}(this)},{"./lib/ImyDBBase.js":6,"./lib/util.js":14,"./param/ERROR.js":15,"./param/ImyDBKnex.param.js":17,knex:54}],4:[function(t,e,n){e.exports={driver:"sqlite3",default_lang:"ja",en:{matching_max_ratio:1.6,matching_min_ratio:.6,limit_min_score:0,skip:5,omit:[]},ja:{matching_max_ratio:1.6,matching_min_ratio:.6,limit_min_score:0,skip:5,omit:[]}}},{}],5:[function(t,e,n){e.exports={mysql:{client:"mysql",connection:{host:"localhost",user:"",password:"",database:"test"}},pg:{client:"pg",connection:{host:"127.0.0.1",user:"",password:"",database:"test"},searchPath:"public"},sqlite3:{client:"sqlite3",connection:{filename:":memory:"},useNullAsDefault:!0},idb:"test"}},{}],6:[function(t,e,n){!function(e){"use strict";var n=t("./stringToFragments.js").stringToFragments,r=t("./analyzeFragments.js").analyzeFragments,i=t("./calculateScore.js").calculateScore,o=5,s=1.6,a=.6,u=0,c=function(t){this.db=null,this.trx=null,this.debug=!1,this._debugger=null,this._conf=t};c.prototype.transaction=function(){},c.prototype.commit=function(){},c.prototype.rollback=function(){},c.prototype.getAllIndexFragment=function(){},c.prototype.getIndexFragmentIdForTypeAndValue=function(){},c.prototype.addIndexFragment=function(){},c.prototype.removeIndexFragment=function(){},c.prototype.truncateIndexFragments=function(){},c.prototype.getAllIndexParameter=function(){},c.prototype.addIndexParameter=function(){},c.prototype.removeIndexParameter=function(){},c.prototype.countIndexParameterOfFragment=function(){},c.prototype.truncateIndexParameters=function(){},c.prototype.getAllData=function(){},c.prototype.getDataForTypeAndContent=function(){},c.prototype.getDataForIdAndPage=function(){},c.prototype.getMaxNo=function(){},c.prototype.addData=function(){},c.prototype.removeData=function(){},c.prototype.updateData=function(){},c.prototype.truncateData=function(){},c.prototype.setDebugger=function(t){"function"==typeof t&&(this._debugger=t)},c.prototype._doDebugging=function(){this.debug&&this._debugger&&this._debugger.apply(this,arguments)},c.prototype._getInstance=function(){return this.trx||this.db},c.prototype.search=function(t,e,c){var l=n(e,c),f=r(l),h={};return h.skip=c.skip||this._conf.skip||o,h.matching_max_ratio=c.matching_max_ratio||this._conf.matching_max_ratio||s,h.matching_min_ratio=c.matching_min_ratio||this._conf.matching_min_ratio||a,h.limit_min_score=c.limit_min_score||this._conf.limit_min_score||u,this.getForTypeAndValues(t,f.values).then(function(t){return i(t,l,e.length,f.map,h)})},e.ImyDBBase=c}(this)},{"./analyzeFragments.js":8,"./calculateScore.js":12,"./stringToFragments.js":13}],7:[function(t,e,n){!function(t,e){"use strict";var n=0,r=1,i=2,o=function(t){return t&&"function"==typeof t.then},s=function(t){if(this._state=n,this._on_resolve=null,this._on_reject=null,this._ret=null,"function"!=typeof t)throw new Error("TypeError: argument[0] of SyncPromise.constructor must be function.");try{t(this._resolver.bind(this),this._rejector.bind(this))}catch(e){this._state=i,this._ret=e}};s.prototype._resolver=function(t){var e=this;if(this._state===n){if(o(t))return t.then(function(t){e._ret=t,"function"==typeof e._on_resolve&&e._on_resolve(t)})["catch"](function(t){e._ret=t,"function"==typeof e._on_reject&&e._on_reject(t)});this._state=r,e._ret=t,"function"==typeof this._on_resolve&&this._on_resolve(this._ret)}},s.prototype._rejector=function(t){var e=this;if(this._state===n){if(o(t))return t.then(function(t){e._ret=t,"function"==typeof e._on_reject&&e._on_reject(e._ret)})["catch"](function(t){e._ret=t,"function"==typeof e._on_reject&&e._on_reject(t)});this._state=i,this._ret=t,"function"==typeof this._on_reject&&this._on_reject(this._ret)}},s.prototype.then=function(t){var e=this,n=null;if("function"!=typeof t)throw new Error("TypeError: argument[0] of SyncPromise#then must be function.");if(this._state!==r)return new s(this._state===i?function(t,n){n(e._ret)}:function(n,r){e._on_resolve=function(e){try{var i=t(e);o(i)?i.then(function(t){n(t)}):n(i)}catch(s){r(s)}},e._on_reject=function(t){r(t)}});try{return n=t(this._ret),n&&"function"==typeof n.then?n:new s(function(t){t(n)})}catch(a){return new s(function(t,e){e(a)})}},s.prototype["catch"]=function(t){var e=this,n=null;if("function"!=typeof t)throw new Error("TypeError: argument[0] of SyncPromise#catch must be function.");if(this._state===r)return new s(function(t){t(e._ret)});if(this._state!==i)return new s(function(n,r){e._on_reject=function(i){try{var s=t(i);o(s)?s.then(function(t){e._ret=t}):n(s)}catch(a){r(a)}},e._on_resolve=function(t){n(t)}});try{return n=t(this._ret),n&&"function"==typeof n.then?n:new s(function(t){t(n)})}catch(a){return new s(function(t,e){e(a)})}},s.all=function(){if(!Array.isArray(arguments[0]))throw new Error("TypeError:");var t=arguments[0].concat(),e=[];return new s(function(n,r){var i=function o(){try{0===t.length&&n(e);var i=t.shift();"function"==typeof i.then?i.then(function(t){e[e.length]=t,o()})["catch"](function(t){r(t)}):(e[e.length]=i,o())}catch(s){r(s)}};i()})},t.SyncPromise=s,e.SyncPromise=s}(this,(0,eval)("this"))},{}],8:[function(t,e,n){!function(t){"use strict";var e=function(t){var e={},n=[],r=0,i=0,o=0,s=0;for(r=0,i=t.length;r<i;r+=1){var a=t[r],u=a.frags;for(o=0,s=u.length;o<s;o+=1){var c=u[o][0].frag+u[o][1].frag;n[n.length]=c,void 0===e[c]?e[c]=[{pos1:u[o][0].pos,pos2:u[o][1].pos,sort_flag:a.sort_flags[o]}]:e[c][e[c].length]={pos1:u[o][0].pos,pos2:u[o][1].pos,sort_flag:a.sort_flags[o]}}}return{map:e,values:n}};t.analyzeFragments=e}(this)},{}],9:[function(t,e,n){!function(t){"use strict";var e=function(t,e){for(var n=[],r=e&&Array.isArray(e.omit)?e.omit:[],i=0,o=t.length;i<o;i+=1)~r.indexOf(t[i])||(n[n.length]=[t[i],i]);return n};t.arrayAddSuffix=e}(this)},{}],10:[function(t,e,n){!function(e){"use strict";var n=t("./SyncPromise.js").SyncPromise,r=function(t,e){for(var r=[],i=0,o=t.length;i<o;i+=1)r[i]=t[i];return new n(function(t,n){var i=function o(){try{if(r.length>0){var i=r.shift();e(i,function(){o()})}else t()}catch(s){n(s)}};i()})};e.asyncLoop=r}(this)},{"./SyncPromise.js":7}],11:[function(t,e,n){!function(t){"use strict";var e=function(t){return!("number"!=typeof t&&!/^_d+$/.test(t)&&null!==t&&void 0!==t)},n=function(t,n){var r=0|t,i=0|n,o=0;if(!e(t)||r<=0)throw new Error("invalid argument: skip");if(!e(n)||i<=1)throw new Error("invalid argument: len");if(o=i*(i-1),n>t){var s=i-r;o-=s*(s-1)}return o/2};t.calcFragmentNum=n}(this)},{}],12:[function(t,e,n){!function(e){"use strict";var n=t("./calcFragmentNum.js").calcFragmentNum,r=[],i={},o=0,s=-1,a=-1,u=function(t,e,n,u,f){var h=[],p=null,m=[];if(r=[],i={},o=0,s=-1,a=-1,0===t.length)return h;for(i=c(m,t),s=i.start,o=i.data_id;;)if(a===-1&&d(m)>=n*f.matching_min_ratio&&d(m)<n*f.matching_max_ratio)if(p=y(m,u,n,f),h=v(h,p),1===p.weight){if(_(m,t,n,f),a===-1){if(0===m.length)break;g(m)}}else a=i.start,i=c(m,t);else if(d(m)>n*f.matching_max_ratio||0===t.length&&0===r.length||i.data_id!==o){if(d(m)>n*f.matching_max_ratio){if(i=l(m),_(m,t,n,f),a===-1){if(0===m.length)break;g(m)}}else if(a===-1){if(0===t.length)break;g(m)}else if(0===t.length&&0===r.length&&(p=y(m,u,n,f),h=v(h,p)),m.length>2&&(i=l(m)),_(m,t,n,f),a===-1){if(0===m.length)break;g(m)}}else a!==-1&&d(m)<=n*f.matching_max_ratio?(p=y(m,u,n,f),h=v(h,p),1===p.weight?_(m,t,n,f):i=c(m,t)):i=c(m,t);return h},c=function(t,e){var n={data_id:0,start:0,items:[]};if(r.length>0)n=r.pop();else{if(!(e.length>0))return null;for(;e.length>0&&(0===n.data_id||e[0].data_id===n.data_id&&e[0].d_content_pos1===n.start);)n.data_id=e[0].data_id,n.start=e[0].d_content_pos1,n.items[n.items.length]=e.shift()}return 0===n.data_id?null:(t[t.length]=n,n)},l=function(t){return r[r.length]=t.pop(),h(t)},f=function(t){return t[0]},h=function(t){return t[t.length-1]},p=function(t){return t.splice(0,t.length-1),h(t)},d=function(t){return 0===t.length?0:t[t.length-1].start-t[0].start+2},_=function(t,e,n,r){if(t.shift(),t.length<2){if(i=c(t,e),null===i||i.data_id!==o)return void(a=-1);o=i.data_id}if(s=f(t).start,d(t)>=n*r.matching_min_ratio){for(;d(t)>n*r.matching_min_ratio;)if(i=l(t),a=i.start,s===a)return void(a=-1)}else{for(;d(t)<n*r.matching_min_ratio;){if(i=c(t,e),null===i)return void(a=-1);if(i.data_id!==o)return s=a,a=-1,void(o=i.data_id);if(0===e.length)return void(a=d(t)>=n*r.matching_min_ratio?i.start:-1)}a=i.start}},g=function(t){i=p(t),s=i.start,a=-1,o=i.data_id},y=function(t,e,r,i){var o=f(t).data_id,s=Number.MAX_SAFE_INTEGER,a=0,u=Number.MAX_SAFE_INTEGER,c=0,l=Number.MAX_SAFE_INTEGER,h=0,p=0,d=0,_=0,g=0,y=0,v={},m=!0,b=0,w=0,x=0,j=0;for(b=0,w=t.length;b<w;b+=1){var k=t[b].items;for(x=0,j=k.length;x<j;x+=1){var E=k[x],A=E.value;void 0===v[A]?v[A]=0:v[A]=v[A]+1,void 0!==e[A][v[A]]?(_=v[A],m=!0):(_=e[A].length-1,m=!1),p=e[A][_].pos1,d=e[A][_].pos2,g+=1,s>E.d_content_pos1&&(s=E.d_content_pos1,m&&(u=E.d_content_pos1)),a<E.d_content_pos2&&(a=E.d_content_pos2,m&&(c=E.d_content_pos2)),l>p&&(l=p),h<d&&(h=d),y+=E.sort_flag^e[A][_].sort_flag}}var O=a-s-(h-l),S=0;for(S=O>0?g/n(i.skip,r+O):g/n(i.skip,r);S>1;)S-=1;return i.limit_min_score&&S<i.limit_min_score?null:{id:o,start_pos:u,end_pos:c,weight:S,sort_num:y}},v=function(t,e){if(!e)return t;for(var n=0,r=t.length;n<r;n+=1)if(t[n].id===e.id&&t[n].start_pos===e.start_pos)return t[n].weight<e.weight&&(t[n]=e),t;return t[t.length]=e,t};e.calculateScore=u}(this)},{"./calcFragmentNum.js":11}],13:[function(t,e,n){!function(e){"use strict";var n=t("./arrayAddSuffix.js").arrayAddSuffix,r=function(t,e){var r=[],i=[],o=+(e&&void 0!==e.start?e.start:0),s=+(e&&void 0!==e.skip?e.skip:1),a=e&&void 0!==e.omit?e.omit:[],u=e&&"function"==typeof e.weiting_function?e.weiting_function:null;if("string"!=typeof t&&!(t instanceof String))throw new Error("argument error: arguments[0] must be string");if(o<0||~(o+"").indexOf("."))throw new Error("argument error: arguments[1] opt.start must be integer over 0");if(s<1||~(s+"").indexOf("."))throw new Error("argument error: arguments[1] opt.skip must be integer over 1");if(!Array.isArray(a))throw new Error("argument error: arguments[1] opt.omit must be Array");i=n(t.split(""),{omit:a});for(var c=1;c<=s;c+=1){var l=r.length,f=[],h=[];r[l]={skip:c,weight:null,frags:[],sort_flags:[]},u&&(r[l].weight=u(c));for(var p=0,d=i.length;p<d-c;p+=1)i[p][0]<i[p+c][0]||i[p][0]===i[p+c][0]&&i[p][1]<i[p+c][1]?(f[f.length]=[{pos:i[p][1]+o,frag:i[p][0]},{pos:i[p+c][1]+o,frag:i[p+c][0]}],h[h.length]=0):(f[f.length]=[{pos:i[p][1]+o,frag:i[p+c][0]},{pos:i[p+c][1]+o,frag:i[p][0]}],h[h.length]=1);r[l].frags=f,r[l].sort_flags=h}return r};e.stringToFragments=r}(this)},{"./arrayAddSuffix.js":9}],14:[function(t,e,n){!function(t){"use strict";var e={};e.hasProperty=function(t,e){if(!t)return!1;for(var n=0,r=e.length;n<r;n+=1){var i=e[n];if(void 0===t[i])return!1}return!0},e.isMysql=function(t){return"mysql"===t.client.config.client},e.isPostgres=function(t){return"pg"===t.client.config.client},e.isSqlite=function(t){return"sqlite3"===t.client.config.client},e._date=function(t,e){var n=e.getFullYear()+"",r=e.getMonth()+1+"",i=e.getDate()+"",o=e.getHours()+"",s=e.getMinutes()+"",a=e.getSeconds()+"";return 1===r.length&&(r="0"+r),1===i.length&&(i="0"+i),1===o.length&&(o="0"+o),1===s.length&&(s="0"+s),1===a.length&&(a="0"+a),n+"-"+r+"-"+i+" "+o+":"+s+":"+a},e._columns=function(t){return function(e,n){for(var r=0,i=t.length;r<i;r+=1)e(n[t[r]]).as(t[r])}},e._string=function(t){if(void 0!==t)return null===t?null:t+""},e._int=function(t){if(void 0!==t)return null===t?null:0|t},e._double=function(t){if(void 0!==t)return null===t?null:+t},t.util=e}(this)},{}],15:[function(t,e,n){!function(t){"use strict";var e={config_error:function(t,e){return function(n){return new Error("ConfigError "+t+"#"+e+" : "+n)}},driver_error:function(t){return new Error("DriverError: driver "+t+" is not supported")},database_error:function(t,e){return new Error("DatabaseError: "+t+"#"+e)},unsupported_client:function(t){return new Error("UnsupportedClient: "+t)},data_duplicate:function(t,e){return new Error("DataDuplicate: type="+t+", content="+e)},no_transaction:function(t){return new Error("NoTransaction: "+t)},not_registry_data:function(t,e){return new Error("NotRegistryData: type="+t+", content="+e)},is_not_initialize:function(t){return new Error(t+" is not initialize")}};t.ERROR=e}(this)},{}],16:[function(t,e,n){arguments[4][15][0].apply(n,arguments)},{dup:15}],17:[function(t,e,n){!function(e){"use strict";var n=t("../lib/util.js").util,r={idx:{name:"imy_indices",all_columns:["type","value","data_id","content_pos1","content_pos2","sort_flag","skip"],create:null,drop:null,index:[],select:{},insert:null,update:{},"delete":{}},fr:{name:"imy_idx_fragments",all_columns:["type","value"],create:null,drop:null,index:[],select:{},insert:null,update:{},"delete":{}},pa:{name:"imy_idx_parameters",all_columns:["type","idx_fragment_id","skip","data_id","content_pos1","content_pos2","sort_flag"],create:null,drop:null,index:[],select:{},insert:null,update:{},"delete":{}},da:{name:"imy_data",all_columns:["id","type","content","created_at","updated_at"],create:null,drop:null,index:[],select:{},insert:null,update:{},"delete":{}}};r.search={"index.for_type_values":function(t,e){if(n.hasProperty(e,["type","values"]))return t.select("type","data_id","value","content_pos1 as d_content_pos1","content_pos2 as d_content_pos2","sort_flag").from(r.idx.name).where("type","=",e.type).andWhereIn("value",e.value).groupBy(["group","type","data_id","value","content_pos1","content_pos2"]).orderBy(["group","type","data_id","content_pos1","content_pos2","value"])},"parametered_fragment.for_type_values":function(t,e){if(n.hasProperty(e,["type","values"]))return t.select("p.type as type","p.data_id as data_id","f.value as value","p.content_pos1 as d_content_pos1","p.content_pos2 as d_content_pos2","p.sort_flag as sort_flag").from(r.fr.name+" as f").innerJoin(r.pa.name+" as p",function(){this.on("f.type","=","p.type").on("f.id","=","p.idx_fragment_id")}).where("f.type","=",e.type).whereIn("f.value",e.values).groupBy(["p.type","p.data_id","f.value","p.content_pos1","p.content_pos2"]).orderBy(["p.type","p.data_id","p.content_pos1","p.content_pos2","f.value"])}},r.count={"index.for_type_value":function(t,e){if(n.hasProperty(e,["type","value"]))return t.count().from(r.idx.name).where("type","=",e.type).andWhere("value","=",e.value)},"parametered_fragment.for_type_value":function(t,e){if(n.hasProperty(e,["type","value"]))return t.count().from(r.fr.name+" as f").innerJoin(r.pa.name+" as p",function(){this.on("f.type","=","p.type").on("f.id","=","p.idx_fragment_id")}).where("f.type","=",e.type).andWhere("f.value","=",e.value)}},r.idx.create=function(t){return t.schema.createTable(this.name,function(e){e.increments(),e.string("type",100),e.string("value",2),e.biginteger("data_id"),e.integer("content_pos1"),e.integer("content_pos2"),e.integer("sort_flag"),e.integer("skip"),n.isMysql(t)&&e.engine("InnoDB")})},r.idx.drop=function(t){return t.schema.dropTable(this.name)},r.idx.index=[{columns:["type","value","skip","data_id","content_pos1","content_pos2"],name:"imy_index_idx1",create:function(t){var e=this;return t.schema.table(r.idx.name,function(t){t.index(e.columns,e.name)})},drop:function(t){var e=this;return t.schema.table(r.idx.name,function(t){t.dropIndex(e.columns,e.name)})}}],r.idx.select={},r.idx.insert=function(t,e){if(n.hasProperty(e,[this.all_columns])){var r={type:e.type,value:e.value,data_id:e.data_id,content_pos1:e.content_pos1,content_pos2:e.content_pos2,skip:e.skip};return t.insert(r).into(this.name)}},r.idx["delete"]={all:function(t){return t.from(this.name).del()}.bind(r.idx),for_dataid:function(t,e){if(n.hasProperty(e,["data_id"]))return t.from(this.name).where("data_id","=",e.data_id).del()}.bind(r.idx)},r.fr.create=function(t){return t.schema.createTable(this.name,function(e){e.increments(),e.string("type",100),e.string("value",2),e.unique(["type","value"]),n.isMysql(t)&&e.engine("InnoDB")})},r.fr.drop=function(t){return t.schema.dropTable(this.name)},r.fr.select={all:function(t){return t.select(this.all_columns.concat("id")).from(this.name)}.bind(r.fr),"id.for_type_value":function(t,e){if(n.hasProperty(e,["type","value"]))return t.select("id").from(this.name).where("type","=",e.type).andWhere("value","=",e.value)}.bind(r.fr)},r.fr.insert=function(t,e){if(n.hasProperty(e,this.all_columns)){var r={type:e.type,value:e.value};return t.insert(r).into(this.name)}},r.fr["delete"]={all:function(t){return t.from(this.name).del()}.bind(r.fr),for_type_value:function(t,e){if(n.hasProperty(e,["type","value"]))return t.from(this.name).where("type","=",e.type).andWhere("value","=",e.value).del()}.bind(r.fr)},r.pa.create=function(t){return t.schema.createTable(this.name,function(e){e.increments(),e.biginteger("idx_fragment_id"),e.string("type",100),e.biginteger("data_id"),e.integer("content_pos1"),e.integer("content_pos2"),
e.integer("sort_flag"),e.integer("skip"),n.isMysql(t)&&e.engine("InnoDB")})},r.pa.drop=function(t){return t.schema.dropTable(this.name)},r.pa.index=[{name:"imy_idx_parameter_idx1",columns:["type","idx_fragment_id","skip","data_id","content_pos1","content_pos2"],create:function(t){var e=this;return t.schema.table(r.pa.name,function(t){t.index(e.columns,e.name)})},drop:function(t){var e=this;return t.schema.table(r.pa.name,function(t){t.dropIndex(e.columns,e.name)})}}],r.pa.select={all:function(t){return t.select(this.all_columns).from(this.name)}.bind(r.pa)},r.pa.insert=function(t,e){if(n.hasProperty(e,this.all_columns)){var r={type:e.type,idx_fragment_id:e.idx_fragment_id,data_id:e.data_id,content_pos1:e.content_pos1,content_pos2:e.content_pos2,sort_flag:e.sort_flag,skip:e.skip};return t.insert(r).into(this.name)}},r.pa["delete"]={all:function(t){return t.from(this.name).del()}.bind(r.pa),for_dataid:function(t,e){if(n.hasProperty(e,["data_id"]))return t.from(this.name).where("data_id","=",e.data_id).del()}.bind(r.pa)},r.da.create=function(t){return t.schema.createTable(this.name,function(e){e.increments(),e.string("type",100).notNullable(),e.text("content"),e.timestamp("created_at").defaultTo(t.fn.now()),e.timestamp("updated_at"),n.isMysql(t)&&e.engine("InnoDB")})},r.da.drop=function(t){return t.schema.dropTable(this.name)},r.da.index=[{columns:["type",{content:255}],name:"imy_data_idx1",create:function(t){var e=this,i=[],o=null,s=0,a=0,u="";if(n.isMysql(t)){for(s=0,a=e.columns.length;s<a;s+=1)o=e.columns[s],"string"==typeof o?i[i.length]="`"+o+"`":(u=Object.keys(o)[0],i[i.length]="`"+u+"`("+o[u]+")");return t.raw("alter table `"+r.da.name+"` add index "+e.name+"("+i.join(",")+")")}for(s=0,a=e.columns.length;s<a;s+=1)o=e.columns[s],"string"==typeof o?i[i.length]=o:(u=Object.keys(o)[0],i[i.length]=u);return t.schema.table(r.da.name,function(t){t.index(i,e.name)})},drop:function(t){var e=this;return t.schema.table(r.da.name,function(t){t.dropIndex(e.columns,e.name)})}}],r.da.select={"all.for":function(t,e){var r=t.select(this.all_columns).from(this.name);return n.hasProperty(e,["id"])&&r.where("id","=",e.id),n.hasProperty(e,["type"])&&r.where("type","=",e.type),n.hasProperty(e,["content"])&&r.where("content","=",e.content),r}.bind(r.da)},r.da.insert=function(t,e){if(n.hasProperty(e,["type","content"])){var r={type:e.type,content:e.content};return t.insert(r).into(this.name)}},r.da.update={"for":function(t,e,r){var i={};n.hasProperty(e,["content"])&&(i.content=e.content),n.hasProperty(e,["type"])&&(i.type=e.type),i.updated_at=n._date(t,new Date);var o=t.from(this.name).update(i);return n.hasProperty(r,["id"])&&o.where("id","=",r.id),n.hasProperty(r,["type"])&&o.where("type","=",r.type),n.hasProperty(r,["content"])&&o.where("content","=",r.content),o}.bind(r.da)},r.da["delete"]={all:function(t){return t.from(this.name).del()}.bind(r.da),"for":function(t,e){if(n.hasProperty(e,["id"])){var r=t.from(this.name).where("id","=",e.id);return r.del()}}.bind(r.da)},e.ImyDBKnex=r}(this)},{"../lib/util.js":14}],18:[function(t,e,n){!function(e){"use strict";var n=t("../lib/SyncPromise.js").SyncPromise,r=t("../lib/util.js").util,i={idx:{name:"imy_indices",all_columns:["type","value","data_id","content_pos1","content_pos2","sort_flag","skip"],create:null,drop:null,index:[],select:{},insert:null,update:{},"delete":{}},fr:{name:"imy_idx_fragments",all_columns:["type","value"],create:null,drop:null,index:[],select:{},insert:null,update:{},"delete":{}},pa:{name:"imy_idx_parameters",all_columns:["type","idx_fragment_id","skip","data_id","content_pos1","content_pos2","sort_flag"],create:null,drop:null,index:[],select:{},insert:null,update:{},"delete":{}},da:{name:"imy_data",all_columns:["id","type","content","created_at","updated_at"],create:null,drop:null,index:[],select:{},insert:null,update:{},"delete":{}}};i.search={"index.for_type_values":function(t,e){if(r.hasProperty(e,["type","values"]))return new n(function(n,r){t.select(function(t,e){t(e.type).as("type"),t(e.data_id).as("data_id"),t(e.value).as("value"),t(e.content_pos1).as("d_content_pos1"),t(e.content_pos2).as("d_content_pos2"),t(e.sort_flag).as("sort_flag")}).from(i.idx.name).where(function(t){t.and("type").eq.value(e.type),t.and("value")["in"].value(e.value)}).groupBy(["group","type","data_id","value","d_content_pos1","d_content_pos2"]).orderBy(["group","type","data_id","d_content_pos1","d_content_pos2","value"]).run(function(t,e){e(),n(t)})["catch"](r)})},"parametered_fragment.for_type_values":function(t,e){if(r.hasProperty(e,["type","values"]))return new n(function(n,r){t.select(function(t,e){t(e.p.type).as("type"),t(e.p.data_id).as("data_id"),t(e.f.value).as("value"),t(e.p.content_pos1).as("d_content_pos1"),t(e.p.content_pos2).as("d_content_pos2"),t(e.p.sort_flag).as("sort_flag")}).from(i.fr.name).as("f").innerJoin(i.pa.name,function(t){t.and("f.type").eq.key("p.type"),t.and("f.id").eq.key("p.idx_fragment_id")}).as("p").where(function(t){t.and("f.type").eq.value(e.type),t.and("f.value")["in"].value(e.values)}).groupBy(["type","data_id","value","d_content_pos1","d_content_pos2"]).orderBy(["type","data_id","d_content_pos1","d_content_pos2","value"]).run(function(t,e){e(),n(t)})["catch"](r)})}},i.count={"index.for_type_value":function(t,e){if(r.hasProperty(e,["type","value"]))return new n(function(n,r){t.select(function(t,e){t.count(e.id)}).from(i.idx.name).where(function(t){t.and("type").eq.value(e.type),t.and("value").eq.value(e.value)}).run(function(t,e){e(),n(t)})["catch"](r)})},"parametered_fragment.for_type_value":function(t,e){if(r.hasProperty(e,["type","value"]))return new n(function(n,r){t.select(function(t,e){t.count(e.f.id)}).from(i.fr.name).as("f").innerJoin(i.pa.name,function(t){t.and("f.type").eq.key("p.type"),t.and("f.id").eq.key("p.idx_fragment_id")}).as("p").where(function(t){t.and("f.type").eq.value(e.type),t.and("f.value").eq.value(e.value)}).groupBy(["f.id"]).run(function(t,e){e(),n(t)})["catch"](r)})}},i.idx.create=function(t){var e=this;return new n(function(n,r){t.createTable(e.name,{keyPath:"id",autoIncrement:!0}).run(function(t,e){e(),n(t)})["catch"](r)})},i.idx.drop=function(t){var e=this;return new n(function(n,r){t.dropTable(e.name).run(function(t,e){e(),n(t)})["catch"](r)})},i.idx.index=[{columns:["type","value","skip","data_id","content_pos1","content_pos2"],name:"imy_index_idx1",create:function(t){var e=this;return new n(function(n,r){t.createIndex(i.idx.name,e.name,e.columns).run(function(t,e){e(),n(t)})["catch"](r)})},drop:function(t){var e=this;return new n(function(n,r){t.dropIndex(i.idx.name,e.name).run(function(t,e){e(),n(t)})["catch"](r)})}}],i.idx.select={},i.idx.insert=function(t,e){if(r.hasProperty(e,[this.all_columns])){var i=this,o={type:e.type,value:e.value,data_id:e.data_id,content_pos1:e.content_pos1,content_pos2:e.content_pos2,skip:e.skip};return new n(function(e,n){t.insertInto(i.name).values(o).run(function(t,n){n(),e(t)})["catch"](n)})}},i.idx["delete"]={all:function(t){var e=this;return new n(function(n,r){t.deleteFrom(e.name).run(function(t,e){e(),n(t)})["catch"](r)})}.bind(i.idx),for_dataid:function(t,e){var i=this;if(r.hasProperty(e,["data_id"]))return new n(function(n,r){t.deleteFrom(i.name).where(function(t){t.and("data_id").eq.value(e.data_id)}).run(function(t,e){e(),n(t)})["catch"](r)})}.bind(i.idx)},i.fr.create=function(t){var e=this;return new n(function(n,r){t.createTable(e.name,{keyPath:"id",autoIncrement:!0}).run(function(t,e){e(),n(t)})["catch"](r)})},i.fr.drop=function(t){var e=this;return new n(function(n,r){t.dropTable(e.name).run(function(t,e){e(),n(t)})["catch"](r)})},i.fr.select={all:function(t){var e=this;return new n(function(n,i){t.select(r._columns(e.all_columns.concat("id"))).from(e.name).run(function(t,e){e(),n(t)})["catch"](i)})}.bind(i.fr),"id.for_type_value":function(t,e){if(r.hasProperty(e,["type","value"])){var i=this;return new n(function(n,r){t.select(function(t,e){t(e.f.id).as("id")}).from(i.name).as("f").where(function(t){t.and("f.type").eq.value(e.type),t.and("f.value").eq.value(e.value)}).run(function(t,e){e(),n(t)})["catch"](r)})}}.bind(i.fr)},i.fr.insert=function(t,e){if(r.hasProperty(e,this.all_columns)){var i=this,o={type:e.type,value:e.value};return new n(function(e,n){t.insertInto(i.name).values(o).run(function(t,n){n(),e(t)})["catch"](n)})}},i.fr["delete"]={all:function(t){var e=this;return new n(function(n,r){t.deleteFrom(e.name).run(function(t,e){e(),n(t)})["catch"](r)})}.bind(i.fr),for_type_value:function(t,e){if(r.hasProperty(e,["type","value"])){var i=this;return new n(function(n,r){t.deleteFrom(i.name).where(function(t){t.and("type").eq.value(e.type),t.and("value").eq.value(e.value)}).run(function(t,e){e(),n(t)})["catch"](r)})}}.bind(i.fr)},i.pa.create=function(t){var e=this;return new n(function(n,r){t.createTable(e.name,{keyPath:"id",autoIncrement:!0}).run(function(t,e){e(),n(t)})["catch"](r)})},i.pa.drop=function(t){var e=this;return new n(function(n,r){t.dropTable(e.name).run(function(t,e){e(),n(t)})["catch"](r)})},i.pa.index=[{name:"imy_idx_parameter_idx1",columns:["type","idx_fragment_id","skip","data_id","content_pos1","content_pos2"],create:function(t){var e=this;return new n(function(n,r){t.createIndex(i.pa.name,e.name,e.columns).run(function(t,e){e(),n(t)})["catch"](r)})},drop:function(t){var e=this;return new n(function(n,r){t.dropIndex(i.pa.name,e.name).run(function(t,e){e(),n(t)})["catch"](r)})}}],i.pa.select={all:function(t){var e=this;return new n(function(n,i){t.select(r._columns(e.all_columns)).from(e.name).run(function(t,e){e(),n(t)})["catch"](i)})}.bind(i.pa)},i.pa.insert=function(t,e){if(r.hasProperty(e,this.all_columns)){var i=this,o={type:e.type,idx_fragment_id:e.idx_fragment_id,data_id:e.data_id,content_pos1:e.content_pos1,content_pos2:e.content_pos2,sort_flag:e.sort_flag,skip:e.skip};return new n(function(e,n){t.insertInto(i.name).values(o).run(function(t,n){n(),e(t)})["catch"](n)})}},i.pa["delete"]={all:function(t){var e=this;return new n(function(n,r){t.deleteFrom(e.name).run(function(t,e){e(),n(t)})["catch"](r)})}.bind(i.pa),for_dataid:function(t,e){var i=this;if(r.hasProperty(e,["data_id"]))return new n(function(n,r){t.deleteFrom(i.name).where(function(t){t.and("data_id").eq.value(e.data_id)}).run(function(t,e){e(),n(t)})["catch"](r)})}.bind(i.pa)},i.da.create=function(t){var e=this;return new n(function(n,r){t.createTable(e.name,{keyPath:"id",autoIncrement:!0}).run(function(t,e){e(),n(t)})["catch"](r)})},i.da.drop=function(t){var e=this;return new n(function(n,r){t.dropTable(e.name).run(function(t,e){e(),n(t)})["catch"](r)})},i.da.index=[{columns:["type","content"],name:"imy_data_idx1",create:function(t){var e=this;return new n(function(n,r){t.createIndex(i.da.name,e.name,e.columns).run(function(t,e){e(),n(t)})["catch"](r)})},drop:function(t){var e=this;return new n(function(n,r){t.dropIndex(i.da.name,e.name).run(function(t,e){e(),n(t)})["catch"](r)})}}],i.da.select={"all.for":function(t,e){var i=this;return new n(function(n,o){t.select(r._columns(i.all_columns)).from(i.name).where(function(t){r.hasProperty(e,["id"])&&t.and("id").eq.value(e.id),r.hasProperty(e,["type"])&&t.and("type").eq.value(e.type),r.hasProperty(e,["content"])&&t.and("content").eq.value(e.content)}).run(function(t,e){e(),n(t)})["catch"](o)})}.bind(i.da)},i.da.insert=function(t,e){if(r.hasProperty(e,["type","content"])){var i=this,o={type:e.type,content:e.content};return new n(function(e,n){t.insertInto(i.name).values(o).run(function(t,n){n(),e(t)})["catch"](n)})}},i.da.update={"for":function(t,e,i){var o=this,s={};return r.hasProperty(e,["content"])&&(s.content=e.content),r.hasProperty(e,["type"])&&(s.type=e.type),s.updated_at=r._date(t,new Date),new n(function(e,n){t.update(o.name).set(s).where(function(t){r.hasProperty(i,["id"])&&t.and("id").eq.value(i.id),r.hasProperty(i,["type"])&&t.and("type").eq.value(i.type),r.hasProperty(i,["content"])&&t.and("content").eq.value(i.content)}).run(function(t,n){n(),e(t)})["catch"](n)})}.bind(i.da)},i.da["delete"]={all:function(t){var e=this;return new n(function(n,r){t.deleteFrom(e.name).run(function(t,e){e(),n(t)})["catch"](r)})}.bind(i.da),"for":function(t,e){if(r.hasProperty(e,["id"])){var i=this;return new n(function(n,r){t.deleteFrom(i.name).where(function(t){t.and("id").eq.value(e.id)}).run(function(t,e){e(),n(t)})["catch"](r)})}}.bind(i.da)},e.ImyDBSLI2=i}(this)},{"../lib/SyncPromise.js":7,"../lib/util.js":14}],19:[function(t,e,n){function r(t,e){return p.isUndefined(e)?""+e:p.isNumber(e)&&!isFinite(e)?e.toString():p.isFunction(e)||p.isRegExp(e)?e.toString():e}function i(t,e){return p.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return i(JSON.stringify(t.actual,r),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,r),128)}function s(t,e,n,r,i){throw new g.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function a(t,e){t||s(t,!0,e,"==",g.ok)}function u(t,e){if(t===e)return!0;if(p.isBuffer(t)&&p.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return p.isDate(t)&&p.isDate(e)?t.getTime()===e.getTime():p.isRegExp(t)&&p.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:p.isObject(t)||p.isObject(e)?l(t,e):t==e}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function l(t,e){if(p.isNullOrUndefined(t)||p.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(p.isPrimitive(t)||p.isPrimitive(e))return t===e;var n=c(t),r=c(e);if(n&&!r||!n&&r)return!1;if(n)return t=d.call(t),e=d.call(e),u(t,e);var i,o,s=y(t),a=y(e);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!u(t[i],e[i]))return!1;return!0}function f(t,e){return!(!t||!e)&&("[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e||e.call({},t)===!0)}function h(t,e,n,r){var i;p.isString(n)&&(r=n,n=null);try{e()}catch(o){i=o}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&s(i,n,"Missing expected exception"+r),!t&&f(i,n)&&s(i,n,"Got unwanted exception"+r),t&&i&&n&&!f(i,n)||!t&&i)throw i}var p=t("util/"),d=Array.prototype.slice,_=Object.prototype.hasOwnProperty,g=e.exports=a;g.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=e.name,a=r.indexOf("\n"+i);if(a>=0){var u=r.indexOf("\n",a+1);r=r.substring(u+1)}this.stack=r}}},p.inherits(g.AssertionError,Error),g.fail=s,g.ok=a,g.equal=function(t,e,n){t!=e&&s(t,e,n,"==",g.equal)},g.notEqual=function(t,e,n){t==e&&s(t,e,n,"!=",g.notEqual)},g.deepEqual=function(t,e,n){u(t,e)||s(t,e,n,"deepEqual",g.deepEqual)},g.notDeepEqual=function(t,e,n){u(t,e)&&s(t,e,n,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(t,e,n){t!==e&&s(t,e,n,"===",g.strictEqual)},g.notStrictEqual=function(t,e,n){t===e&&s(t,e,n,"!==",g.notStrictEqual)},g["throws"]=function(t,e,n){h.apply(this,[!0].concat(d.call(arguments)))},g.doesNotThrow=function(t,e){h.apply(this,[!1].concat(d.call(arguments)))},g.ifError=function(t){if(t)throw t};var y=Object.keys||function(t){var e=[];for(var n in t)_.call(t,n)&&e.push(n);return e}},{"util/":53}],20:[function(t,e,n){},{}],21:[function(t,e,n){(function(e){"use strict";function r(){try{var t=new Uint8Array(1);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=s.prototype):(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?f(t,e,n):d(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number')}function c(t,e,n,r){return u(e),e<=0?o(t,e):void 0!==n?"string"==typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}function l(t,e){if(u(e),t=o(t,e<0?0:0|_(e)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;n++)t[n]=0;return t}function f(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(e,n);return t=o(t,r),t.write(e,n),t}function h(t,e){var n=0|_(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),s.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=s.prototype):t=h(t,e),t}function d(t,e){if(s.isBuffer(e)){var n=0|_(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||H(e.length)?o(t,0):h(t,e);if("Buffer"===e.type&&X(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function g(t){return+t!=t&&(t=0),s.alloc(+t)}function y(t,e){if(s.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return S(this,e,n);case"ascii":return T(this,e,n);case"binary":return I(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r){function i(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,s=t.length,a=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,n/=2}for(var u=-1,c=0;n+c<s;c++)if(i(t,n+c)===i(e,u===-1?0:c-u)){if(u===-1&&(u=c),c-u+1===a)return(n+u)*o}else u!==-1&&(c-=c-u),u=-1;return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function x(t,e,n,r){return K(z(e,t.length-n),t,n,r)}function j(t,e,n,r){return K(V(e),t,n,r)}function k(t,e,n,r){return j(t,e,n,r)}function E(t,e,n,r){return K(J(e),t,n,r)}function A(t,e,n,r){return K($(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?Y.fromByteArray(t):Y.fromByteArray(t.slice(e,n))}function S(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,c,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(s=f));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return R(r)}function R(t){var e=t.length;if(e<=Z)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Z));return n}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;o++)i+=Q(t[o]);return i}function q(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function F(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function P(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function D(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return i||N(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(t,e,n,r,23,4),n+4}function M(t,e,n,r,i){return i||N(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(t,e,n,r,52,8),n+8}function U(t){if(t=W(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function W(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Q(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;s++){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function $(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function J(t){return Y.toByteArray(U(t))}function K(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function H(t){return t!==t}var Y=t("base64-js"),G=t("ieee754"),X=t("isarray");n.Buffer=s,n.SlowBuffer=g,n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),n.kMaxLength=i(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,n){return a(null,t,e,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,n){return c(null,t,e,n)},s.allocUnsafe=function(t){return l(null,t)},s.allocUnsafeSlow=function(t){return l(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!X(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var r=s.allocUnsafe(e),i=0;for(n=0;n<t.length;n++){var o=t[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):v.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,n,r,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,a=n-e,u=Math.min(o,a),c=this.slice(r,i),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0},s.prototype.indexOf=function(t,e,n){if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:b(this,t,e,n);if("number"==typeof t)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):b(this,[t],e,n);throw new TypeError("val must be string, number or Buffer")},s.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return j(this,t,e,n);case"binary":return k(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;s.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=s.prototype;else{var i=e-t;r=new s(i,(void 0));for(var o=0;o<i;o++)r[o]=this[o+t]}return r},s.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||F(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||F(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||F(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||F(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},s.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),G.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),G.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),G.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),G.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e=0|e,n=0|n,!r){var i=Math.pow(2,8*n)-1;P(this,t,e,n,i,0)}var o=1,s=0;for(this[e]=255&t;++s<n&&(o*=256);)this[e+s]=t/o&255;return e+n},s.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e=0|e,n=0|n,!r){var i=Math.pow(2,8*n)-1;P(this,t,e,n,i,0)}var o=n-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+n},s.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);P(this,t,e,n,i-1,-i);
}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):D(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):D(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||P(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return M(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return M(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;i--)t[i+e]=this[i+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(i=0;i<o;i++)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;o++)this[o]=t;else{var a=s.isBuffer(t)?t:z(new s(t,r).toString()),u=a.length;for(o=0;o<n-e;o++)this[o+e]=a[o%u]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":22,ieee754:23,isarray:24}],22:[function(t,e,n){"use strict";function r(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)u[e]=t[e],c[t.charCodeAt(e)]=e;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63}function i(t){var e,n,r,i,o,s,a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[a-2]?2:"="===t[a-1]?1:0,s=new l(3*a/4-o),r=o>0?a-4:a;var u=0;for(e=0,n=0;e<r;e+=4,n+=3)i=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;return 2===o?(i=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[u++]=255&i):1===o&&(i=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i),s}function o(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function s(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(o(r));return i.join("")}function a(t){for(var e,n=t.length,r=n%3,i="",o=[],a=16383,c=0,l=n-r;c<l;c+=a)o.push(s(t,c,c+a>l?l:c+a));return 1===r?(e=t[n-1],i+=u[e>>2],i+=u[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=u[e>>10],i+=u[e>>4&63],i+=u[e<<2&63],i+="="),o.push(i),o.join("")}n.toByteArray=i,n.fromByteArray=a;var u=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array;r()},{}],23:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,_=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*_}},{}],24:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],25:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=o;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],26:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],27:[function(t,e,n){e.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],28:[function(t,e,n){function r(){l&&a&&(l=!1,a.length?c=a.concat(c):f=-1,c.length&&i())}function i(){if(!l){var t=setTimeout(r);l=!0;for(var e=c.length;e;){for(a=c,c=[];++f<e;)a&&a[f].run();f=-1,e=c.length}a=null,l=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,u=e.exports={},c=[],l=!1,f=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],29:[function(t,e,n){(function(t){!function(r){function i(t){throw new RangeError(q[t])}function o(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function s(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(C,".");var i=t.split("."),s=o(i,e).join(".");return r+s}function a(t){for(var e,n,r=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function u(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=D(t>>>10&1023|55296),t=56320|1023&t),e+=D(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:x}function l(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,n){var r=0;for(t=n?P(t/A):t>>1,t+=P(t/e);t>F*k>>1;r+=x)t=P(t/F);return P(r+(F+1)*t/(t+E))}function h(t){var e,n,r,o,s,a,l,h,p,d,_=[],g=t.length,y=0,v=S,m=O;for(n=t.lastIndexOf(R),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&i("not-basic"),_.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(s=y,a=1,l=x;o>=g&&i("invalid-input"),h=c(t.charCodeAt(o++)),(h>=x||h>P((w-y)/a))&&i("overflow"),y+=h*a,p=l<=m?j:l>=m+k?k:l-m,!(h<p);l+=x)d=x-p,a>P(w/d)&&i("overflow"),a*=d;e=_.length+1,m=f(y-s,e,0==s),P(y/e)>w-v&&i("overflow"),v+=P(y/e),y%=e,_.splice(y++,0,v)}return u(_)}function p(t){var e,n,r,o,s,u,c,h,p,d,_,g,y,v,m,b=[];for(t=a(t),g=t.length,e=S,n=0,s=O,u=0;u<g;++u)_=t[u],_<128&&b.push(D(_));for(r=o=b.length,o&&b.push(R);r<g;){for(c=w,u=0;u<g;++u)_=t[u],_>=e&&_<c&&(c=_);for(y=r+1,c-e>P((w-n)/y)&&i("overflow"),n+=(c-e)*y,e=c,u=0;u<g;++u)if(_=t[u],_<e&&++n>w&&i("overflow"),_==e){for(h=n,p=x;d=p<=s?j:p>=s+k?k:p-s,!(h<d);p+=x)m=h-d,v=x-d,b.push(D(l(d+m%v,0))),h=P(m/v);b.push(D(l(h,0))),s=f(n,y,r==o),n=0,++r}++n,++e}return b.join("")}function d(t){return s(t,function(t){return T.test(t)?h(t.slice(4).toLowerCase()):t})}function _(t){return s(t,function(t){return I.test(t)?"xn--"+p(t):t})}var g="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof e&&e&&!e.nodeType&&e,v="object"==typeof t&&t;v.global!==v&&v.window!==v&&v.self!==v||(r=v);var m,b,w=2147483647,x=36,j=1,k=26,E=38,A=700,O=72,S=128,R="-",T=/^xn--/,I=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=x-j,P=Math.floor,D=String.fromCharCode;if(m={version:"1.4.1",ucs2:{decode:a,encode:u},decode:h,encode:p,toASCII:_,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return m});else if(g&&y)if(e.exports==g)y.exports=m;else for(b in m)m.hasOwnProperty(b)&&(g[b]=m[b]);else r.punycode=m}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],30:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var f,h,p,d,_=t[l].replace(a,"%20"),g=_.indexOf(n);g>=0?(f=_.substr(0,g),h=_.substr(g+1)):(f=_,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],31:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(s(t),function(s){var a=encodeURIComponent(i(s))+n;return o(t[s])?r(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],32:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":30,"./encode":31}],33:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":34}],34:[function(t,e,n){"use strict";function r(t){return this instanceof r?(c.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(t){t.end()}var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=r;var a=t("process-nextick-args"),u=t("core-util-is");u.inherits=t("inherits");var c=t("./_stream_readable"),l=t("./_stream_writable");u.inherits(r,c);for(var f=s(l.prototype),h=0;h<f.length;h++){var p=f[h];r.prototype[p]||(r.prototype[p]=l.prototype[p])}},{"./_stream_readable":36,"./_stream_writable":38,"core-util-is":40,inherits:26,"process-nextick-args":42}],35:[function(t,e,n){"use strict";function r(t){return this instanceof r?void i.call(this,t):new r(t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":37,"core-util-is":40,inherits:26}],36:[function(t,e,n){(function(n){"use strict";function r(t,e,n){return N?t.prependListener(e,n):void(t._events&&t._events[e]?O(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function i(e,n){B=B||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,n instanceof B&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(D||(D=t("string_decoder/").StringDecoder),this.decoder=new D(e.encoding),this.encoding=e.encoding)}function o(e){return B=B||t("./_stream_duplex"),this instanceof o?(this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void S.call(this)):new o(e)}function s(t,e,n,r,i){var o=l(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,f(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else{var c;!e.decoder||i||r||(n=e.decoder.write(n),c=!e.objectMode&&0===n.length),i||(e.reading=!1),c||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&h(t))),d(t,e)}else i||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function u(t){return t>=L?t=L:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function c(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=u(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function l(t,e){var n=null;return I.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,h(t)}}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(P("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?A(p,t):p(t))}function p(t){P("emit readable"),t.emit("readable"),b(t)}function d(t,e){e.readingMore||(e.readingMore=!0,A(_,t,e))}function _(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(P("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;P("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&T(t,"data")&&(e.flowing=!0,b(t))}}function y(t){P("readable nexttick read 0"),t.read(0)}function v(t,e){e.resumeScheduled||(e.resumeScheduled=!0,A(m,t,e))}function m(t,e){e.reading||(P("resume read 0"),t.read(0)),e.resumeScheduled=!1,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;if(P("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function w(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!t||t>=i)n=o?r.join(""):1===r.length?r[0]:I.concat(r,i),r.length=0;else if(t<r[0].length){var a=r[0];n=a.slice(0,t),r[0]=a.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":C.allocUnsafe(t);for(var u=0,c=0,l=r.length;c<l&&u<t;c++){var f=r[0],h=Math.min(t-u,f.length);o?n+=f.slice(0,h):f.copy(n,u,0,h),h<f.length?r[0]=f.slice(h):r.shift(),u+=h}}return n}function x(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,A(j,e,t))}function j(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function k(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function E(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}e.exports=o;var A=t("process-nextick-args"),O=t("isarray");o.ReadableState=i;var S,R=t("events").EventEmitter,T=function(t,e){return t.listeners(e).length};!function(){try{S=t("stream")}catch(e){}finally{S||(S=t("events").EventEmitter)}}();var I=t("buffer").Buffer,C=t("buffer-shims"),q=t("core-util-is");q.inherits=t("inherits");var F=t("util"),P=void 0;P=F&&F.debuglog?F.debuglog("stream"):function(){};var D;q.inherits(o,S);var B,B,N="function"==typeof R.prototype.prependListener;o.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding,e!==n.encoding&&(t=C.from(t,e),e="")),s(this,n,t,e,!1)},o.prototype.unshift=function(t){var e=this._readableState;return s(this,e,t,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(e){return D||(D=t("string_decoder/").StringDecoder),this._readableState.decoder=new D(e),this._readableState.encoding=e,this};var L=8388608;o.prototype.read=function(t){P("read",t);var e=this._readableState,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return P("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?x(this):h(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&x(this),null;var r=e.needReadable;P("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,P("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,P("reading or ended",r)),r&&(P("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=c(n,e));var i;return i=t>0?w(t,e):null,null===i&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&x(this),null!==i&&this.emit("data",i),i},o.prototype._read=function(t){this.emit("error",new Error("not implemented"))},o.prototype.pipe=function(t,e){function i(t){P("onunpipe"),t===h&&s()}function o(){P("onend"),t.end()}function s(){P("cleanup"),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("drain",y),t.removeListener("error",u),t.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",s),h.removeListener("data",a),v=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||y()}function a(e){P("ondata");var n=t.write(e);!1===n&&((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&E(p.pipes,t)!==-1)&&!v&&(P("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++),h.pause())}function u(e){P("onerror",e),f(),t.removeListener("error",u),0===T(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",l),f()}function l(){P("onfinish"),t.removeListener("close",c),f()}function f(){P("unpipe"),h.unpipe(t)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,P("pipe count=%d opts=%j",p.pipesCount,e);var d=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,_=d?o:s;p.endEmitted?A(_):h.once("end",_),t.on("unpipe",i);var y=g(h);t.on("drain",y);var v=!1;return h.on("data",a),r(t,"error",u),t.once("close",c),t.once("finish",l),t.emit("pipe",h),p.flowing||(P("pipe resume"),h.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=E(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var n=S.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&!this._readableState.endEmitted){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&h(this,r):A(y,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(P("resume"),t.flowing=!0,v(this,t)),this},o.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(P("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(P("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return k(o,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){P("wrapped _read",e),n&&(n=!1,t.resume())},r},o._fromList=w}).call(this,t("_process"))},{"./_stream_duplex":34,_process:28,buffer:21,"buffer-shims":39,"core-util-is":40,events:25,inherits:26,isarray:41,"process-nextick-args":42,"string_decoder/":49,util:20}],37:[function(t,e,n){"use strict";function r(t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new r(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}e.exports=o;var a=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("Not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":34,"core-util-is":40,inherits:26}],38:[function(t,e,n){(function(n){"use strict";function r(){}function i(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function o(e,n){T=T||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,n instanceof T&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function s(e){return T=T||t("./_stream_duplex"),this instanceof s||this instanceof T?(this._writableState=new o(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void A.call(this)):new s(e)}function a(t,e){var n=new Error("write after end");t.emit("error",n),j(e,n)}function u(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):S.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),j(r,o),i=!1),i}function c(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=R.from(e,n)),e}function l(t,e,n,r,o){n=c(e,n,r),S.isBuffer(n)&&(r="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new i(n,r,o),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else f(t,e,!1,s,n,r,o);return a}function f(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function h(t,e,n,r,i){--e.pendingcb,n?j(i,r):i(r),t._writableState.errorEmitted=!0,t.emit("error",r)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(p(n),e)h(t,n,r,e,i);else{var o=v(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(t,n),r?k(_,t,n,o,i):_(t,n,o,i)}}function _(t,e,n,r){n||g(t,e),e.pendingcb--,r(),b(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function y(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;f(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new x(e)}else{for(;n;){var a=n.chunk,u=n.encoding,c=n.callback,l=e.objectMode?1:a.length;if(f(t,e,!1,l,a,u,c),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function v(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function m(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var n=v(e);return n&&(0===e.pendingcb?(m(t,e),e.finished=!0,t.emit("finish")):m(t,e)),n}function w(t,e,n){e.ending=!0,b(t,e),n&&(e.finished?j(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function x(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}e.exports=s;var j=t("process-nextick-args"),k=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:j;s.WritableState=o;var E=t("core-util-is");E.inherits=t("inherits");var A,O={deprecate:t("util-deprecate")};!function(){try{A=t("stream")}catch(e){}finally{A||(A=t("events").EventEmitter)}}();var S=t("buffer").Buffer,R=t("buffer-shims");E.inherits(s,A);var T;o.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(o.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var T;
s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(t,e,n){var i=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),S.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?a(this,n):u(this,i,t,n)&&(i.pendingcb++,o=l(this,i,t,e,n)),o},s.prototype.cork=function(){var t=this._writableState;t.corked++},s.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||y(this,t))},s.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},s.prototype._write=function(t,e,n){n(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":34,_process:28,buffer:21,"buffer-shims":39,"core-util-is":40,events:25,inherits:26,"process-nextick-args":42,"util-deprecate":43}],39:[function(t,e,n){(function(e){"use strict";var r=t("buffer"),i=r.Buffer,o=r.SlowBuffer,s=r.kMaxLength||2147483647;n.alloc=function(t,e,n){if("function"==typeof i.alloc)return i.alloc(t,e,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>s)throw new RangeError("size is too large");var r=n,o=e;void 0===o&&(r=void 0,o=0);var a=new i(t);if("string"==typeof o)for(var u=new i(o,r),c=u.length,l=-1;++l<t;)a[l]=u[l%c];else a.fill(o);return a},n.allocUnsafe=function(t){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>s)throw new RangeError("size is too large");return new i(t)},n.from=function(t,n,r){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,n,r);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,n);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(t);"undefined"==typeof o&&(o=0);var s=r;if("undefined"==typeof s&&(s=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(s>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+s))}if(i.isBuffer(t)){var a=new i(t.length);return t.copy(a,0,0,t.length),a}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},n.allocUnsafeSlow=function(t){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=s)throw new RangeError("size is too large");return new o(t)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:21}],40:[function(t,e,n){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===g(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===g(t)}function p(t){return"[object Error]"===g(t)||t instanceof Error}function d(t){return"function"==typeof t}function _(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=f,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=_,n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../../../insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../insert-module-globals/node_modules/is-buffer/index.js":27}],41:[function(t,e,n){arguments[4][24][0].apply(n,arguments)},{dup:24}],42:[function(t,e,n){(function(t){"use strict";function n(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(this,t("_process"))},{_process:28}],43:[function(t,e,n){(function(t){function n(t,e){function n(){if(!i){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(r("noDeprecation"))return t;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(n){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(t,e,n){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":35}],45:[function(t,e,n){(function(r){var i=function(){try{return t("stream")}catch(e){}}();n=e.exports=t("./lib/_stream_readable.js"),n.Stream=i||n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(e.exports=i)}).call(this,t("_process"))},{"./lib/_stream_duplex.js":34,"./lib/_stream_passthrough.js":35,"./lib/_stream_readable.js":36,"./lib/_stream_transform.js":37,"./lib/_stream_writable.js":38,_process:28}],46:[function(t,e,n){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":37}],47:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":38}],48:[function(t,e,n){function r(){i.call(this)}e.exports=r;var i=t("events").EventEmitter,o=t("inherits");o(r,i),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function s(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",a),t.removeListener("error",a),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",s));var l=!1;return c.on("error",a),t.on("error",a),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{events:25,inherits:26,"readable-stream/duplex.js":33,"readable-stream/passthrough.js":44,"readable-stream/readable.js":45,"readable-stream/transform.js":46,"readable-stream/writable.js":47}],49:[function(t,e,n){function r(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t("buffer").Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},{buffer:21}],50:[function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return c.isString(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=t("punycode"),c=t("./util");n.parse=i,n.resolve=s,n.resolveObject=a,n.format=o,n.Url=r;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),_=["'"].concat(d),g=["%","/","?",";","#"].concat(_),y=["/","?","#"],v=255,m=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},j={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=t("querystring");r.prototype.parse=function(t,e,n){if(!c.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",o=t.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(i);var a=t;if(a=a.trim(),!n&&1===t.split("#").length){var f=h.exec(a);if(f)return this.path=a,this.href=a,this.pathname=f[1],f[2]?(this.search=f[2],e?this.query=k.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=l.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(n||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===a.substr(0,2);!E||p&&x[p]||(a=a.substr(2),this.slashes=!0)}if(!x[p]&&(E||p&&!j[p])){for(var A=-1,O=0;O<y.length;O++){var S=a.indexOf(y[O]);S!==-1&&(A===-1||S<A)&&(A=S)}var R,T;T=A===-1?a.lastIndexOf("@"):a.lastIndexOf("@",A),T!==-1&&(R=a.slice(0,T),a=a.slice(T+1),this.auth=decodeURIComponent(R)),A=-1;for(var O=0;O<g.length;O++){var S=a.indexOf(g[O]);S!==-1&&(A===-1||S<A)&&(A=S)}A===-1&&(A=a.length),this.host=a.slice(0,A),a=a.slice(A),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var C=this.hostname.split(/\./),O=0,q=C.length;O<q;O++){var F=C[O];if(F&&!F.match(m)){for(var P="",D=0,B=F.length;D<B;D++)P+=F.charCodeAt(D)>127?"x":F[D];if(!P.match(m)){var N=C.slice(0,O),L=C.slice(O+1),M=F.match(b);M&&(N.push(M[1]),L.unshift(M[2])),L.length&&(a="/"+L.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=u.toASCII(this.hostname));var U=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!w[d])for(var O=0,q=_.length;O<q;O++){var Q=_[O];if(a.indexOf(Q)!==-1){var z=encodeURIComponent(Q);z===Q&&(z=escape(Q)),a=a.split(Q).join(z)}}var V=a.indexOf("#");V!==-1&&(this.hash=a.substr(V),a=a.slice(0,V));var $=a.indexOf("?");if($!==-1?(this.search=a.substr($),this.query=a.substr($+1),e&&(this.query=k.parse(this.query)),a=a.slice(0,$)):e&&(this.search="",this.query={}),a&&(this.pathname=a),j[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",J=this.search||"";this.path=U+J}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=k.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||j[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(c.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var l=a[u];"protocol"!==l&&(n[l]=t[l])}return j[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!j[t.protocol]){for(var f=Object.keys(t),h=0;h<f.length;h++){var p=f[h];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||x[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var _=n.pathname||"",g=n.search||"";n.path=_+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=v||y||n.host&&t.pathname,b=m,w=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],k=n.protocol&&!j[n.protocol];if(k&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),m=m&&(""===d[0]||""===w[0])),v)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=t.search,n.query=t.query;else if(!c.isNullOrUndefined(t.search)){if(k){n.hostname=n.host=w.shift();var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return n.search=t.search,n.query=t.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var A=w.slice(-1)[0],O=(n.host||t.host||w.length>1)&&("."===A||".."===A)||""===A,S=0,R=w.length;R>=0;R--)A=w[R],"."===A?w.splice(R,1):".."===A?(w.splice(R,1),S++):S&&(w.splice(R,1),S--);if(!m&&!b)for(;S--;S)w.unshift("..");!m||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),O&&"/"!==w.join("/").substr(-1)&&w.push("");var T=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(k){n.hostname=n.host=T?"":w.length?w.shift():"";var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return m=m||n.host&&w.length,m&&!T&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=f.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":51,punycode:29,querystring:32}],51:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],52:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],53:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),_(e)?r.showHidden=e:e&&n._extend(r,e),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&A(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return m(i)||(i=u(t,i,r)),i}var o=c(t,e);if(o)return o;var s=Object.keys(e),_=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),E(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(e);if(0===s.length){if(A(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(k(e))return t.stylize(Date.prototype.toString.call(e),"date");if(E(e))return l(e)}var y="",v=!1,b=["{","}"];if(d(e)&&(v=!0,b=["[","]"]),A(e)){var w=e.name?": "+e.name:"";y=" [Function"+w+"]"}if(x(e)&&(y=" "+RegExp.prototype.toString.call(e)),k(e)&&(y=" "+Date.prototype.toUTCString.call(e)),E(e)&&(y=" "+l(e)),0===s.length&&(!v||0==e.length))return b[0]+y+b[1];if(r<0)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var j;return j=v?f(t,e,r,_,s):s.map(function(n){return h(t,e,r,_,n,v)}),t.seen.pop(),p(j,y,b)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(m(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):_(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i){for(var o=[],s=0,a=e.length;s<a;++s)I(e,String(s))?o.push(h(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}function h(t,e,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),I(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=g(n)?u(t,c.value,null):u(t,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function v(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return j(t)&&"[object RegExp]"===S(t)}function j(t){return"object"==typeof t&&null!==t}function k(t){return j(t)&&"[object Date]"===S(t)}function E(t){return j(t)&&("[object Error]"===S(t)||t instanceof Error)}function A(t){return"function"==typeof t}function O(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function S(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var C=/%[sdj%]/g;n.format=function(t){if(!m(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(C,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];n<o;a=r[++n])s+=g(a)||!j(a)?" "+a:" "+i(a);return s},n.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var q,F={};n.debuglog=function(t){if(w(q)&&(q=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!F[t])if(new RegExp("\\b"+t+"\\b","i").test(q)){var r=e.pid;F[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else F[t]=function(){};return F[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=_,n.isNull=g,n.isNullOrUndefined=y,n.isNumber=v,n.isString=m,n.isSymbol=b,n.isUndefined=w,n.isRegExp=x,n.isObject=j,n.isDate=k,n.isError=E,n.isFunction=A,n.isPrimitive=O,n.isBuffer=t("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!j(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":52,_process:28,inherits:26}],54:[function(t,e,n){e.exports=t("./lib/index")},{"./lib/index":67}],55:[function(t,e,n){"use strict";function r(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.config=t,this.connectionSettings=E(t.connection||{}),this.driverName&&t.connection&&(this.initializeDriver(),(!t.pool||t.pool&&0!==t.pool.max)&&this.initializePool(t)),this.valueForUndefined=this.raw("DEFAULT"),t.useNullAsDefault&&(this.valueForUndefined=null)}var i=t("lodash"),o=t("./promise"),s=t("./helpers"),a=t("./raw"),u=t("./runner"),c=t("./formatter"),l=t("./transaction"),f=t("./query/builder"),h=t("./query/compiler"),p=t("./schema/builder"),d=t("./schema/compiler"),_=t("./schema/tablebuilder"),g=t("./schema/tablecompiler"),y=t("./schema/columnbuilder"),v=t("./schema/columncompiler"),m=t("pool2"),b=t("inherits"),w=t("events").EventEmitter,x=t("./query/string"),j=t("lodash/object/assign"),k=t("lodash/utility/uniqueId"),E=t("lodash/lang/cloneDeep"),A=t("debug")("knex:client"),O=t("debug")("knex:query");b(r,w),j(r.prototype,{Formatter:c,formatter:function(){return new this.Formatter(this)},QueryBuilder:f,queryBuilder:function(){return new this.QueryBuilder(this)},QueryCompiler:h,queryCompiler:function(t){return new this.QueryCompiler(this,t)},SchemaBuilder:p,schemaBuilder:function(){return new this.SchemaBuilder(this)},SchemaCompiler:d,schemaCompiler:function(t){return new this.SchemaCompiler(this,t)},TableBuilder:_,tableBuilder:function(t,e,n){return new this.TableBuilder(this,t,e,n)},TableCompiler:g,tableCompiler:function(t){return new this.TableCompiler(this,t)},ColumnBuilder:y,columnBuilder:function(t,e,n){return new this.ColumnBuilder(this,t,e,n)},ColumnCompiler:v,columnCompiler:function(t,e){return new this.ColumnCompiler(this,t,e)},Runner:u,runner:function(t){return new this.Runner(this,t)},SqlString:x,Transaction:l,transaction:function(t,e,n){return new this.Transaction(this,t,e,n)},Raw:a,raw:function S(){var S=new this.Raw(this);return S.set.apply(S,arguments)},query:function(t,e){var n=this;return"string"==typeof e&&(e={sql:e}),this.emit("query",j({__knexUid:t.__knexUid},e)),O(e.sql),this._query.call(this,t,e)["catch"](function(t){throw t.message=x.format(e.sql,e.bindings)+" - "+t.message,n.emit("query-error",t,e),t})},stream:function(t,e,n,r){return"string"==typeof e&&(e={sql:e}),this.emit("query",j({__knexUid:t.__knexUid},e)),O(e.sql),this._stream.call(this,t,e,n,r)},prepBindings:function(t){return i.map(t,function(t){return void 0===t?this.valueForUndefined:t},this)},wrapIdentifier:function(t){return"*"!==t?'"'+t.replace(/"/g,'""')+'"':"*"},initializeDriver:function(){try{this.driver=this._driver()}catch(t){s.exit("Knex: run\n$ npm install "+this.driverName+" --save\n"+t.stack)}},Pool:m,initializePool:function(t){this.pool&&this.destroy(),this.pool=new this.Pool(j(this.poolDefaults(t.pool||{}),t.pool)),this.pool.on("error",function(t){s.error("Pool2 - "+t)}),this.pool.on("warn",function(t){s.warn("Pool2 - "+t)})},poolDefaults:function(t){var e,n=this;return t.destroy&&(s.deprecate("config.pool.destroy","config.pool.dispose"),e=t.destroy),{min:2,max:10,acquire:function(e){n.acquireRawConnection().tap(function(e){if(e.__knexUid=k("__knexUid"),t.afterCreate)return o.promisify(t.afterCreate)(e)}).nodeify(e)},dispose:function(e,r){t.beforeDestroy?t.beforeDestroy(e,function(){void 0!==e&&n.destroyRawConnection(e,r)}):void 0!==e&&n.destroyRawConnection(e,r)}}},acquireConnection:function(){var t=this;return new o(function(e,n){return t.pool?void t.pool.acquire(function(t,r){return t?n(t):(A("acquiring connection from pool: %s",r.__knexUid),void e(r))}):n(new Error("There is no pool defined on the current client"))})},releaseConnection:function(t){var e=this.pool;return new o(function(n){A("releasing connection to pool: %s",t.__knexUid),e.release(t),n()})},destroy:function(t){var e=this,n=new o(function(t){return e.pool?void e.pool.end(function(){e.pool=void 0,t()}):t()});return"function"!=typeof t?n:void n.nodeify(t)},database:function(){return this.connectionSettings.database},toString:function(){return"[object KnexClient]"}}),e.exports=r},{"./formatter":64,"./helpers":66,"./promise":69,"./query/builder":70,"./query/compiler":71,"./query/string":74,"./raw":75,"./runner":76,"./schema/builder":77,"./schema/columnbuilder":78,"./schema/columncompiler":79,"./schema/compiler":80,"./schema/tablebuilder":82,"./schema/tablecompiler":83,"./transaction":84,debug:98,events:25,inherits:101,lodash:107,"lodash/lang/cloneDeep":161,"lodash/object/assign":170,"lodash/utility/uniqueId":177,pool2:87}],56:[function(t,e,n){"use strict";function r(t){c.call(this,t),i.isUndefined(t.useNullAsDefault)&&l.warn("sqlite does not support inserting default values. Set the `useNullAsDefault` flag to hide this warning. (see docs http://knexjs.org/#Builder-insert).")}var i=t("lodash"),o=t("../../promise"),s=t("inherits"),a=t("lodash/object/assign"),u=t("lodash/collection/pluck"),c=t("../../client"),l=t("../../helpers"),f=t("./query/compiler"),h=t("./schema/compiler"),p=t("./schema/columncompiler"),d=t("./schema/tablecompiler"),_=t("./schema/ddl");s(r,c),a(r.prototype,{dialect:"sqlite3",driverName:"sqlite3",_driver:function(){return t("sqlite3")},SchemaCompiler:h,QueryCompiler:f,ColumnCompiler:p,TableCompiler:d,ddl:function(t,e,n){return new _(this,t,e,n)},acquireRawConnection:function(){var t=this;return new o(function(e,n){var r=new t.driver.Database(t.connectionSettings.filename,function(t){return t?n(t):void e(r)})})},destroyRawConnection:function(t,e){t.close(),e()},_query:function(t,e){var n,r=e.method;switch(r){case"insert":case"update":case"counter":case"del":n="run";break;default:n="all"}return new o(function(r,i){return t&&t[n]?void t[n](e.sql,e.bindings,function(t,n){return t?i(t):(e.response=n,e.context=this,r(e))}):i(new Error("Error calling "+n+" on connection."))})},_stream:function(t,e,n){var r=this;return new o(function(i,o){return n.on("error",o),n.on("end",i),r._query(t,e).then(function(t){return t.response}).map(function(t){n.write(t)})["catch"](function(t){n.emit("error",t)}).then(function(){n.end()})})},prepBindings:function(t){return i.map(t,function(t){if(void 0===t&&null!==this.valueForUndefined)throw new TypeError("`sqlite` does not support inserting default values. Specify values explicitly or use the `useNullAsDefault` config flag. (see docs http://knexjs.org/#Builder-insert).");return t},this)},processResponse:function(t,e){var n=t.context,r=t.response;if(t.output)return t.output.call(e,r);switch(t.method){case"select":case"pluck":case"first":return r=l.skim(r),"pluck"===t.method&&(r=u(r,t.pluck)),"first"===t.method?r[0]:r;case"insert":return[n.lastID];case"del":case"update":case"counter":return n.changes;default:return r}},poolDefaults:function(t){return a(c.prototype.poolDefaults.call(this,t),{min:1,max:1})}}),e.exports=r},{"../../client":55,"../../helpers":66,"../../promise":69,"./query/compiler":57,"./schema/columncompiler":58,"./schema/compiler":59,"./schema/ddl":60,"./schema/tablecompiler":61,inherits:101,lodash:107,"lodash/collection/pluck":104,"lodash/object/assign":170,sqlite3:20}],57:[function(t,e,n){"use strict";function r(t,e){a.call(this,t,e)}function i(){return""}var o=t("lodash"),s=t("inherits"),a=t("../../../query/compiler"),u=t("lodash/object/assign");
s(r,a),u(r.prototype,{forShare:i,forUpdate:i,insert:function(){var t=this.single.insert||[],e="insert into "+this.tableName+" ";if(Array.isArray(t)){if(0===t.length)return"";if(1===t.length&&t[0]&&o.isEmpty(t[0]))return e+this._emptyInsertValue}else if("object"==typeof t&&o.isEmpty(t))return e+this._emptyInsertValue;var n=this._prepInsert(t);if(o.isString(n))return e+n;if(0===n.columns.length)return"";if(e+="("+this.formatter.columnize(n.columns)+")",1===n.values.length)return e+" values ("+this.formatter.parameterize(n.values[0])+")";for(var r=[],i=-1;++i<n.values.length;){for(var s=-1,a=r[i]=[],u=n.values[i];++s<n.columns.length;)a.push(this.formatter.alias(this.formatter.parameter(u[s]),this.formatter.wrap(n.columns[s])));r[i]=a.join(", ")}return e+" select "+r.join(" union all select ")},truncate:function(){var t=this.tableName;return{sql:"delete from "+t,output:function(){return this.query({sql:"delete from sqlite_sequence where name = "+t})["catch"](function(){})}}},columnInfo:function(){var t=this.single.columnInfo;return{sql:"PRAGMA table_info("+this.single.table+")",output:function(e){var n=/.*\((\d+)\)/,r=o.reduce(e,function(t,e){var r=e.type,i=(i=r.match(n))&&i[1];return r=i?r.split("(")[0]:r,t[e.name]={type:r.toLowerCase(),maxLength:i,nullable:!e.notnull,defaultValue:e.dflt_value},t},{});return t&&r[t]||r}}},limit:function(){var t=!this.single.limit&&0!==this.single.limit;return t&&!this.single.offset?"":"limit "+this.formatter.parameter(t?-1:this.single.limit)}}),e.exports=r},{"../../../query/compiler":71,inherits:101,lodash:107,"lodash/object/assign":170}],58:[function(t,e,n){"use strict";function r(){this.modifiers=["nullable","defaultTo"],o.apply(this,arguments)}var i=t("inherits"),o=t("../../../schema/columncompiler");i(r,o),r.prototype["double"]=r.prototype.decimal=r.prototype.floating="float",r.prototype.timestamp="datetime",e.exports=r},{"../../../schema/columncompiler":79,inherits:101}],59:[function(t,e,n){"use strict";function r(){s.apply(this,arguments)}var i=t("lodash"),o=t("inherits"),s=t("../../../schema/compiler");o(r,s),r.prototype.hasTable=function(t){this.pushQuery({sql:"select * from sqlite_master where type = 'table' and name = "+this.formatter.parameter(t),output:function(t){return t.length>0}})},r.prototype.hasColumn=function(t,e){this.pushQuery({sql:"PRAGMA table_info("+this.formatter.wrap(t)+")",output:function(t){return i.some(t,{name:e})}})},r.prototype.renameTable=function(t,e){this.pushQuery("alter table "+this.formatter.wrap(t)+" rename to "+this.formatter.wrap(e))},e.exports=r},{"../../../schema/compiler":80,inherits:101,lodash:107}],60:[function(t,e,n){"use strict";function r(t,e,n,r){this.client=t,this.tableCompiler=e,this.pragma=n,this.tableName=this.tableCompiler.tableNameRaw,this.alteredName=i.uniqueId("_knex_temp_alter"),this.connection=r}var i=t("lodash"),o=t("../../../promise"),s=t("lodash/object/assign");s(r.prototype,{getColumn:o.method(function(t){var e=i.findWhere(this.pragma,{name:t});if(!e)throw new Error("The column "+t+" is not in the "+this.tableName+" table");return e}),getTableSql:function(){return this.trx.raw('SELECT name, sql FROM sqlite_master WHERE type="table" AND name="'+this.tableName+'"')},renameTable:o.method(function(){return this.trx.raw('ALTER TABLE "'+this.tableName+'" RENAME TO "'+this.alteredName+'"')}),dropOriginal:function(){return this.trx.raw('DROP TABLE "'+this.tableName+'"')},dropTempTable:function(){return this.trx.raw('DROP TABLE "'+this.alteredName+'"')},copyData:function(){return this.trx.raw('SELECT * FROM "'+this.tableName+'"').bind(this).then(this.insertChunked(20,this.alteredName))},reinsertData:function(t){return function(){return this.trx.raw('SELECT * FROM "'+this.alteredName+'"').bind(this).then(this.insertChunked(20,this.tableName,t))}},insertChunked:function(t,e,n){return n=n||function(t){return t},function(t){var r=[],s=this;return o.reduce(t,function(o,a){return o++,r.push(a),o%20===0||o===t.length?s.trx.queryBuilder().table(e).insert(i.map(r,n)).then(function(){r=[]}).thenReturn(o):o},0)}},createTempTable:function(t){return function(){return this.trx.raw(t.sql.replace(this.tableName,this.alteredName))}},_doReplace:function(t,e,n){var r=t.match(/^CREATE TABLE (\S+) \((.*)\)/),i=r[1],o=r[2];if(!o)throw new Error("No column definitions in this statement!");for(var s=0,a=[],u=0,c=0,l=o.length;c<l;c++)switch(o[c]){case"(":s++;break;case")":s--;break;case",":0===s&&(a.push(o.slice(u,c)),u=c+1);break;case" ":u===c&&(u=c+1)}return a.push(o.slice(u,c)),a=a.map(function(t){var r=t.split(" ");if(r[0]===e)return n?(r[0]=n,r.join(" ")):"";var o=/constraint/i.test(r[0])?2:0;return/primary|unique/i.test(r[o])?t.replace(/\(.*\)/,function(t){return t.replace(e,n)}):/foreign/.test(r[o])?(r=t.split(/ references /i),r[0]=r[0].replace(e,n),r[1].slice(0,i.length)===i&&(r[1]=r[1].replace(/\(.*\)/,function(t){return t.replace(e,n)})),r.join(" references ")):t}),t.replace(/\(.*\)/,function(){return"("+a.join(", ")+")"}).replace(/,\s*([,)])/,"$1")},renameColumn:o.method(function(t,e){var n;return this.client.transaction(function(r){return this.trx=r,this.getColumn(t).bind(this).tap(function(t){n=t}).then(this.getTableSql).then(function(n){var r=this.client.wrapIdentifier(t),s=this.client.wrapIdentifier(e),a=n[0],u=this._doReplace(a.sql,r,s);if(n===u)throw new Error("Unable to find the column to change");return o.bind(this).then(this.createTempTable(a)).then(this.copyData).then(this.dropOriginal).then(function(){return this.trx.raw(u)}).then(this.reinsertData(function(n){return n[e]=n[t],i.omit(n,t)})).then(this.dropTempTable)})}.bind(this),{connection:this.connection})}),dropColumn:o.method(function(t){var e;return this.client.transaction(function(n){return this.trx=n,this.getColumn(t).tap(function(t){e=t}).bind(this).then(this.getTableSql).then(function(e){var n=e[0],r=this.client.wrapIdentifier(t),s=this._doReplace(n.sql,r,"");if(e===s)throw new Error("Unable to find the column to change");return o.bind(this).then(this.createTempTable(n)).then(this.copyData).then(this.dropOriginal).then(function(){return this.trx.raw(s)}).then(this.reinsertData(function(e){return i.omit(e,t)})).then(this.dropTempTable)})}.bind(this),{connection:this.connection})})}),e.exports=r},{"../../../promise":69,lodash:107,"lodash/object/assign":170}],61:[function(t,e,n){"use strict";function r(){s.apply(this,arguments),this.primaryKey=void 0}var i=t("lodash"),o=t("inherits"),s=t("../../../schema/tablecompiler");o(r,s),r.prototype.createQuery=function(t,e){var n=e?"create table if not exists ":"create table ",r=n+this.tableName()+" ("+t.sql.join(", ");r+=this.foreignKeys()||"",r+=this.primaryKeys()||"",r+=")",this.pushQuery(r)},r.prototype.addColumns=function(t){for(var e=0,n=t.sql.length;e<n;e++)this.pushQuery({sql:"alter table "+this.tableName()+" add column "+t.sql[e],bindings:t.bindings[e]})},r.prototype.dropUnique=function(t,e){e=e||this._indexCommand("unique",this.tableNameRaw,t),this.pushQuery("drop index "+e)},r.prototype.dropIndex=function(t,e){e=e||this._indexCommand("index",this.tableNameRaw,t),this.pushQuery("drop index "+e)},r.prototype.unique=function(t,e){e=e||this._indexCommand("unique",this.tableNameRaw,t),t=this.formatter.columnize(t),this.pushQuery("create unique index "+e+" on "+this.tableName()+" ("+t+")")},r.prototype.index=function(t,e){e=e||this._indexCommand("index",this.tableNameRaw,t),t=this.formatter.columnize(t),this.pushQuery("create index "+e+" on "+this.tableName()+" ("+t+")")},r.prototype.primary=r.prototype.foreign=function(){"create"!==this.method&&"createIfNot"!==this.method&&console.warn("SQLite3 Foreign & Primary keys may only be added on create")},r.prototype.primaryKeys=function(){var t=i.where(this.grouped.alterTable||[],{method:"primary"});if(t.length>0&&t[0].args.length>0){var e=Array.isArray(t[0].args[0])?t[0].args[0]:t[0].args;return", primary key ("+this.formatter.columnize(e)+")"}},r.prototype.foreignKeys=function(){for(var t="",e=i.where(this.grouped.alterTable||[],{method:"foreign"}),n=0,r=e.length;n<r;n++){var o=e[n].args[0],s=this.formatter.columnize(o.column),a=this.formatter.columnize(o.references),u=this.formatter.wrap(o.inTable);t+=", foreign key("+s+") references "+u+"("+a+")",o.onDelete&&(t+=" on delete "+o.onDelete),o.onUpdate&&(t+=" on update "+o.onUpdate)}return t},r.prototype.createTableBlock=function(){return this.getColumns().concat().join(",")},r.prototype.renameColumn=function(t,e){var n=this;this.pushQuery({sql:"PRAGMA table_info("+this.tableName()+")",output:function(r){return n.client.ddl(n,r,this.connection).renameColumn(t,e)}})},r.prototype.dropColumn=function(t){var e=this;this.pushQuery({sql:"PRAGMA table_info("+this.tableName()+")",output:function(n){return e.client.ddl(e,n,this.connection).dropColumn(t)}})},e.exports=r},{"../../../schema/tablecompiler":83,inherits:101,lodash:107}],62:[function(t,e,n){"use strict";function r(t){a.call(this,t),this.name=t.name||"knex_database",this.version=t.version||"1.0",this.displayName=t.displayName||this.name,this.estimatedSize=t.estimatedSize||5242880}var i=t("inherits"),o=t("lodash"),s=t("./transaction"),a=t("../sqlite3"),u=t("../../promise"),c=t("lodash/object/assign");i(r,a),c(r.prototype,{Transaction:s,dialect:"websql",acquireConnection:function(){var t=this;return new u(function(e,n){try{var r=openDatabase(t.name,t.version,t.displayName,t.estimatedSize);r.transaction(function(t){t.__knexUid=o.uniqueId("__knexUid"),e(t)})}catch(i){n(i)}})},releaseConnection:function(){return u.resolve()},_query:function(t,e){return new u(function(n,r){return t?void t.executeSql(e.sql,e.bindings,function(t,r){return e.response=r,n(e)},function(t,e){r(e)}):r(new Error("No connection provided."))})},_stream:function(t,e,n){var r=this;return new u(function(i,o){return n.on("error",o),n.on("end",i),r._query(t,e).then(function(t){return r.processResponse(t)}).map(function(t){n.write(t)})["catch"](function(t){n.emit("error",t)}).then(function(){n.end()})})},processResponse:function(t,e){var n=t.response;if(t.output)return t.output.call(e,n);switch(t.method){case"pluck":case"first":case"select":for(var r=[],i=0,s=n.rows.length;i<s;i++)r[i]=o.clone(n.rows.item(i));return"pluck"===t.method&&(r=o.pluck(r,t.pluck)),"first"===t.method?r[0]:r;case"insert":return[n.insertId];case"delete":case"update":case"counter":return n.rowsAffected;default:return n}}}),e.exports=r},{"../../promise":69,"../sqlite3":56,"./transaction":63,inherits:101,lodash:107,"lodash/object/assign":170}],63:[function(t,e,n){"use strict";function r(t,e){a.warn("WebSQL transactions will run queries, but do not commit or rollback");var n=this;this._promise=s["try"](function(){e(o(i(n,t)))})}function i(t,e){var n=Object.create(e.constructor.prototype);return n.config=e.config,n.connectionSettings=e.connectionSettings,n.transacting=!0,n.on("query",function(n){t.emit("query",n),e.emit("query",n)}),n.commit=function(){},n.rollback=function(){},n}var o=t("../../util/make-knex"),s=t("../../promise"),a=t("../../helpers"),u=t("inherits"),c=t("events").EventEmitter;u(r,c);var l=["then","bind","catch","finally","asCallback","spread","map","reduce","tap","thenReturn","return","yield","ensure","nodeify","exec"];l.forEach(function(t){r.prototype[t]=function(){return this._promise=this._promise[t].apply(this._promise,arguments)}}),e.exports=r},{"../../helpers":66,"../../promise":69,"../../util/make-knex":86,events:25,inherits:101}],64:[function(t,e,n){"use strict";function r(t){this.client=t,this.bindings=[]}var i=t("./query/builder"),o=t("./raw"),s=t("lodash/object/assign"),a=t("lodash/object/transform");s(r.prototype,{columnize:function(t){for(var e="string"==typeof t?[t]:t,n="",r=-1;++r<e.length;)r>0&&(n+=", "),n+=this.wrap(e[r]);return n},parameterize:function(t,e){if("function"==typeof t)return this.parameter(t);t=Array.isArray(t)?t:[t];for(var n="",r=-1;++r<t.length;)r>0&&(n+=", "),n+=this.parameter(void 0===t[r]?e:t[r]);return n},parameter:function(t){return"function"==typeof t?this.outputQuery(this.compileCallback(t),!0):this.unwrapRaw(t,!0)||"?"},unwrapRaw:function(t,e){var n;return t instanceof i?(n=this.client.queryCompiler(t).toSQL(),n.bindings&&(this.bindings=this.bindings.concat(n.bindings)),this.outputQuery(n,e)):t instanceof o?(t.client=this.client,n=t.toSQL(),n.bindings&&(this.bindings=this.bindings.concat(n.bindings)),n.sql):void(e&&this.bindings.push(t))},rawOrFn:function(t,e){return"function"==typeof t?this.outputQuery(this.compileCallback(t,e)):this.unwrapRaw(t)||""},wrap:function(t){var e;return"function"==typeof t?this.outputQuery(this.compileCallback(t),!0):(e=this.unwrapRaw(t),e?e:"number"==typeof t?t:this._wrapString(t+""))},wrapAsIdentifier:function(t){return this.client.wrapIdentifier((t||"").trim())},alias:function(t,e){return t+" as "+e},operator:function(t){var e=this.unwrapRaw(t);if(e)return e;if(c[(t||"").toLowerCase()]!==!0)throw new TypeError('The operator "'+t+'" is not permitted');return t},direction:function(t){var e=this.unwrapRaw(t);return e?e:u.indexOf((t||"").toLowerCase())!==-1?t:"asc"},compileCallback:function(t,e){var n=this.client,r=n.queryBuilder();t.call(r,r);var i=n.queryCompiler(r);return i.formatter=this,i.toSQL(e||"select")},outputQuery:function(t,e){var n=t.sql||"";return n&&"select"===t.method&&(e||t.as)&&(n="("+n+")",t.as)?this.alias(n,this.wrap(t.as)):n},_wrapString:function(t){var e,n=t.toLowerCase().indexOf(" as ");if(n!==-1){var r=t.slice(0,n),i=t.slice(n+4);return this.alias(this.wrap(r),this.wrapAsIdentifier(i))}var o=-1,s=[];for(e=t.split(".");++o<e.length;)t=e[o],0===o&&e.length>1?s.push(this.wrap((t||"").trim())):s.push(this.client.wrapIdentifier((t||"").trim()));return s.join(".")}});var u=["asc","desc"],c=a(["=","<",">","<=",">=","<>","!=","like","not like","between","ilike","&","|","^","<<",">>","rlike","regexp","not regexp","~","~*","!~","!~*","#","&&","@>","<@","||"],function(t,e){t[e]=!0},Object.create(null));e.exports=r},{"./query/builder":70,"./raw":75,"lodash/object/assign":170,"lodash/object/transform":174}],65:[function(t,e,n){"use strict";function r(t){this.client=t}r.prototype.now=function(){return this.client.raw("CURRENT_TIMESTAMP")},e.exports=r},{}],66:[function(t,e,n){(function(n){"use strict";var r=t("lodash"),i=t("chalk"),o={skim:function(t){return r.map(t,function(t){return r.pick(t,r.keys(t))})},normalizeArr:function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];return Array.isArray(t[0])?t[0]:t},error:function(t){console.log(i.red("Knex:Error "+t))},deprecate:function(t,e){o.warn(t+" is deprecated, please use "+e)},warn:function(t){console.log(i.yellow("Knex:warning - "+t))},exit:function(t){console.log(i.red(t)),n.exit()}};e.exports=o}).call(this,t("_process"))},{_process:28,chalk:90,lodash:107}],67:[function(t,e,n){(function(n){"use strict";function r(e){if("string"==typeof e)return new r(l(c(e),arguments[2]));var n;if(0===arguments.length||!e.client&&!e.dialect)n=a(s);else{var i=e.client||e.dialect;n=a(t("./dialects/"+(f[i]||i)+"/index.js"))}return"string"==typeof e.connection&&(e=l({},e,{connection:c(e.connection).connection})),u(new n(e))}var i=t("./raw"),o=t("./helpers").warn,s=t("./client"),a=t("./util/make-client"),u=t("./util/make-knex"),c=t("./util/parse-connection"),l=t("lodash/object/assign");r.Client=s,r.raw=function(t,e){return new i({}).set(t,e)},r.initialize=function(t){return o("knex.initialize is deprecated, pass your config object directly to the knex module"),new r(t)},r.Promise=t("./promise");var f={mariadb:"maria",mariasql:"maria",pg:"postgres",postgresql:"postgres",sqlite:"sqlite3"};n.browser&&t("./dialects/websql/index.js"),e.exports=r}).call(this,t("_process"))},{"./client":55,"./dialects/websql/index.js":62,"./helpers":66,"./promise":69,"./raw":75,"./util/make-client":85,"./util/make-knex":86,"./util/parse-connection":88,_process:28,"lodash/object/assign":170}],68:[function(t,e,n){"use strict";var r=t("./helpers");e.exports=function(e){var n=t("lodash");e.prototype.toQuery=function(t){var e=this.toSQL(this._method);return n.isArray(e)||(e=[e]),n.map(e,function(e){return this._formatQuery(e.sql,e.bindings,t)},this).join(";\n")},e.prototype._formatQuery=function(t,e,n){return this.client&&this.client.prepBindings&&(e=this.client.prepBindings(e,n)),this.client.SqlString.format(t,e,n)},e.prototype.then=function(){var t=this.client.runner(this).run();return t.then.apply(t,arguments)},e.prototype.options=function(t){return this._options=this._options||[],this._options.push(n.clone(t)||{}),this._cached=void 0,this},e.prototype.connection=function(t){return this._connection=t,this},e.prototype.debug=function(t){return this._debug=!arguments.length||t,this},e.prototype.transacting=function(t){return t&&t.client&&(t.client.transacting?this.client=t.client:r.warn("Invalid transaction value: "+t.client)),this},e.prototype.stream=function(t){return this.client.runner(this).stream(t)},e.prototype.pipe=function(t,e){return this.client.runner(this).pipe(t,e)},n.each(["bind","catch","finally","asCallback","spread","map","reduce","tap","thenReturn","return","yield","ensure","nodeify","exec"],function(t){e.prototype[t]=function(){var e=this.then();return e=e[t].apply(e,arguments)}})}},{"./helpers":66,lodash:107}],69:[function(t,e,n){"use strict";var r=t("bluebird"),i=t("./helpers").deprecate;r.prototype.asCallback=r.prototype.nodeify,r.prototype.exec=function(t){return i(".exec",".nodeify or .asCallback"),this.nodeify(t)},e.exports=r},{"./helpers":66,bluebird:89}],70:[function(t,e,n){"use strict";function r(t){this.client=t,this.and=this,this._single={},this._statements=[],this._method="select",this._debug=t.config&&t.config.debug,this._joinFlag="inner",this._boolFlag="and",this._notFlag=!1}var i=t("lodash"),o=t("assert"),s=t("inherits"),a=t("events").EventEmitter,u=t("../raw"),c=t("../helpers"),l=t("./joinclause"),f=t("lodash/lang/clone"),h=t("lodash/lang/isUndefined"),p=t("lodash/object/assign");s(r,a),p(r.prototype,{toString:function(){return this.toQuery()},toSQL:function(t){return this.client.queryCompiler(this).toSQL(t||this._method)},clone:function(){var t=new this.constructor(this.client);return t._method=this._method,t._single=f(this._single),t._statements=f(this._statements),t._debug=this._debug,h(this._options)||(t._options=f(this._options)),t},columns:function(t){return t?(this._statements.push({grouping:"columns",value:c.normalizeArr.apply(null,arguments)}),this):this},as:function(t){return this._single.as=t,this},withSchema:function(t){return this._single.schema=t,this},table:function(t){return this._single.table=t,this},distinct:function(){return this._statements.push({grouping:"columns",value:c.normalizeArr.apply(null,arguments),distinct:!0}),this},join:function d(t,e){var d,n=this._single.schema,r=this._joinType();return"function"==typeof e?(d=new l(t,r,n),e.call(d,d)):"raw"===r?d=new l(this.client.raw(t,e),"raw"):(d=new l(t,r,n),arguments.length>1&&d.on.apply(d,i.toArray(arguments).slice(1))),this._statements.push(d),this},innerJoin:function(){return this._joinType("inner").join.apply(this,arguments)},leftJoin:function(){return this._joinType("left").join.apply(this,arguments)},leftOuterJoin:function(){return this._joinType("left outer").join.apply(this,arguments)},rightJoin:function(){return this._joinType("right").join.apply(this,arguments)},rightOuterJoin:function(){return this._joinType("right outer").join.apply(this,arguments)},outerJoin:function(){return this._joinType("outer").join.apply(this,arguments)},fullOuterJoin:function(){return this._joinType("full outer").join.apply(this,arguments)},crossJoin:function(){return this._joinType("cross").join.apply(this,arguments)},joinRaw:function(){return this._joinType("raw").join.apply(this,arguments)},where:function(t,e,n){if(t===!1||t===!0)return this.where(1,"=",t?1:0);if("function"==typeof t)return this.whereWrapped(t);if(t instanceof u&&1===arguments.length)return this.whereRaw(t);if(i.isObject(t)&&!(t instanceof u))return this._objectWhere(t);if(2===arguments.length&&(n=e,e="=",null===n))return this.whereNull(t);var r=(""+e).toLowerCase().trim();if(3===arguments.length){if("in"===r||"not in"===r)return this._not("not in"===r).whereIn(arguments[0],arguments[2]);if("between"===r||"not between"===r)return this._not("not between"===r).whereBetween(arguments[0],arguments[2])}return null!==n||"is"!==r&&"is not"!==r?(this._statements.push({grouping:"where",type:"whereBasic",column:t,operator:e,value:n,not:this._not(),bool:this._bool()}),this):this._not("is not"===r).whereNull(t)},orWhere:function(){return this._bool("or").where.apply(this,arguments)},whereNot:function(){return this._not(!0).where.apply(this,arguments)},orWhereNot:function(){return this._bool("or").whereNot.apply(this,arguments)},_objectWhere:function(t){var e=this._bool(),n=this._not()?"Not":"";for(var r in t)this[e+"Where"+n](r,t[r]);return this},whereRaw:function(t,e){var n=t instanceof u?t:this.client.raw(t,e);return this._statements.push({grouping:"where",type:"whereRaw",value:n,bool:this._bool()}),this},orWhereRaw:function(t,e){return this._bool("or").whereRaw(t,e)},whereWrapped:function(t){return this._statements.push({grouping:"where",type:"whereWrapped",value:t,not:this._not(),bool:this._bool()}),this},havingWrapped:function(t){return this._statements.push({grouping:"having",type:"whereWrapped",value:t,bool:this._bool()}),this},whereExists:function(t){return this._statements.push({grouping:"where",type:"whereExists",value:t,not:this._not(),bool:this._bool()}),this},orWhereExists:function(t){return this._bool("or").whereExists(t)},whereNotExists:function(t){return this._not(!0).whereExists(t)},orWhereNotExists:function(t){return this._bool("or").whereNotExists(t)},whereIn:function(t,e){return Array.isArray(e)&&i.isEmpty(e)?this.where(this._not()):(this._statements.push({grouping:"where",type:"whereIn",column:t,value:e,not:this._not(),bool:this._bool()}),this)},orWhereIn:function(t,e){return this._bool("or").whereIn(t,e)},whereNotIn:function(t,e){return this._not(!0).whereIn(t,e)},orWhereNotIn:function(t,e){return this._bool("or")._not(!0).whereIn(t,e)},whereNull:function(t){return this._statements.push({grouping:"where",type:"whereNull",column:t,not:this._not(),bool:this._bool()}),this},orWhereNull:function(t){return this._bool("or").whereNull(t)},whereNotNull:function(t){return this._not(!0).whereNull(t)},orWhereNotNull:function(t){return this._bool("or").whereNotNull(t)},whereBetween:function(t,e){return o(Array.isArray(e),"The second argument to whereBetween must be an array."),o(2===e.length,"You must specify 2 values for the whereBetween clause"),this._statements.push({grouping:"where",type:"whereBetween",column:t,value:e,not:this._not(),bool:this._bool()}),this},whereNotBetween:function(t,e){return this._not(!0).whereBetween(t,e)},orWhereBetween:function(t,e){return this._bool("or").whereBetween(t,e)},orWhereNotBetween:function(t,e){return this._bool("or").whereNotBetween(t,e)},groupBy:function(t){return t instanceof u?this.groupByRaw.apply(this,arguments):(this._statements.push({grouping:"group",type:"groupByBasic",value:c.normalizeArr.apply(null,arguments)}),this)},groupByRaw:function(t,e){var n=t instanceof u?t:this.client.raw(t,e);return this._statements.push({grouping:"group",type:"groupByRaw",value:n}),this},orderBy:function(t,e){return this._statements.push({grouping:"order",type:"orderByBasic",value:t,direction:e}),this},orderByRaw:function(t,e){var n=t instanceof u?t:this.client.raw(t,e);return this._statements.push({grouping:"order",type:"orderByRaw",value:n}),this},union:function(t,e){if(1===arguments.length||2===arguments.length&&i.isBoolean(e)){Array.isArray(t)||(t=[t]);for(var n=0,r=t.length;n<r;n++)this._statements.push({grouping:"union",clause:"union",value:t[n],wrap:e||!1})}else t=i.toArray(arguments).slice(0,arguments.length-1),e=arguments[arguments.length-1],i.isBoolean(e)||(t.push(e),e=!1),this.union(t,e);return this},unionAll:function(t,e){return this._statements.push({grouping:"union",clause:"union all",value:t,wrap:e||!1}),this},having:function(t,e,n){return t instanceof u&&1===arguments.length?this._havingRaw(t):"function"==typeof t?this.havingWrapped(t):(this._statements.push({grouping:"having",type:"havingBasic",column:t,operator:e,value:n,bool:this._bool()}),this)},orHaving:function(){return this._bool("or").having.apply(this,arguments)},havingRaw:function(t,e){return this._havingRaw(t,e)},orHavingRaw:function(t,e){return this._bool("or").havingRaw(t,e)},_havingRaw:function(t,e){var n=t instanceof u?t:this.client.raw(t,e);return this._statements.push({grouping:"having",type:"havingRaw",value:n,bool:this._bool()}),this},offset:function(t){return this._single.offset=t,this},limit:function(t){var e=parseInt(t,10);return isNaN(e)?c.warn("A valid integer must be provided to limit"):this._single.limit=e,this},count:function(t){return this._aggregate("count",t||"*")},min:function(t){return this._aggregate("min",t)},max:function(t){return this._aggregate("max",t)},sum:function(t){return this._aggregate("sum",t)},avg:function(t){return this._aggregate("avg",t)},countDistinct:function(t){return this._aggregate("count",t||"*",!0)},sumDistinct:function(t){return this._aggregate("sum",t,!0)},avgDistinct:function(t){return this._aggregate("avg",t,!0)},increment:function(t,e){return this._counter(t,e)},decrement:function(t,e){return this._counter(t,e,"-")},first:function(){var t,e=new Array(arguments.length);for(t=0;t<e.length;t++)e[t]=arguments[t];return this.select.apply(this,e),this._method="first",this.limit(1),this},pluck:function(t){return this._method="pluck",this._single.pluck=t,this._statements.push({grouping:"columns",type:"pluck",value:t}),this},insert:function(t,e){return this._method="insert",i.isEmpty(e)||this.returning(e),this._single.insert=t,this},update:function(t,e){var n,r=this._single.update||{};if(this._method="update",i.isString(t))r[t]=e,arguments.length>2&&(n=arguments[2]);else{var o=-1,s=Object.keys(t);for(this._single.update&&c.warn("Update called multiple times with objects.");++o<s.length;)r[s[o]]=t[s[o]];n=arguments[1]}return i.isEmpty(n)||this.returning(n),this._single.update=r,this},returning:function(t){return this._single.returning=t,this},"delete":function(t){return this._method="del",i.isEmpty(t)||this.returning(t),this},truncate:function(t){return this._method="truncate",t&&(this._single.table=t),this},columnInfo:function(t){return this._method="columnInfo",this._single.columnInfo=t,this},forUpdate:function(){return this._single.lock="forUpdate",this},forShare:function(){return this._single.lock="forShare",this},fromJS:function(t){return i.each(t,function(t,e){"function"!=typeof this[e]&&c.warn("Knex Error: unknown key "+e),Array.isArray(t)?this[e].apply(this,t):this[e](t)},this),this},modify:function(t){return t.apply(this,[this].concat(i.rest(arguments))),this},_counter:function(t,e,n){var r=parseInt(e,10);return isNaN(r)&&(r=1),this._method="counter",this._single.counter={column:t,amount:r,symbol:n||"+"},this},_bool:function(t){if(1===arguments.length)return this._boolFlag=t,this;var e=this._boolFlag;return this._boolFlag="and",e},_not:function(t){if(1===arguments.length)return this._notFlag=t,this;var e=this._notFlag;return this._notFlag=!1,e},_joinType:function(t){if(1===arguments.length)return this._joinFlag=t,this;var e=this._joinFlag||"inner";return this._joinFlag="inner",e},_aggregate:function(t,e,n){return this._statements.push({grouping:"columns",type:"aggregate",method:t,value:e,aggregateDistinct:n||!1}),this}}),Object.defineProperty(r.prototype,"or",{get:function(){return this._bool("or")}}),Object.defineProperty(r.prototype,"not",{get:function(){return this._not(!0)}}),r.prototype.select=r.prototype.columns,r.prototype.column=r.prototype.columns,r.prototype.andWhereNot=r.prototype.whereNot,r.prototype.andWhere=r.prototype.where,r.prototype.andWhereRaw=r.prototype.whereRaw,r.prototype.andHaving=r.prototype.having,r.prototype.from=r.prototype.table,r.prototype.into=r.prototype.table,r.prototype.del=r.prototype["delete"],t("../interface")(r),e.exports=r},{"../helpers":66,"../interface":68,"../raw":75,"./joinclause":72,assert:19,events:25,inherits:101,lodash:107,"lodash/lang/clone":160,"lodash/lang/isUndefined":169,"lodash/object/assign":170}],71:[function(t,e,n){"use strict";function r(t,e){this.client=t,this.method=e._method||"select",this.options=e._options,this.single=e._single,this.grouped=i.groupBy(e._statements,"grouping"),this.formatter=t.formatter()}var i=t("lodash"),o=t("../helpers"),s=t("../raw"),a=t("lodash/object/assign"),u=t("lodash/collection/reduce"),c=["columns","join","where","union","group","having","order","limit","offset","lock"];a(r.prototype,{_emptyInsertValue:"default values",toSQL:function(t){t=t||this.method;var e=this[t](),n={method:t,options:u(this.options,a,{}),bindings:this.formatter.bindings};return i.isString(e)&&(e={sql:e}),"select"===t&&this.single.as&&(n.as=this.single.as),a(n,e)},select:function(){for(var t=-1,e=[];++t<c.length;)e.push(this[c[t]](this));return i.compact(e).join(" ")},pluck:function(){return{sql:this.select(),pluck:this.single.pluck}},insert:function(){var t=this.single.insert||[],e="insert into "+this.tableName+" ";if(Array.isArray(t)){if(0===t.length)return""}else if("object"==typeof t&&i.isEmpty(t))return e+this._emptyInsertValue;var n=this._prepInsert(t);if("string"==typeof n)e+=n;else if(n.columns.length){e+="("+this.formatter.columnize(n.columns),e+=") values (";for(var r=-1;++r<n.values.length;)0!==r&&(e+="), ("),e+=this.formatter.parameterize(n.values[r]);e+=")"}else 1===t.length&&t[0]?e+=this._emptyInsertValue:e="";return e},update:function(){var t=this.tableName,e=this._prepUpdate(this.single.update),n=this.where();return"update "+t+" set "+e.join(", ")+(n?" "+n:"")},columns:function l(){var t=!1;if(this.onlyUnions())return"";var l=this.grouped.columns||[],e=-1,n=[];if(l)for(;++e<l.length;){var r=l[e];r.distinct&&(t=!0),"aggregate"===r.type?n.push(this.aggregate(r)):r.value&&r.value.length>0&&n.push(this.formatter.columnize(r.value))}return 0===n.length&&(n=["*"]),"select "+(t?"distinct ":"")+n.join(", ")+(this.tableName?" from "+this.tableName:"")},aggregate:function(t){var e=t.value,n=e.toLowerCase().indexOf(" as "),r=t.aggregateDistinct?"distinct ":"";if(n!==-1){var i=e.slice(0,n),o=e.slice(n+4);return t.method+"("+r+this.formatter.wrap(i)+") as "+this.formatter.wrap(o)}return t.method+"("+r+this.formatter.wrap(e)+")"},join:function f(){var t="",e=-1,n=this.grouped.join;if(!n)return"";for(;++e<n.length;){var f=n[e],r=f.schema?f.schema+"."+f.table:f.table;if(e>0&&(t+=" "),"raw"===f.joinType)t+=this.formatter.unwrapRaw(f.table);else{t+=f.joinType+" join "+this.formatter.wrap(r);for(var o=-1;++o<f.clauses.length;){var s=f.clauses[o];t+=" "+(o>0?s[0]:s[1])+" ",t+=this.formatter.wrap(s[2]),i.isUndefined(s[3])||(t+=" "+this.formatter.operator(s[3])),i.isUndefined(s[4])||(t+=" "+this.formatter.wrap(s[4]))}}}return t},where:function(){var t=this.grouped.where;if(t){for(var e=-1,n=[];++e<t.length;){var r=t[e],i=this[r.type](r);i&&(0===n.length?n[0]="where":n.push(r.bool),n.push(i))}return n.length>1?n.join(" "):""}},group:function(){return this._groupsOrders("group")},order:function(){return this._groupsOrders("order")},having:function(){var t=this.grouped.having;if(!t)return"";for(var e=["having"],n=0,r=t.length;n<r;n++){var i="",o=t[n];if(0!==n&&(i=o.bool+" "),"havingBasic"===o.type)e.push(i+this.formatter.columnize(o.column)+" "+this.formatter.operator(o.operator)+" "+this.formatter.parameter(o.value));else if("whereWrapped"===o.type){var s=this.whereWrapped(o);s&&e.push(s)}else e.push(i+this.formatter.unwrapRaw(o.value))}return e.length>1?e.join(" "):""},union:function h(){var t=this.onlyUnions(),e=this.grouped.union;if(!e)return"";for(var n="",r=0,i=e.length;r<i;r++){var h=e[r];r>0&&(n+=" "),(r>0||!t)&&(n+=h.clause+" ");var o=this.formatter.rawOrFn(h.value);o&&(h.wrap&&(n+="("),n+=o,h.wrap&&(n+=")"))}return n},
onlyUnions:function(){return!this.grouped.columns&&this.grouped.union&&!this.tableName},limit:function(){var t=!this.single.limit&&0!==this.single.limit;return t?"":"limit "+this.formatter.parameter(this.single.limit)},offset:function(){return this.single.offset?"offset "+this.formatter.parameter(this.single.offset):""},del:function(){var t=this.tableName,e=this.where();return"delete from "+t+(e?" "+e:"")},truncate:function(){return"truncate "+this.tableName},lock:function(){if(this.single.lock){if(this.client.transacting)return this[this.single.lock]();o.warn('You are attempting to perform a "lock" command outside of a transaction.')}},counter:function p(){var p=this.single.counter,t={};return t[p.column]=this.client.raw(this.formatter.wrap(p.column)+" "+(p.symbol||"+")+" "+p.amount),this.single.update=t,this.update()},whereIn:function(t){return Array.isArray(t.column)?this.multiWhereIn(t):this.formatter.wrap(t.column)+" "+this._not(t,"in ")+this.wrap(this.formatter.parameterize(t.value))},multiWhereIn:function(t){var e=-1,n="("+this.formatter.columnize(t.column)+") ";for(n+=this._not(t,"in ")+"((";++e<t.value.length;)0!==e&&(n+="),("),n+=this.formatter.parameterize(t.value[e]);return n+"))"},whereNull:function(t){return this.formatter.wrap(t.column)+" is "+this._not(t,"null")},whereBasic:function(t){return this._not(t,"")+this.formatter.wrap(t.column)+" "+this.formatter.operator(t.operator)+" "+this.formatter.parameter(t.value)},whereExists:function(t){return this._not(t,"exists")+" ("+this.formatter.rawOrFn(t.value)+")"},whereWrapped:function(t){var e=this.formatter.rawOrFn(t.value,"where");return e&&this._not(t,"")+"("+e.slice(6)+")"||""},whereBetween:function(t){return this.formatter.wrap(t.column)+" "+this._not(t,"between")+" "+i.map(t.value,this.formatter.parameter,this.formatter).join(" and ")},whereRaw:function(t){return this.formatter.unwrapRaw(t.value)},wrap:function(t){return"("!==t.charAt(0)?"("+t+")":t},_not:function(t,e){return t.not?"not "+e:e},_prepInsert:function(t){var e=this.formatter.rawOrFn(t);if(e)return e;var n=[],r=[];Array.isArray(t)||(t=t?[t]:[]);for(var i=-1;++i<t.length&&null!=t[i];){0===i&&(n=Object.keys(t[i]).sort());for(var o=new Array(n.length),s=Object.keys(t[i]),a=-1;++a<s.length;){var u=s[a],c=n.indexOf(u);if(c===-1){n=n.concat(u).sort(),c=n.indexOf(u);for(var l=-1;++l<r.length;)r[l].splice(c,0,void 0);o.splice(c,0,void 0)}o[c]=t[i][u]}r.push(o)}return{columns:n,values:r}},_prepUpdate:function(t){t=i.omit(t,i.isUndefined);for(var e=[],n=Object.keys(t).sort(),r=-1;++r<n.length;)e.push(this.formatter.wrap(n[r])+" = "+this.formatter.parameter(t[n[r]]));return e},_groupsOrders:function(t){var e=this.grouped[t];if(!e)return"";var n=this.formatter,r=e.map(function(e){return(e.value instanceof s?n.unwrapRaw(e.value):n.columnize(e.value))+("order"===t&&"orderByRaw"!==e.type?" "+n.direction(e.direction):"")});return r.length?t+" by "+r.join(", "):""}}),r.prototype.first=r.prototype.select,Object.defineProperty(r.prototype,"tableName",{get:function(){if(!this._tableName){var t=this.single.table,e=this.single.schema;t&&e&&(t=e+"."+t),this._tableName=t?this.formatter.wrap(t):""}return this._tableName}}),e.exports=r},{"../helpers":66,"../raw":75,lodash:107,"lodash/collection/reduce":105,"lodash/object/assign":170}],72:[function(t,e,n){"use strict";function r(t,e,n){this.schema=n,this.table=t,this.joinType=e,this.and=this,this.clauses=[]}var i=t("lodash/object/assign");i(r.prototype,{grouping:"join",on:function(t,e,n){var r,i=this._bool();switch(arguments.length){case 1:if("object"==typeof t&&"function"!=typeof t.toSQL){for(var o=-1,s=Object.keys(t),a="or"===i?"orOn":"on";++o<s.length;)this[a](s[o],t[s[o]]);return this}r=[i,"on",t];break;case 2:r=[i,"on",t,"=",e];break;default:r=[i,"on",t,e,n]}return this.clauses.push(r),this},using:function(t){return this.clauses.push([this._bool(),"using",t])},andOn:function(){return this.on.apply(this,arguments)},orOn:function(t,e,n){return this._bool("or").on.apply(this,arguments)},type:function(t){return this.joinType=t,this},_bool:function(t){if(1===arguments.length)return this._boolFlag=t,this;var e=this._boolFlag||"and";return this._boolFlag="and",e}}),Object.defineProperty(r.prototype,"or",{get:function(){return this._bool("or")}}),e.exports=r},{"lodash/object/assign":170}],73:[function(t,e,n){"use strict";e.exports=["select","as","columns","column","from","fromJS","into","withSchema","table","distinct","join","joinRaw","innerJoin","leftJoin","leftOuterJoin","rightJoin","rightOuterJoin","outerJoin","fullOuterJoin","crossJoin","where","andWhere","orWhere","whereNot","orWhereNot","whereRaw","whereWrapped","havingWrapped","orWhereRaw","whereExists","orWhereExists","whereNotExists","orWhereNotExists","whereIn","orWhereIn","whereNotIn","orWhereNotIn","whereNull","orWhereNull","whereNotNull","orWhereNotNull","whereBetween","whereNotBetween","orWhereBetween","orWhereNotBetween","groupBy","groupByRaw","orderBy","orderByRaw","union","unionAll","having","havingRaw","orHaving","orHavingRaw","offset","limit","count","countDistinct","min","max","sum","sumDistinct","avg","avgDistinct","increment","decrement","first","debug","pluck","insert","update","returning","del","delete","truncate","transacting","connection"]},{}],74:[function(t,e,n){(function(e){"use strict";function r(t,e){for(t=t.toString();t.length<e;)t="0"+t;return t}function i(t){if("Z"===t)return 0;var e=t.match(/([\+\-\s])(\d\d):?(\d\d)?/);return!!e&&("-"===e[1]?-1:1)*(parseInt(e[2],10)+(e[3]?parseInt(e[3],10):0)/60)*60}var o=n,s=t("../helpers");o.escape=function(n,r){var i=t("../raw");if(null===n||void 0===n)return"NULL";switch(typeof n){case"boolean":return n?"true":"false";case"number":return n+""}if(n instanceof Date&&(n=o.dateToString(n,r||"local")),e.isBuffer(n))return o.bufferToString(n);if(Array.isArray(n))return o.arrayToList(n,r);if(n instanceof i)return n;if("object"==typeof n)try{n=JSON.stringify(n)}catch(a){s.warn(a),n+=""}return n=n.replace(/(\\\?)|[\0\n\r\b\t\\\'\x1a]/g,function(t){switch(t){case"\0":return"\\0";case"\n":return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"\t":return"\\t";case"":return"\\Z";case"\\?":return"?";case"'":return"''";default:return"\\"+t}}),"'"+n+"'"},o.arrayToList=function(t,e){var n=this;return t.map(function(t){return Array.isArray(t)?"("+o.arrayToList(t,e)+")":n.escape(t,e)}).join(", ")},o.format=function(t,e,n){var r=this;e=null==e?[]:[].concat(e);var i=0;return t.replace(/\\?\?/g,function(t){if("\\?"===t)return t;if(i===e.length)return t;var o=e[i++];return r.escape(o,n)}).replace("\\?","?")},o.dateToString=function(t,e){var n=new Date(t);if("local"!==e){var o=i(e);n.setTime(n.getTime()+6e4*n.getTimezoneOffset()),o!==!1&&n.setTime(n.getTime()+6e4*o)}var s=n.getFullYear(),a=r(n.getMonth()+1,2),u=r(n.getDate(),2),c=r(n.getHours(),2),l=r(n.getMinutes(),2),f=r(n.getSeconds(),2),h=r(n.getMilliseconds(),3);return s+"-"+a+"-"+u+" "+c+":"+l+":"+f+"."+h},o.bufferToString=function(t){return"X'"+t.toString("hex")+"'"}}).call(this,{isBuffer:t("../../../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":27,"../helpers":66,"../raw":75}],75:[function(t,e,n){"use strict";function r(t){this.client=t,this.sql="",this.bindings=[],this._cached=void 0,this._wrappedBefore=void 0,this._wrappedAfter=void 0,this._debug=t&&t.config&&t.config.debug}function i(t){var e=t.bindings.length,n=t.bindings,r=t.client,i=0,o=[],s=t.sql.replace(/\\?\?\??/g,function(t){if("\\?"===t)return t;var e=n[i++];if(e&&"function"==typeof e.toSQL){var s=e.toSQL();return void 0!==s.bindings&&(o=o.concat(s.bindings)),s.sql}return"??"===t?r.formatter().columnize(e):(o.push(e),"?")});if(e!==i)throw new Error("Expected "+e+" bindings, saw "+i);return{method:"raw",sql:s,bindings:o}}function o(t){var e=t.bindings,n=t.client,r=t.sql,i=[],o=new RegExp("(^|\\s)(\\:\\w+\\:?)","g");return r=t.sql.replace(o,function(t){var r=t.trim(),o=":"===r[r.length-1],s=o?e[r.slice(1,-1)]:e[r.slice(1)];if(void 0===s)return"";if(s&&"function"==typeof s.toSQL){var a=s.toSQL();return void 0!==a.bindings&&(i=i.concat(a.bindings)),t.replace(r,a.sql)}return o?t.replace(r,n.formatter().columnize(s)):(i.push(s),t.replace(r,"?"))}),{method:"raw",sql:r,bindings:i}}var s=t("inherits"),a=t("events").EventEmitter,u=t("lodash/object/assign"),c=t("lodash/collection/reduce"),l=t("lodash/lang/isPlainObject"),f=t("lodash");s(r,a),u(r.prototype,{set:function(t,e){return this._cached=void 0,this.sql=t,this.bindings=f.isObject(e)||f.isUndefined(e)?e:[e],this},wrap:function(t,e){return this._cached=void 0,this._wrappedBefore=t,this._wrappedAfter=e,this},toString:function(){return this.toQuery()},toSQL:function(){return this._cached?this._cached:(Array.isArray(this.bindings)?this._cached=i(this):this.bindings&&l(this.bindings)?this._cached=o(this):this._cached={method:"raw",sql:this.sql,bindings:this.bindings},this._wrappedBefore&&(this._cached.sql=this._wrappedBefore+this._cached.sql),this._wrappedAfter&&(this._cached.sql=this._cached.sql+this._wrappedAfter),this._cached.options=c(this._options,u,{}),this._cached)}}),t("./interface")(r),e.exports=r},{"./interface":68,events:25,inherits:101,lodash:107,"lodash/collection/reduce":105,"lodash/lang/isPlainObject":167,"lodash/object/assign":170}],76:[function(t,e,n){"use strict";function r(t,e){this.client=t,this.builder=e,this.queries=[],this.connection=void 0}var i,o=t("lodash"),s=t("./promise"),a=t("lodash/object/assign");a(r.prototype,{run:function(){var t=this;return s.using(this.ensureConnection(),function(e){t.connection=e,t.client.emit("start",t.builder),t.builder.emit("start",t.builder);var n=t.builder.toSQL();return t.builder._debug&&console.log(n),o.isArray(n)?t.queryArray(n):t.query(n)})["catch"](function(e){throw t.builder._events&&t.builder._events.error&&t.builder.emit("error",e),e}).tap(function(){t.builder.emit("end")})},stream:function u(e,n){1===arguments.length&&"function"==typeof e&&(n=e,e={});var r="function"==typeof n;i=i||t("readable-stream").PassThrough;var a=this,u=new i({objectMode:!0}),c=s.using(this.ensureConnection(),function(t){a.connection=t;var n=a.builder.toSQL(),i=new Error("The stream may only be used with a single query statement.");if(o.isArray(n)){if(r)throw i;u.emit("error",i)}return a.client.stream(a.connection,n,u,e)});return r?(n(u),c):u},pipe:function(t,e){return this.stream(e).pipe(t)},query:s.method(function(t){this.builder.emit("query",a({__knexUid:this.connection.__knexUid},t));var e=this;return this.client.query(this.connection,t).then(function(t){return e.client.processResponse(t,e)})}),queryArray:function(t){return 1===t.length?this.query(t[0]):s.bind(this)["return"](t).reduce(function(t,e){return this.query(e).then(function(e){return t.push(e),t})},[])},ensureConnection:function(){var t=this,e=t.client.config.acquireConnectionTimeout||6e4;return s["try"](function(){return t.connection||new s(function(n,r){t.client.acquireConnection().timeout(e).then(n)["catch"](s.TimeoutError,function(e){var n=new Error("Knex: Timeout acquiring a connection. The pool is probably full. Are you missing a .transacting(trx) call?"),i={timeoutStack:e.stack};t.builder&&(i.sql=t.builder.sql,i.bindings=t.builder.bindings),a(n,i),r(n)})["catch"](r)})}).disposer(function(){t.connection.__knex__disposed||t.client.releaseConnection(t.connection)})}}),e.exports=r},{"./promise":69,lodash:107,"lodash/object/assign":170,"readable-stream":187}],77:[function(t,e,n){"use strict";function r(t){this.client=t,this._sequence=[],this._debug=t.config&&t.config.debug}var i=t("lodash"),o=t("inherits"),s=t("events").EventEmitter;o(r,s),i.each(["createTable","createTableIfNotExists","createSchema","createSchemaIfNotExists","dropSchema","dropSchemaIfExists","createExtension","createExtensionIfNotExists","dropExtension","dropExtensionIfExists","table","alterTable","hasTable","hasColumn","dropTable","renameTable","dropTableIfExists","raw"],function(t){r.prototype[t]=function(){return"table"===t&&(t="alterTable"),this._sequence.push({method:t,args:i.toArray(arguments)}),this}}),t("../interface")(r),r.prototype.withSchema=function(t){return this._schema=t,this},r.prototype.toString=function(){return this.toQuery()},r.prototype.toSQL=function(){return this.client.schemaCompiler(this).toSQL()},e.exports=r},{"../interface":68,events:25,inherits:101,lodash:107}],78:[function(t,e,n){"use strict";function r(t,e,n,r){this.client=t,this._single={},this._modifiers={},this._statements=[],this._type=u[n]||n,this._args=r,this._tableBuilder=e,"alter"===e._method&&i.extend(this,s)}var i=t("lodash"),o=["default","defaultsTo","defaultTo","unsigned","nullable","notNull","notNullable","first","after","comment"];i.each(o,function(t){r.prototype[t]=function(){return a[t]&&(t=a[t]),"notNullable"===t?this.nullable(!1):(this._modifiers[t]=i.toArray(arguments),this)}}),i.each(["index","primary","unique"],function(t){r.prototype[t]=function(){return this._type.toLowerCase().indexOf("increments")===-1&&this._tableBuilder[t].apply(this._tableBuilder,[this._args[0]].concat(i.toArray(arguments))),this}}),r.prototype.references=function(t){return this._tableBuilder.foreign.call(this._tableBuilder,this._args[0],this)._columnBuilder(this).references(t)};var s={};s.drop=function(){return this._single.drop=!0,this},s.alterType=function(t){return this._statements.push({grouping:"alterType",value:t}),this};var a={"default":"defaultTo",defaultsTo:"defaultTo",notNull:"notNullable"},u={"float":"floating","enum":"enu","boolean":"bool",string:"varchar",bigint:"bigInteger"};e.exports=r},{lodash:107}],79:[function(t,e,n){"use strict";function r(t,e,n){this.client=t,this.tableCompiler=e,this.columnBuilder=n,this.args=n._args,this.type=n._type.toLowerCase(),this.grouped=i.groupBy(n._statements,"grouping"),this.modified=n._modifiers,this.isIncrements=this.type.indexOf("increments")!==-1,this.formatter=t.formatter(),this.sequence=[]}var i=t("lodash"),o=t("../raw"),s=t("./helpers");r.prototype.pushQuery=s.pushQuery,r.prototype.pushAdditional=s.pushAdditional,r.prototype.toSQL=function(){return this.pushQuery(this.compileColumn()),this.sequence.additional&&(this.sequence=this.sequence.concat(this.sequence.additional)),this.sequence},r.prototype.compileColumn=function(){return this.formatter.wrap(this.getColumnName())+" "+this.getColumnType()+this.getModifiers()},r.prototype.getColumnName=function(){var t=i.first(this.args);if(t)return t;if(this.isIncrements)return"id";throw new Error("You did not specify a column name for the "+this.type+"column.")},r.prototype.getColumnType=function(){var t=this[this.type];return"function"==typeof t?t.apply(this,i.rest(this.args)):t},r.prototype.getModifiers=function(){var t=[];if(this.type.indexOf("increments")===-1)for(var e=0,n=this.modifiers.length;e<n;e++){var r=this.modifiers[e];if(i.has(this.modified,r)){var o=this[r].apply(this,this.modified[r]);o&&t.push(o)}}return t.length>0?" "+t.join(" "):""},r.prototype.increments="integer not null primary key autoincrement",r.prototype.bigincrements="integer not null primary key autoincrement",r.prototype.integer=r.prototype.smallint=r.prototype.mediumint="integer",r.prototype.biginteger="bigint",r.prototype.varchar=function(t){return"varchar("+this._num(t,255)+")"},r.prototype.text="text",r.prototype.tinyint="tinyint",r.prototype.floating=function(t,e){return"float("+this._num(t,8)+", "+this._num(e,2)+")"},r.prototype.decimal=function(t,e){return"decimal("+this._num(t,8)+", "+this._num(e,2)+")"},r.prototype.binary="blob",r.prototype.bool="boolean",r.prototype.date="date",r.prototype.datetime="datetime",r.prototype.time="time",r.prototype.timestamp="timestamp",r.prototype.enu="varchar",r.prototype.bit=r.prototype.json="text",r.prototype.uuid="char(36)",r.prototype.specifictype=function(t){return t},r.prototype.nullable=function(t){return t===!1?"not null":"null"},r.prototype.notNullable=function(){return this.nullable(!1)},r.prototype.defaultTo=function(t){if(void 0===t)return"";if(null===t)t="null";else if(t instanceof o)t=t.toQuery();else if("bool"===this.type)"false"===t&&(t=0),t="'"+(t?1:0)+"'";else{if("json"===this.type&&i.isObject(t))return JSON.stringify(t);t="'"+t+"'"}return"default "+t},r.prototype._num=function(t,e){if(void 0===t||null===t)return e;var n=parseInt(t,10);return isNaN(n)?e:n},e.exports=r},{"../raw":75,"./helpers":81,lodash:107}],80:[function(t,e,n){"use strict";function r(t,e){this.builder=e,this.client=t,this.schema=e._schema,this.formatter=t.formatter(),this.sequence=[]}function i(t){return function(e,n){var r,i=this.client.tableBuilder(t,e,n);i.setSchema(this.schema),r=i.toSQL();for(var o=0,s=r.length;o<s;o++)this.sequence.push(r[o])}}function o(t,e){return t?t+"."+e:e}var s=t("./helpers"),a=t("lodash/object/assign");a(r.prototype,{pushQuery:s.pushQuery,pushAdditional:s.pushAdditional,createTable:i("create"),createTableIfNotExists:i("createIfNot"),alterTable:i("alter"),dropTablePrefix:"drop table ",dropTable:function(t){this.pushQuery(this.dropTablePrefix+this.formatter.wrap(o(this.schema,t)))},dropTableIfExists:function(t){this.pushQuery(this.dropTablePrefix+"if exists "+this.formatter.wrap(o(this.schema,t)))},raw:function(t,e){this.sequence.push(this.client.raw(t,e).toSQL())},toSQL:function(){for(var t=this.builder._sequence,e=0,n=t.length;e<n;e++){var r=t[e];this[r.method].apply(this,r.args)}return this.sequence}}),e.exports=r},{"./helpers":81,"lodash/object/assign":170}],81:[function(t,e,n){"use strict";var r=t("lodash");n.pushQuery=function(t){t&&(t=r.isString(t)?{sql:t}:t,t.bindings||(t.bindings=this.formatter.bindings),this.sequence.push(t),this.formatter=this.client.formatter())},n.pushAdditional=function(t){var e=new this.constructor(this.client,this.tableCompiler,this.columnBuilder);t.call(e,r.rest(arguments)),this.sequence.additional=(this.sequence.additional||[]).concat(e.sequence)}},{lodash:107}],82:[function(t,e,n){"use strict";function r(t,e,n,r){this.client=t,this._fn=r,this._method=e,this._schemaName=void 0,this._tableName=n,this._statements=[],this._single={}}var i=t("lodash"),o=t("../helpers");r.prototype.setSchema=function(t){this._schemaName=t},r.prototype.toSQL=function(){return"alter"===this._method&&i.extend(this,u),this._fn.call(this,this),this.client.tableCompiler(this).toSQL()},i.each(["index","primary","unique","dropPrimary","dropUnique","dropIndex","dropForeign"],function(t){r.prototype[t]=function(){return this._statements.push({grouping:"alterTable",method:t,args:i.toArray(arguments)}),this}});var s=["engine","charset","collate"];i.each(s,function(t){r.prototype[t]=function(e){"alter"===this._method&&o.warn("Knex does not support altering the "+t+" outside of the create table, please use knex.raw statement."),this._single[t]=e}});var a=["tinyint","smallint","mediumint","int","bigint","decimal","float","double","real","bit","boolean","serial","date","datetime","timestamp","time","year","char","varchar","tinytext","tinyText","text","mediumtext","mediumText","longtext","longText","binary","varbinary","tinyblob","tinyBlob","mediumblob","mediumBlob","blob","longblob","longBlob","enum","set","bool","dateTime","increments","bigincrements","bigIncrements","integer","biginteger","bigInteger","string","timestamps","json","jsonb","uuid","enu","specificType"];i.each(a,function(t){r.prototype[t]=function(){var e=i.toArray(arguments);if("timestamps"===t)return void(e[0]===!0?(this.timestamp("created_at"),this.timestamp("updated_at")):(this.datetime("created_at"),this.datetime("updated_at")));var n=this.client.columnBuilder(this,t,e);return this._statements.push({grouping:"columns",builder:n}),n}}),r.prototype.comment=function(t){this._single.comment=t},r.prototype.foreign=function(t){var e={column:t};this._statements.push({grouping:"alterTable",method:"foreign",args:[e]});var n={references:function(t){var r;return i.isString(t)&&(r=t.split(".")),r&&1!==r.length?(e.inTable=r[0],e.references=r[1],n):(e.references=r?r[0]:t,{on:function(t){return e.inTable=t,n},inTable:function(){return this.on.apply(this,arguments)}})},onUpdate:function(t){return e.onUpdate=t,n},onDelete:function(t){return e.onDelete=t,n},_columnBuilder:function(t){return i.extend(t,n),n=t,t}};return n};var u={renameColumn:function(t,e){return this._statements.push({grouping:"alterTable",method:"renameColumn",args:[t,e]}),this},dropTimestamps:function(){return this.dropColumns(["created_at","updated_at"])}};u.dropColumn=u.dropColumns=function(){return this._statements.push({grouping:"alterTable",method:"dropColumn",args:i.toArray(arguments)}),this},e.exports=r},{"../helpers":66,lodash:107}],83:[function(t,e,n){"use strict";function r(t,e){this.client=t,this.method=e._method,this.schemaNameRaw=e._schemaName,this.tableNameRaw=e._tableName,this.single=e._single,this.grouped=i.groupBy(e._statements,"grouping"),this.formatter=t.formatter(),this.sequence=[],this._formatting=t.config&&t.config.formatting}var i=t("lodash"),o=t("./helpers"),s=t("../helpers").normalizeArr;r.prototype.pushQuery=o.pushQuery,r.prototype.pushAdditional=o.pushAdditional,r.prototype.toSQL=function(){return this[this.method](),this.sequence},r.prototype.lowerCase=!0,r.prototype.createAlterTableMethods=null,r.prototype.create=function(t){var e=this.getColumns(),n=this.getColumnTypes(e);this.createAlterTableMethods&&this.alterTableForCreate(n),this.createQuery(n,t),this.columnQueries(e),delete this.single.comment,this.alterTable()},r.prototype.createIfNot=function(){this.create(!0)},r.prototype.alter=function(){var t=this.getColumns(),e=this.getColumnTypes(t);this.addColumns(e),this.columnQueries(t),this.alterTable()},r.prototype.foreign=function(t){if(t.inTable&&t.references){var e=this._indexCommand("foreign",this.tableNameRaw,t.column),n=this.formatter.columnize(t.column),r=this.formatter.columnize(t.references),i=this.formatter.wrap(t.inTable),o=t.onUpdate?(this.lowerCase?" on update ":" ON UPDATE ")+t.onUpdate:"",s=t.onDelete?(this.lowerCase?" on delete ":" ON DELETE ")+t.onDelete:"";this.lowerCase?this.pushQuery((this.forCreate?"":"alter table "+this.tableName()+" add ")+"constraint "+e+" foreign key ("+n+") references "+i+" ("+r+")"+o+s):this.pushQuery((this.forCreate?"":"ALTER TABLE "+this.tableName()+" ADD ")+"CONSTRAINT "+e+" FOREIGN KEY ("+n+") REFERENCES "+i+" ("+r+")"+o+s)}},r.prototype.getColumnTypes=function(t){return i.reduce(i.map(t,i.first),function(t,e){return t.sql.push(e.sql),t.bindings.concat(e.bindings),t},{sql:[],bindings:[]})},r.prototype.columnQueries=function(t){for(var e=i.reduce(i.map(t,i.rest),function(t,e){return i.isEmpty(e)?t:t.concat(e)},[]),n=0,r=e.length;n<r;n++)this.pushQuery(e[n])},r.prototype.addColumnsPrefix="add column ",r.prototype.addColumns=function(t){if(t.sql.length>0){var e=i.map(t.sql,function(t){return this.addColumnsPrefix+t},this);this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+e.join(", "),bindings:t.bindings})}},r.prototype.getColumns=function(){for(var t=-1,e=[],n=this.grouped.columns||[];++t<n.length;)e.push(this.client.columnCompiler(this,n[t].builder).toSQL());return e},r.prototype.tableName=function(){var t=this.schemaNameRaw?this.schemaNameRaw+"."+this.tableNameRaw:this.tableNameRaw;return this.formatter.wrap(t)},r.prototype.alterTable=function(){for(var t=this.grouped.alterTable||[],e=0,n=t.length;e<n;e++){var r=t[e];this[r.method]?this[r.method].apply(this,r.args):console.error("Debug: "+r.method+" does not exist")}for(var i in this.single)"function"==typeof this[i]&&this[i](this.single[i])},r.prototype.alterTableForCreate=function(t){this.forCreate=!0;var e=this.sequence,n=this.grouped.alterTable||[];this.grouped.alterTable=[];for(var r=0,o=n.length;r<o;r++){var s=n[r];i.indexOf(this.createAlterTableMethods,s.method)<0?this.grouped.alterTable.push(s):this[s.method]?(this.sequence=[],this[s.method].apply(this,s.args),t.sql.push(this.sequence[0].sql)):console.error("Debug: "+s.method+" does not exist")}this.sequence=e,this.forCreate=!1},r.prototype.dropIndex=function(t){this.pushQuery("drop index"+t)},r.prototype.dropUnique=r.prototype.dropForeign=function(){throw new Error("Method implemented in the dialect driver")},r.prototype.dropColumnPrefix="drop column ",r.prototype.dropColumn=function(){var t=s.apply(null,arguments),e=i.map(i.isArray(t)?t:[t],function(t){return this.dropColumnPrefix+this.formatter.wrap(t)},this);this.pushQuery((this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+e.join(", "))},r.prototype._indexCommand=function(t,e,n){i.isArray(n)||(n=n?[n]:[]);var r=e.replace(/\.|-/g,"_");return(r+"_"+n.join("_")+"_"+t).toLowerCase()},e.exports=r},{"../helpers":66,"./helpers":81,lodash:107}],84:[function(t,e,n){"use strict";function r(t,e,n,r){var s=this,u=this.txid=h("trx");this.client=t,this.outerTx=r,this.trxClient=void 0,this._debug=t.config&&t.config.debug,p("%s: Starting %s transaction",u,r?"nested":"top level"),this._promise=a.using(this.acquireConnection(t,n,u),function(n){var r=s.trxClient=o(s,t,n),u=t.transacting?s.savepoint(n):s.begin(n);return u.then(function(){return i(s,n,r)}).then(function(t){var n=e(t);n&&n.then&&"function"==typeof n.then&&n.then(function(e){t.commit(e)})["catch"](function(e){t.rollback(e)})})["catch"](function(t){return s._rejecter(t)}),new a(function(t,e){s._resolver=t,s._rejecter=e})}),this._completed=!1,this._childQueue=[],this._queue=this._queue||a.resolve(!0),r&&(r._childQueue.length>0&&(this._queue=this._queue.then(function(){return a.settle(r._childQueue[r._childQueue.length-1])})),r._childQueue.push(this._promise))}function i(t,e,n){var r=l(n);return r.transaction=function(e,r){return new n.Transaction(n,e,r,t)},r.savepoint=function(t,e){return r.transaction(t,e)},t.client.transacting?(r.commit=function(n){return t.release(e,n)},r.rollback=function(n){return t.rollbackTo(e,n)}):(r.commit=function(n){return t.commit(e,n)},r.rollback=function(n){return t.rollback(e,n)}),r}function o(t,e,n){var r=Object.create(e.constructor.prototype);r.config=e.config,r.driver=e.driver,r.connectionSettings=e.connectionSettings,r.transacting=!0,r.on("query",function(n){t.emit("query",n),e.emit("query",n)}),r.on("query-error",function(n,r){t.emit("query-error",n,r),e.emit("query-error",n,r)});var i=r.query;r.query=function(e,o){var u=t.isCompleted();return a["try"](function(){if(e!==n)throw new Error("Invalid connection for transaction query.");return u&&s(t,o),i.call(r,e,o)})};var o=r.stream;return r.stream=function(e,i,u,c){var l=t.isCompleted();return a["try"](function(){if(e!==n)throw new Error("Invalid connection for transaction query.");return l&&s(t,i),o.call(r,e,i,u,c)})},r.acquireConnection=function(){return t._queue.then(function(){return n})},r.releaseConnection=function(){return a.resolve()},r}function s(t,e){var n="string"==typeof e?e:e&&e.sql;throw p("%s: Transaction completed: %s",t.id,n),new Error("Transaction query already complete, run with DEBUG=knex:tx for more info")}var a=t("./promise"),u=t("events").EventEmitter,c=t("inherits"),l=t("./util/make-knex"),f=t("lodash/object/assign"),h=t("lodash/utility/uniqueId"),p=t("debug")("knex:tx");c(r,u),f(r.prototype,{isCompleted:function(){return this._completed||this.outerTx&&this.outerTx.isCompleted()||!1},begin:function(t){return this.query(t,"BEGIN;")},savepoint:function(t){return this.query(t,"SAVEPOINT "+this.txid+";")},commit:function(t,e){return this.query(t,"COMMIT;",1,e)},release:function(t,e){return this.query(t,"RELEASE SAVEPOINT "+this.txid+";",1,e)},rollback:function(t,e){return this.query(t,"ROLLBACK;",2,e)},rollbackTo:function(t,e){return this.query(t,"ROLLBACK TO SAVEPOINT "+this.txid,2,e)},query:function(t,e,n,r){var i=this,o=this.trxClient.query(t,e)["catch"](function(t){n=2,r=t,i._completed=!0,p("%s error running transaction query",i.txid)}).tap(function(){1===n&&i._resolver(r),2===n&&i._rejecter(r)});return 1!==n&&2!==n||(this._completed=!0),o},debug:function(t){return this._debug=!arguments.length||t,this},_skipping:function(t){return a.reject(new Error("Transaction "+this.txid+" has already been released skipping: "+t))},acquireConnection:function(t,e,n){var r=e&&e.connection;return a["try"](function(){return r||t.acquireConnection()}).disposer(function(e){r?p("%s: not releasing external connection",n):(p("%s: releasing connection",n),t.releaseConnection(e))})}});var d=["then","bind","catch","finally","asCallback","spread","map","reduce","tap","thenReturn","return","yield","ensure","nodeify","exec"];d.forEach(function(t){r.prototype[t]=function(){return this._promise=this._promise[t].apply(this._promise,arguments)}}),e.exports=r},{"./promise":69,"./util/make-knex":86,debug:98,events:25,inherits:101,"lodash/object/assign":170,"lodash/utility/uniqueId":177}],85:[function(t,e,n){"use strict";var r=t("lodash/object/assign"),i=t("inherits");e.exports=function(t){function e(e){t.call(this,e)}function n(t){n.super_.call(this,t)}function o(t){o.super_.call(this,t)}function s(t){s.super_.call(this,t)}function a(t,e){a.super_.call(this,t,e)}function u(t,e,n,r){u.super_.call(this,t,e,n,r)}function c(t,e){c.super_.call(this,t,e)}function l(t,e,n,r){l.super_.call(this,t,e,n,r)}function f(t,e,n){f.super_.call(this,t,e,n)}if("undefined"==typeof t.prototype)throw new Error("A valid parent client must be passed to makeClient");return i(e,t),i(n,t.prototype.Formatter),i(o,t.prototype.QueryBuilder),i(s,t.prototype.SchemaBuilder),i(a,t.prototype.SchemaCompiler),i(u,t.prototype.TableBuilder),i(c,t.prototype.TableCompiler),i(l,t.prototype.ColumnBuilder),i(f,t.prototype.ColumnCompiler),r(e.prototype,{Formatter:n,QueryBuilder:o,SchemaBuilder:s,SchemaCompiler:a,TableBuilder:u,TableCompiler:c,ColumnBuilder:l,ColumnCompiler:f}),e}},{inherits:101,"lodash/object/assign":170}],86:[function(t,e,n){"use strict";var r=t("events").EventEmitter,i=t("lodash/object/assign"),o=t("../migrate"),s=t("../seed"),a=t("../functionhelper"),u=t("../query/methods"),c=t("../helpers"),l=t("../promise"),f=t("lodash");e.exports=function h(e){function n(t){var e=n.queryBuilder();return t||c.warn("calling knex without a tableName is deprecated. Use knex.queryBuilder() instead."),t?e.table(t):e}i(n,{Promise:t("../promise"),queryBuilder:function(){return e.queryBuilder()},raw:function(){return e.raw.apply(e,arguments)},batchInsert:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?1e3:arguments[2];if(!f.isNumber(n)||n<1)throw new TypeError("Invalid chunkSize: "+n);return this.transaction(function(r){return 1!==n&&(e=f.chunk(e,n)),l.all(e.map(function(e){return r(t).insert(e)}))})},transaction:function(t,n){return e.transaction(t,n)},initialize:function(t){return e.initialize(t)},destroy:function(t){return e.destroy(t)}}),n.VERSION=n.__knex__="0.10.0";var p=new r;for(var d in p)n[d]=p[d];return u.forEach(function(t){n[t]=function(){var e=n.queryBuilder();return e[t].apply(e,arguments)}}),n.client=e,Object.defineProperties(n,{schema:{get:function(){return e.schemaBuilder()}},migrate:{get:function(){return new o(n)}},seed:{get:function(){return new s(n)}},fn:{get:function(){return new a(e)}}}),e.on("start",function(t){n.emit("start",t)}),e.on("query",function(t){n.emit("query",t)}),e.on("query-error",function(t,e){n.emit("query-error",t,e)}),e.makeKnex=function(t){return h(t)},n}},{"../functionhelper":65,"../helpers":66,"../migrate":87,"../promise":69,"../query/methods":73,"../seed":87,events:25,lodash:107,"lodash/object/assign":170}],87:[function(t,e,n){"use strict";e.exports=function(){}},{}],88:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=a["default"].parse(t),n=e.protocol;return n&&0===n.indexOf("maria")&&(n="maria"),null===n?{client:"sqlite3",connection:{filename:t}}:(":"===n.slice(-1)&&(n=n.slice(0,-1)),{client:n,connection:"postgres"===n?(0,u.parse)(t):o(e)})}function o(t){var e={},n=t.pathname;if("/"===n[0]&&(n=n.slice(1)),0===t.protocol.indexOf("maria")?e.db=n:e.database=n,t.hostname&&(e.host=t.hostname),
t.port&&(e.port=t.port),t.auth){var r=t.auth.indexOf(":");r!==-1&&(e.user=t.auth.slice(0,r),r<t.auth.length-1&&(e.password=t.auth.slice(r+1)))}return e}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i;var s=t("url"),a=r(s),u=t("pg-connection-string");e.exports=n["default"]},{"pg-connection-string":178,url:50}],89:[function(t,e,n){(function(t,r){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof r?i=r:"undefined"!=typeof self&&(i=self),i.Promise=t()}}(function(){var e,n,i;return function o(t,e,n){function r(s,a){if(!e[s]){if(!t[s]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return r(n?n:e)},l,l.exports,o,t,e,n)}return e[s].exports}for(var i="function"==typeof _dereq_&&_dereq_,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(t,e,n){"use strict";function r(){this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c.isStatic?c(this.drainQueues):c}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(u){a=u}var c=t("./schedule.js"),l=t("./queue.js"),f=t("./util.js");r.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,this._schedule=function(t){setTimeout(t,0)})},r.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(n){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},f.hasDevTools?(c.isStatic&&(c=function(t){setTimeout(t,0)}),r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=new r,e.exports.firstLineError=a},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=function(t,e){this._reject(e)},i=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(r,r,null,this,t)},o=function(t,e){this._isPending()&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(r){var a=n(r),u=new t(e);u._propagateFrom(this,1);var c=this._target();if(u._setBoundTo(a),a instanceof t){var l={promiseRejectionQueued:!1,promise:u,target:c,bindingPromise:a};c._then(e,i,u._progress,u,l),a._then(o,s,u._progress,u,l)}else u._resolveCallback(c);return u},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=131072|this._bitField,this._boundTo=t):this._bitField=this._bitField&-131073},t.prototype._isBound=function(){return 131072===(131072&this._bitField)},t.bind=function(r,i){var o=n(r),s=new t(e);return s._setBoundTo(o),o instanceof t?o._then(function(){s._resolveCallback(i)},s._reject,s._progress,s,null):s._resolveCallback(i),s}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise.js")();o.noConflict=r,e.exports=o},{"./promise.js":23}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+a.classString(t)+" has no method '"+a.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var s,a=t("./util.js"),u=a.canEvaluate;a.isIdentifier;e.prototype.call=function(t){for(var e=arguments.length,n=new Array(e-1),i=1;i<e;++i)n[i-1]=arguments[i];return n.push(t),this._then(r,void 0,void 0,n,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(u){var r=s(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util.js":38}],6:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./errors.js"),r=t("./async.js"),i=n.CancellationError;e.prototype._cancel=function(t){if(!this.isCancellable())return this;for(var e,n=this;void 0!==(e=n._cancellationParent)&&e.isCancellable();)n=e;this._unsetCancellable(),n._target()._rejectCallback(t,!1,!0)},e.prototype.cancel=function(t){return this.isCancellable()?(void 0===t&&(t=new i),r.invokeLater(this._cancel,this,t),this):this},e.prototype.cancellable=function(){return this._cancellable()?this:(r.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},e.prototype.uncancellable=function(){var t=this.then();return t._unsetCancellable(),t},e.prototype.fork=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);return r._setCancellable(),r._cancellationParent=void 0,r}}},{"./async.js":2,"./errors.js":13}],7:[function(e,n,r){"use strict";n.exports=function(){function n(t){this._parent=t;var e=this._length=1+(void 0===t?0:t._length);w(this,n),e>32&&this.uncycle()}function r(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function i(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function o(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],s=-1,a=r.length-1;a>=0;--a)if(r[a]===o){s=a;break}for(var a=s;a>=0;--a){var u=r[a];if(e[i]!==u)break;e.pop(),i--}e=r}}function s(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i=_.test(r)||"    (No stack trace)"===r,o=i&&v(r);i&&!o&&(y&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function a(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||_.test(r))break}return n>0&&(e=e.slice(n)),e}function u(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+c(e)+">, no stack trace)"}function c(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function l(t){var e=t.match(m);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}var f,h=e("./async.js"),p=e("./util.js"),d=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,_=null,g=null,y=!1;p.inherits(n,Error),n.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var s=e[r].stack,a=n[s];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var u=r>0?e[r-1]:this;a<t-1?(u._parent=e[a+1],u._parent.uncycle(),u._length=u._parent._length+1):(u._parent=void 0,u._length=1);for(var c=u._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},n.prototype.parent=function(){return this._parent},n.prototype.hasParent=function(){return void 0!==this._parent},n.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=n.parseStackAndMessage(t),a=e.message,u=[e.stack],c=this;void 0!==c;)u.push(s(c.stack.split("\n"))),c=c._parent;o(u),i(u),p.notEnumerableProp(t,"stack",r(a,u)),p.notEnumerableProp(t,"__stackCleaned__",!0)}},n.parseStackAndMessage=function(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?a(t):["    (No stack trace)"],{message:n,stack:s(e)}},n.formatAndLogError=function(t,e){if("undefined"!=typeof console){var n;if("object"==typeof t||"function"==typeof t){var r=t.stack;n=e+g(r,t)}else n=e+String(t);"function"==typeof f?f(n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}},n.unhandledRejection=function(t){n.formatAndLogError(t,"^--- With additional stack trace: ")},n.isSupported=function(){return"function"==typeof w},n.fireRejectionEvent=function(t,e,r,i){var o=!1;try{"function"==typeof e&&(o=!0,"rejectionHandled"===t?e(i):e(r,i))}catch(s){h.throwLater(s)}var a=!1;try{a=x(t,r,i)}catch(s){a=!0,h.throwLater(s)}var u=!1;if(b)try{u=b(t.toLowerCase(),{reason:r,promise:i})}catch(s){u=!0,h.throwLater(s)}a||o||u||"unhandledRejection"!==t||n.formatAndLogError(r,"Unhandled rejection ")};var v=function(){return!1},m=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;n.setBounds=function(t,e){if(n.isSupported()){for(var r,i,o=t.stack.split("\n"),s=e.stack.split("\n"),a=-1,u=-1,c=0;c<o.length;++c){var f=l(o[c]);if(f){r=f.fileName,a=f.line;break}}for(var c=0;c<s.length;++c){var f=l(s[c]);if(f){i=f.fileName,u=f.line;break}}a<0||u<0||!r||!i||r!==i||a>=u||(v=function(t){if(d.test(t))return!0;var e=l(t);return!!(e&&e.fileName===r&&a<=e.line&&e.line<=u)})}};var b,w=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():u(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,_=t,g=e;var n=Error.captureStackTrace;return v=function(t){return d.test(t)},function(t,e){Error.stackTraceLimit=Error.stackTraceLimit+6,n(t,e),Error.stackTraceLimit=Error.stackTraceLimit-6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return _=/@/,g=e,y=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(o){i="stack"in o}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(g=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?u(e):e.toString()},null):(_=t,g=e,function(t){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),x=function(){if(p.isNode)return function(e,n,r){return"rejectionHandled"===e?t.emit(e,r):t.emit(e,n,r)};var e=!1,n=!0;try{var r=new self.CustomEvent("test");e=r instanceof CustomEvent}catch(i){}if(!e)try{var o=document.createEvent("CustomEvent");o.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(o)}catch(i){n=!1}n&&(b=function(t,n){var r;return e?r=new self.CustomEvent(t,{detail:n,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(r=document.createEvent("CustomEvent"),r.initCustomEvent(t,!1,!0,n)),!!r&&!self.dispatchEvent(r)});var s={};return s.unhandledRejection="onunhandledRejection".toLowerCase(),s.rejectionHandled="onrejectionHandled".toLowerCase(),function(t,e,n){var r=s[t],i=self[r];return!!i&&("rejectionHandled"===t?i.call(self,n):i.call(self,e,n),!0)}}();return"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(f=function(t){console.warn(t)},p.isNode&&t.stderr.isTTY?f=function(e){t.stderr.write("[31m"+e+"[39m\n")}:p.isNode||"string"!=typeof(new Error).stack||(f=function(t){console.warn("%c"+t,"color: red")})),n}},{"./async.js":2,"./util.js":38}],8:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e,n){this._instances=t,this._callback=e,this._promise=n}function r(t,e){var n={},r=s(t).call(n,e);if(r===a)return r;var i=u(n);return i.length?(a.e=new c("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):r}var i=t("./util.js"),o=t("./errors.js"),s=i.tryCatch,a=i.errorObj,u=t("./es5.js").keys,c=o.TypeError;return n.prototype.doFilter=function(t){for(var n=this._callback,i=this._promise,o=i._boundValue(),u=0,c=this._instances.length;u<c;++u){var l=this._instances[u],f=l===Error||null!=l&&l.prototype instanceof Error;if(f&&t instanceof l){var h=s(n).call(o,t);return h===a?(e.e=h.e,e):h}if("function"==typeof l&&!f){var p=r(l,t);if(p===a){t=a.e;break}if(p){var h=s(n).call(o,t);return h===a?(e.e=h.e,e):h}}}return e.e=t,e},n}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(t,e,n){"use strict";e.exports=function(t,e,n){function r(){this._trace=new e(o())}function i(){if(n())return new r}function o(){var t=s.length-1;if(t>=0)return s[t]}var s=[];return r.prototype._pushContext=function(){n()&&void 0!==this._trace&&s.push(this._trace)},r.prototype._popContext=function(){n()&&void 0!==this._trace&&s.pop()},t.prototype._peekContext=o,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,i}},{}],10:[function(e,n,r){"use strict";n.exports=function(n,r){var i,o,s=n._getDomain,a=e("./async.js"),u=e("./errors.js").Warning,c=e("./util.js"),l=c.canAttachTrace,f=c.isNode&&(!!t.env.BLUEBIRD_DEBUG||"development"===t.env.NODE_ENV);return c.isNode&&0==t.env.BLUEBIRD_DEBUG&&(f=!1),f&&a.disableTrampolineIfNecessary(),n.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},n.prototype._ensurePossibleRejectionHandled=function(){0===(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),a.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){r.fireRejectionEvent("rejectionHandled",i,void 0,this)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),r.fireRejectionEvent("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-524289},n.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-2097153,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},n.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},n.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},n.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},n.prototype._captureStackTrace=function(){return f&&(this._trace=new r(this._peekContext())),this},n.prototype._attachExtraTrace=function(t,e){if(f&&l(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var i=r.parseStackAndMessage(t);c.notEnumerableProp(t,"stack",i.message+"\n"+i.stack.join("\n")),c.notEnumerableProp(t,"__stackCleaned__",!0)}}},n.prototype._warn=function(t){var e=new u(t),n=this._peekContext();if(n)n.attachExtraTrace(e);else{var i=r.parseStackAndMessage(e);e.stack=i.message+"\n"+i.stack.join("\n")}r.formatAndLogError(e,"")},n.onPossiblyUnhandledRejection=function(t){var e=s();o="function"==typeof t?null===e?t:e.bind(t):void 0},n.onUnhandledRejectionHandled=function(t){var e=s();i="function"==typeof t?null===e?t:e.bind(t):void 0},n.longStackTraces=function(){if(a.haveItemsQueued()&&f===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");f=r.isSupported(),f&&a.disableTrampolineIfNecessary()},n.hasLongStackTraces=function(){return f&&r.isSupported()},r.isSupported()||(n.longStackTraces=function(){},f=!1),function(){return f}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(t,e,n){"use strict";var r=t("./util.js"),i=r.isPrimitive;e.exports=function(t){var e=function(){return this},n=function(){throw this},r=function(){},o=function(){throw void 0},s=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(n){return void 0===n?this.then(r):i(n)?this._then(s(n,2),void 0,void 0,void 0,void 0):(n instanceof t&&n._ignoreRejections(),this._then(e,void 0,void 0,n,void 0))},t.prototype["throw"]=t.prototype.thenThrow=function(t){return void 0===t?this.then(o):i(t)?this._then(s(t,1),void 0,void 0,void 0,void 0):this._then(n,void 0,void 0,t,void 0)}}},{"./util.js":38}],12:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce;t.prototype.each=function(t){return n(this,t,null,e)},t.each=function(t,r){return n(t,r,null,e)}}},{}],13:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,s,a=t("./es5.js"),u=a.freeze,c=t("./util.js"),l=c.inherits,f=c.notEnumerableProp,h=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),_=r("AggregateError","aggregate error");try{o=TypeError,s=RangeError}catch(g){o=r("TypeError","type error"),s=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<y.length;++v)"function"==typeof Array.prototype[y[v]]&&(_.prototype[y[v]]=Array.prototype[y[v]]);a.defineProperty(_.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),_.prototype.isOperational=!0;var m=0;_.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},l(i,Error);var b=Error.__BluebirdErrorTypes__;b||(b=u({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:_}),f(Error,"__BluebirdErrorTypes__",b)),e.exports={Error:Error,TypeError:o,RangeError:s,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5.js":14,"./util.js":38}],14:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,a=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},c=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(e){return s}},h=function(t){try{return"[object Array]"===o.call(t)}catch(e){return!1}};e.exports={isArray:h,keys:a,names:a,defineProperty:c,getDescriptor:u,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],15:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function u(t,e,n){var r;return r=h(e)?n?s(e):a(e):n?i:o,t._then(r,p,void 0,e,void 0)}function c(t){var i=this.promise,o=this.handler,s=i._isBound()?o.call(i._boundValue()):o();if(void 0!==s){var a=r(s,i);if(a instanceof e)return a=a._target(),u(a,t,i.isFulfilled())}return i.isRejected()?(n.e=t,n):t}function l(t){var n=this.promise,i=this.handler,o=n._isBound()?i.call(n._boundValue(),t):i(t);if(void 0!==o){var s=r(o,n);if(s instanceof e)return s=s._target(),u(s,t,!0)}return t}var f=t("./util.js"),h=f.isPrimitive,p=f.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var n={promise:this,handler:t};return this._then(e?c:l,e?c:void 0,void 0,n,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":38}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var s=f(n[o])(t);if(r._popContext(),s===l){r._pushContext();var a=e.reject(l.e);return r._popContext(),a}var u=i(s,r);if(u instanceof e)return u}return null}function s(t,n,i,o){var s=this._promise=new e(r);s._captureStackTrace(),this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h}var a=t("./errors.js"),u=a.TypeError,c=t("./util.js"),l=c.errorObj,f=c.tryCatch,h=[];s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},s.prototype._continue=function(t){if(t===l)return this._promise._rejectCallback(t.e,!1,!0);var n=t.value;if(t.done===!0)this._promise._resolveCallback(n);else{var r=i(n,this._promise);if(!(r instanceof e)&&(r=o(r,this._yieldHandlers,this._promise),null===r))return void this._throw(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",n)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));r._then(this._next,this._throw,void 0,this,null)}},s.prototype._throw=function(t){this._promise._attachExtraTrace(t),this._promise._pushContext();var e=f(this._generator["throw"]).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._next=function(t){this._promise._pushContext();var e=f(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},e.coroutine=function(t,e){if("function"!=typeof t)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var n=Object(e).yieldHandler,r=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r((void 0),(void 0),n,i);return o._generator=e,o._next(void 0),o.promise()}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new u("fn must be a function\n\n    See http://goo.gl/916lJJ\n");h.push(t)},e.spawn=function(t){if("function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var r=new s(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors.js":13,"./util.js":38}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util.js");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}for(var i=arguments.length,o=new Array(i),s=0;s<i;++s)o[s]=arguments[s];t&&o.pop();var r=new n(o).promise();return void 0!==t?r.spread(t):r}}},{"./util.js":38}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:_,l.invoke(a,this,void 0)}function a(){this._init$(void 0,-2)}function u(t,e,n,r){var i="object"==typeof n&&null!==n?n.concurrency:0;return i="number"==typeof i&&isFinite(i)&&i>=1?i:0,new s(t,e,i,r)}var c=e._getDomain,l=t("./async.js"),f=t("./util.js"),h=f.tryCatch,p=f.errorObj,d={},_=[];f.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(r[n]===d){if(r[n]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(a>=1&&this._inFlight>=a)return r[n]=t,void this._queue.push(n);null!==s&&(s[n]=t);var u=this._callback,c=this._promise._boundValue();this._promise._pushContext();var l=h(u).call(c,t,n,o);if(this._promise._popContext(),l===p)return this._reject(l.e);var f=i(l,this._promise);if(f instanceof e){if(f=f._target(),f._isPending())return a>=1&&this._inFlight++,r[n]=d,f._proxyPromiseArray(this,n);if(!f._isFulfilled())return this._reject(f._reason());l=f._value()}r[n]=l}var _=++this._totalResolved;_>=o&&(null!==s?this._filter(r,s):this._resolve(r))},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return"function"!=typeof t?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(this,t,e,null).promise()},e.map=function(t,e,n,i){return"function"!=typeof e?r("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):u(t,e,n,i).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util.js"),s=o.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments);return r._popContext(),r._resolveFromSyncValue(i),r}},e.attempt=e["try"]=function(t,r,a){if("function"!=typeof t)return i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var u=new e(n);u._captureStackTrace(),u._pushContext();var c=o.isArray(r)?s(t).apply(a,r):s(t).call(a,r);return u._popContext(),u._resolveFromSyncValue(c),u},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1,!0):this._resolveCallback(t,!0)}}},{"./util.js":38}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=a(e).apply(n._boundValue(),[null].concat(t));i===u&&s.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?a(e).call(r,null):a(e).call(r,null,t);i===u&&s.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=n._target(),i=r._getCarriedStackTrace();i.cause=t,t=i}var o=a(e).call(n._boundValue(),t);o===u&&s.throwLater(o.e)}var o=t("./util.js"),s=t("./async.js"),a=o.tryCatch,u=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util.js"),i=t("./async.js"),o=r.tryCatch,s=r.errorObj;e.prototype.progressed=function(t){return this._then(void 0,void 0,t,void 0,void 0)},e.prototype._progress=function(t){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(t)},e.prototype._progressHandlerAt=function(t){return 0===t?this._progressHandler0:this[(t<<2)+t-5+2]},e.prototype._doProgressWith=function(t){var n=t.value,i=t.handler,a=t.promise,u=t.receiver,c=o(i).call(u,n);if(c===s){if(null!=c.e&&"StopProgressPropagation"!==c.e.name){var l=r.canAttachTrace(c.e)?c.e:new Error(r.toString(c.e));a._attachExtraTrace(l),a._progress(c.e)}}else c instanceof e?c._then(a._progress,null,null,a,void 0):a._progress(c)},e.prototype._progressUnchecked=function(t){for(var r=this._length(),o=this._progress,s=0;s<r;s++){var a=this._progressHandlerAt(s),u=this._promiseAt(s);if(u instanceof e)"function"==typeof a?i.invoke(this._doProgressWith,this,{handler:a,promise:u,receiver:this._receiverAt(s),value:t}):i.invoke(o,u,t);else{var c=this._receiverAt(s);"function"==typeof a?a.call(c,t,u):c instanceof n&&!c._isResolved()&&c._promiseProgressed(t,u)}}}}},{"./async.js":2,"./util.js":38}],23:[function(e,n,r){"use strict";n.exports=function(){function n(t){if("function"!=typeof t)throw new h("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==n)throw new h("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,t!==p&&this._resolveFromResolver(t)}function r(t){var e=new n(p);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._progressHandler0=t,e._promise0=t,e._receiver0=t,e._settledValue=t}var i,o=function(){return new h("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},s=function(){return new n.PromiseInspection(this._target())},a=function(t){return n.reject(new h(t))},u=e("./util.js");i=u.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},u.notEnumerableProp(n,"_getDomain",i);var c={},l=e("./async.js"),f=e("./errors.js"),h=n.TypeError=f.TypeError;n.RangeError=f.RangeError,n.CancellationError=f.CancellationError,n.TimeoutError=f.TimeoutError,n.OperationalError=f.OperationalError,n.RejectionError=f.OperationalError,n.AggregateError=f.AggregateError;var p=function(){},d={},_={e:null},g=e("./thenables.js")(n,p),y=e("./promise_array.js")(n,p,g,a),v=e("./captured_trace.js")(),m=e("./debuggability.js")(n,v),b=e("./context.js")(n,v,m),w=e("./catch_filter.js")(_),x=e("./promise_resolver.js"),j=x._nodebackForPromise,k=u.errorObj,E=u.tryCatch;return n.prototype.toString=function(){return"[object Promise]"},n.prototype.caught=n.prototype["catch"]=function(t){var e=arguments.length;if(e>1){var r,i=new Array(e-1),o=0;for(r=0;r<e-1;++r){var s=arguments[r];if("function"!=typeof s)return n.reject(new h("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));i[o++]=s}i.length=o,t=arguments[r];var a=new w(i,t,this);return this._then(void 0,a.doFilter,void 0,a,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},n.prototype.reflect=function(){return this._then(s,s,void 0,this,void 0);
},n.prototype.then=function(t,e,n){if(m()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var r=".then() only accepts functions but was passed: "+u.classString(t);arguments.length>1&&(r+=", "+u.classString(e)),this._warn(r)}return this._then(t,e,n,void 0,void 0)},n.prototype.done=function(t,e,n){var r=this._then(t,e,n,void 0,void 0);r._setIsFinal()},n.prototype.spread=function(t,e){return this.all()._then(t,e,void 0,d,void 0)},n.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},n.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},n.prototype.all=function(){return new y(this).promise()},n.prototype.error=function(t){return this.caught(u.originatesFromRejection,t)},n.is=function(t){return t instanceof n},n.fromNode=function(t){var e=new n(p),r=E(t)(j(e));return r===k&&e._rejectCallback(r.e,!0,!0),e},n.all=function(t){return new y(t).promise()},n.defer=n.pending=function(){var t=new n(p);return new x(t)},n.cast=function(t){var e=g(t);if(!(e instanceof n)){var r=e;e=new n(p),e._fulfillUnchecked(r)}return e},n.resolve=n.fulfilled=n.cast,n.reject=n.rejected=function(t){var e=new n(p);return e._captureStackTrace(),e._rejectCallback(t,!0),e},n.setScheduler=function(t){if("function"!=typeof t)throw new h("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var e=l._schedule;return l._schedule=t,e},n.prototype._then=function(t,e,r,o,s){var a=void 0!==s,u=a?s:new n(p);a||(u._propagateFrom(this,5),u._captureStackTrace());var c=this._target();c!==this&&(void 0===o&&(o=this._boundTo),a||u._setIsMigrated());var f=c._addCallbacks(t,e,r,u,o,i());return c._isResolved()&&!c._isSettlePromisesQueued()&&l.invoke(c._settlePromiseAtPostResolution,c,f),u},n.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},n.prototype._length=function(){return 131071&this._bitField},n.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},n.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},n.prototype._setLength=function(t){this._bitField=this._bitField&-131072|131071&t},n.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},n.prototype._setRejected=function(){this._bitField=134217728|this._bitField},n.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},n.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},n.prototype._isFinal=function(){return(33554432&this._bitField)>0},n.prototype._cancellable=function(){return(67108864&this._bitField)>0},n.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},n.prototype._unsetCancellable=function(){this._bitField=this._bitField&-67108865},n.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},n.prototype._unsetIsMigrated=function(){this._bitField=this._bitField&-4194305},n.prototype._isMigrated=function(){return(4194304&this._bitField)>0},n.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];if(e!==c)return void 0===e&&this._isBound()?this._boundValue():e},n.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},n.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},n.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},n.prototype._boundValue=function(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t},n.prototype._migrateCallbacks=function(t,e){var r=t._fulfillmentHandlerAt(e),i=t._rejectionHandlerAt(e),o=t._progressHandlerAt(e),s=t._promiseAt(e),a=t._receiverAt(e);s instanceof n&&s._setIsMigrated(),void 0===a&&(a=c),this._addCallbacks(r,i,o,s,a,null)},n.prototype._addCallbacks=function(t,e,n,r,i,o){var s=this._length();if(s>=131066&&(s=0,this._setLength(0)),0===s)this._promise0=r,void 0!==i&&(this._receiver0=i),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===o?t:o.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===o?e:o.bind(e)),"function"==typeof n&&(this._progressHandler0=null===o?n:o.bind(n));else{var a=5*s-5;this[a+3]=r,this[a+4]=i,"function"==typeof t&&(this[a+0]=null===o?t:o.bind(t)),"function"==typeof e&&(this[a+1]=null===o?e:o.bind(e)),"function"==typeof n&&(this[a+2]=null===o?n:o.bind(n))}return this._setLength(s+1),s},n.prototype._setProxyHandlers=function(t,e){var n=this._length();if(n>=131066&&(n=0,this._setLength(0)),0===n)this._promise0=e,this._receiver0=t;else{var r=5*n-5;this[r+3]=e,this[r+4]=t}this._setLength(n+1)},n.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},n.prototype._resolveCallback=function(t,e){if(!this._isFollowingOrFulfilledOrRejected()){if(t===this)return this._rejectCallback(o(),!1,!0);var r=g(t,this);if(!(r instanceof n))return this._fulfill(t);var i=1|(e?4:0);this._propagateFrom(r,i);var s=r._target();if(s._isPending()){for(var a=this._length(),u=0;u<a;++u)s._migrateCallbacks(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(s)}else s._isFulfilled()?this._fulfillUnchecked(s._value()):this._rejectUnchecked(s._reason(),s._getCarriedStackTrace())}},n.prototype._rejectCallback=function(t,e,n){n||u.markAsOriginatingFromRejection(t);var r=u.ensureErrorObject(t),i=r===t;this._attachExtraTrace(r,!!e&&i),this._reject(t,i?void 0:r)},n.prototype._resolveFromResolver=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=E(t)(function(t){null!==e&&(e._resolveCallback(t),e=null)},function(t){null!==e&&(e._rejectCallback(t,n),e=null)});n=!1,this._popContext(),void 0!==r&&r===k&&null!==e&&(e._rejectCallback(r.e,!0,!0),e=null)},n.prototype._settlePromiseFromHandler=function(t,e,n,r){if(!r._isRejected()){r._pushContext();var i;if(i=e!==d||this._isRejected()?E(t).call(e,n):E(t).apply(this._boundValue(),n),r._popContext(),i===k||i===r||i===_){var s=i===r?o():i.e;r._rejectCallback(s,!1,!0)}else r._resolveCallback(i)}},n.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},n.prototype._followee=function(){return this._rejectionHandler0},n.prototype._setFollowee=function(t){this._rejectionHandler0=t},n.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},n.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&t._isBound()&&this._setBoundTo(t._boundTo)},n.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},n.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},n.prototype._settlePromiseAt=function(t){var e=this._promiseAt(t),r=e instanceof n;if(r&&e._isMigrated())return e._unsetIsMigrated(),l.invoke(this._settlePromiseAt,this,t);var i=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,s=this._settledValue,a=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof i?r?this._settlePromiseFromHandler(i,a,s,e):i.call(a,s,e):a instanceof y?a._isResolved()||(this._isFulfilled()?a._promiseFulfilled(s,e):a._promiseRejected(s,e)):r&&(this._isFulfilled()?e._fulfill(s):e._reject(s,o)),t>=4&&4===(31&t)&&l.invokeLater(this._setLength,this,0)},n.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},n.prototype._isSettlePromisesQueued=function(){return(this._bitField&-1073741824)===-1073741824},n.prototype._setSettlePromisesQueued=function(){this._bitField=this._bitField|-1073741824},n.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},n.prototype._queueSettlePromises=function(){l.settlePromises(this),this._setSettlePromisesQueued()},n.prototype._fulfillUnchecked=function(t){if(t===this){var e=o();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},n.prototype._rejectUncheckedCheckError=function(t){var e=u.ensureErrorObject(t);this._rejectUnchecked(t,e===t?void 0:e)},n.prototype._rejectUnchecked=function(t,e){if(t===this){var n=o();return this._attachExtraTrace(n),this._rejectUnchecked(n)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void l.throwLater(function(t){throw"stack"in t&&l.invokeFirst(v.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&e!==t&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},n.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;e<t;e++)this._settlePromiseAt(e)},u.notEnumerableProp(n,"_makeSelfResolutionError",o),e("./progress.js")(n,y),e("./method.js")(n,p,g,a),e("./bind.js")(n,p,g),e("./finally.js")(n,_,g),e("./direct_resolve.js")(n),e("./synchronous_inspection.js")(n),e("./join.js")(n,y,g,p),n.Promise=n,e("./map.js")(n,y,a,g,p),e("./cancel.js")(n),e("./using.js")(n,a,g,b),e("./generators.js")(n,a,p,g),e("./nodeify.js")(n),e("./call_get.js")(n),e("./props.js")(n,y,g,a),e("./race.js")(n,p,g,a),e("./reduce.js")(n,y,a,g,p),e("./settle.js")(n,y),e("./some.js")(n,y,a),e("./promisify.js")(n,p),e("./any.js")(n),e("./each.js")(n,p),e("./timers.js")(n,p),e("./filter.js")(n,p),u.toFastProperties(n),u.toFastProperties(n.prototype),r({a:1}),r({b:2}),r({c:3}),r(1),r(function(){}),r(void 0),r(!1),r(new n(p)),v.setBounds(l.firstLineError,u.lastLineError),n}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r,i=this._promise=new e(n);t instanceof e&&(r=t,i._propagateFrom(r,5)),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util.js"),u=a.isArray;return s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function c(t,n){var s=r(this._values,this._promise);if(s instanceof e){if(s=s._target(),this._values=s,!s._isFulfilled())return s._isPending()?void s._then(c,this._reject,void 0,this,n):void this._reject(s._reason());if(s=s._value(),!u(s)){var a=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(a)}}else if(!u(s))return void this._promise._reject(i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===s.length)return void(n===-5?this._resolveEmptyArray():this._resolve(o(n)));var l=this.getActualLength(s.length);this._length=l,this._values=this.shouldCopyValues()?new Array(l):this._values;for(var f=this._promise,h=0;h<l;++h){var p=this._isResolved(),d=r(s[h],f);d instanceof e?(d=d._target(),p?d._ignoreRejections():d._isPending()?d._proxyPromiseArray(this,h):d._isFulfilled()?this._promiseFulfilled(d._value(),h):this._promiseRejected(d._reason(),h)):p||this._promiseFulfilled(d,h)}},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype.__hardReject__=s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1,!0)},s.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},s.prototype._promiseRejected=function(t,e){this._totalResolved++,this._reject(t)},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util.js":38}],25:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&p.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new f(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=p.keys(t),i=0;i<n.length;++i){var o=n[i];d.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t){return function(e,n){if(null!==t){if(e){var r=i(u(e));t._attachExtraTrace(r),t._reject(r)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),a=1;a<o;++a)s[a-1]=arguments[a];t._fulfill(s)}else t._fulfill(n);t=null}}}var s,a=t("./util.js"),u=a.maybeWrapAsError,c=t("./errors.js"),l=c.TimeoutError,f=c.OperationalError,h=a.haveGetters,p=t("./es5.js"),d=/^(?:name|message|stack|cause)$/;if(s=h?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=o(t),this.callback=this.asCallback},h){var _={get:function(){return o(this.promise)}};p.defineProperty(s.prototype,"asCallback",_),p.defineProperty(s.prototype,"callback",_)}s._nodebackForPromise=o,s.prototype.toString=function(){return"[object PromiseResolver]"},s.prototype.resolve=s.prototype.fulfill=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(t)},s.prototype.reject=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(t)},s.prototype.progress=function(t){if(!(this instanceof s))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(t)},s.prototype.cancel=function(t){this.promise.cancel(t)},s.prototype.timeout=function(){this.reject(new l("timeout"))},s.prototype.isResolved=function(){return this.promise.isResolved()},s.prototype.toJSON=function(){return this.promise.toJSON()},e.exports=s},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!x.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(e){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,b);return!!r&&i(r)}function s(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),s=0;s<t.length;s+=2)if(t[s]===o)throw new v("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",e))}}function a(t,e,n,r){for(var a=p.inheritedDataKeys(t),u=[],c=0;c<a.length;++c){var l=a[c],f=t[l],h=r===j||j(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,h)||u.push(l,f)}return s(u,e,n),u}function u(t,r,i,o){function s(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var s="string"==typeof u&&this!==a?this[u]:t,c=d(o);try{s.apply(i,_(arguments,c))}catch(l){o._rejectCallback(g(l),!0,!0)}return o}var a=function(){return this}(),u=t;return"string"==typeof u&&(t=o),p.notEnumerableProp(s,"__isPromisified__",!0),s}function c(t,e,n,r){for(var i=new RegExp(k(e)+"$"),o=a(t,e,i,n),s=0,u=o.length;s<u;s+=2){var c=o[s],l=o[s+1],f=c+e;if(r===E)t[f]=E(c,h,c,l,e);else{var d=r(l,function(){return E(c,h,c,l,e)});p.notEnumerableProp(d,"__isPromisified__",!0),t[f]=d}}return p.toFastProperties(t),t}function l(t,e){return E(t,e,void 0,t)}var f,h={},p=t("./util.js"),d=t("./promise_resolver.js")._nodebackForPromise,_=p.withAppended,g=p.maybeWrapAsError,y=p.canEvaluate,v=t("./errors").TypeError,m="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],x=new RegExp("^(?:"+w.join("|")+")$"),j=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},k=function(t){return t.replace(/([$])/,"\\$")},E=y?f:u;e.promisify=function(t,e){if("function"!=typeof t)throw new v("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(i(t))return t;var n=l(t,arguments.length<2?h:e);return p.copyDescriptors(t,n,r),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new v("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");e=Object(e);var n=e.suffix;"string"!=typeof n&&(n=m);var r=e.filter;"function"!=typeof r&&(r=j);var i=e.promisifier;if("function"!=typeof i&&(i=E),!p.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var o=p.inheritedDataKeys(t),s=0;s<o.length;++s){var a=t[o[s]];"constructor"!==o[s]&&p.isClass(a)&&(c(a.prototype,n,r,i),c(a,n,r,i))}return c(t,n,r,i)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){for(var e=c.keys(t),n=e.length,r=new Array(2*n),i=0;i<n;++i){var o=e[i];r[i]=t[o],r[i+n]=o}this.constructor$(r)}function s(t){var n,s=r(t);return u(s)?(n=s instanceof e?s._then(e.props,void 0,void 0,void 0,void 0):new o(s).promise(),s instanceof e&&n._propagateFrom(s,4),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var a=t("./util.js"),u=a.isObject,c=t("./es5.js");a.inherits(o,n),o.prototype._init=function(){this._init$(void 0,-3)},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){for(var r={},i=this.length(),o=0,s=this.length();o<s;++o)r[this._values[o+i]]=this._values[o];this._resolve(r)}},o.prototype._promiseProgressed=function(t,e){this._promise._progress({key:this._values[e+this.length()],value:t})},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return s(this)},e.props=function(t){return s(t)}}},{"./es5.js":14,"./util.js":38}],28:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],29:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var u=r(t);if(u instanceof e)return a(u);if(!s(t))return i("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var c=new e(n);void 0!==o&&c._propagateFrom(o,5);for(var l=c._fulfill,f=c._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}var s=t("./util.js").isArray,a=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util.js":38}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function s(t,n,r,s){this.constructor$(t),this._promise._captureStackTrace(),this._preservedValues=s===o?[]:null,this._zerothIsAccum=void 0===r,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var u=i(r,this._promise),f=!1,h=u instanceof e;h&&(u=u._target(),u._isPending()?u._proxyPromiseArray(this,-1):u._isFulfilled()?(r=u._value(),this._gotAccum=!0):(this._reject(u._reason()),f=!0)),h||this._zerothIsAccum||(this._gotAccum=!0);var p=c();this._callback=null===p?n:p.bind(n),this._accum=r,f||l.invoke(a,this,void 0)}function a(){this._init$(void 0,-5)}function u(t,e,n,i){if("function"!=typeof e)return r("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var o=new s(t,e,n,i);return o.promise()}var c=e._getDomain,l=t("./async.js"),f=t("./util.js"),h=f.tryCatch,p=f.errorObj;f.inherits(s,n),s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},s.prototype._promiseFulfilled=function(t,n){var r=this._values;r[n]=t;var o,s=this.length(),a=this._preservedValues,u=null!==a,c=this._gotAccum,l=this._valuesPhase;if(!l)for(l=this._valuesPhase=new Array(s),o=0;o<s;++o)l[o]=0;if(o=l[n],0===n&&this._zerothIsAccum?(this._accum=t,this._gotAccum=c=!0,l[n]=0===o?1:2):n===-1?(this._accum=t,this._gotAccum=c=!0):0===o?l[n]=1:(l[n]=2,this._accum=t),c){for(var f,d=this._callback,_=this._promise._boundValue(),g=this._reducingIndex;g<s;++g)if(o=l[g],2!==o){if(1!==o)return;if(t=r[g],this._promise._pushContext(),u?(a.push(t),f=h(d).call(_,t,g,s)):f=h(d).call(_,this._accum,t,g,s),this._promise._popContext(),f===p)return this._reject(f.e);var y=i(f,this._promise);if(y instanceof e){if(y=y._target(),y._isPending())return l[g]=4,y._proxyPromiseArray(this,g);if(!y._isFulfilled())return this._reject(y._reason());f=y._value()}this._reducingIndex=g+1,this._accum=f}else this._reducingIndex=g+1;this._resolve(u?a:this._accum)}},e.prototype.reduce=function(t,e){return u(this,t,e,null)},e.reduce=function(t,e,n,r){return u(t,e,n,r)}}},{"./async.js":2,"./util.js":38}],31:[function(e,n,i){"use strict";var o,s=e("./util"),a=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(s.isNode&&"undefined"==typeof MutationObserver){var u=r.setImmediate,c=t.nextTick;o=s.isRecentNode?function(t){u.call(r,t)}:function(e){c.call(t,e)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?o="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:a:(o=function(t){var e=document.createElement("div"),n=new MutationObserver(t);return n.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},o.isStatic=!0);n.exports=o},{"./util":38}],32:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){this.constructor$(t)}var i=e.PromiseInspection,o=t("./util.js");o.inherits(r,n),r.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;n>=this._length&&this._resolve(this._values)},r.prototype._promiseFulfilled=function(t,e){var n=new i;n._bitField=268435456,n._settledValue=t,this._promiseResolved(e,n)},r.prototype._promiseRejected=function(t,e){var n=new i;n._bitField=134217728,n._settledValue=t,this._promiseResolved(e,n)},e.settle=function(t){return new r(t).promise()},e.prototype.settle=function(){return new r(this).promise()}}},{"./util.js":38}],33:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var s=t("./util.js"),a=t("./errors.js").RangeError,u=t("./errors.js").AggregateError,c=s.isArray;s.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},i.prototype._promiseRejected=function(t){if(this._addRejected(t),this.howMany()>this._canPossiblyFulfill()){for(var e=new u,n=this.length();n<this._values.length;++n)e.push(this._values[n]);this._reject(e)}},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors.js":13,"./util.js":38}],34:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._settledValue):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._unsetRejectionIsUnhandled(),t._settledValue},t.PromiseInspection=e}},{}],35:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(c(t)){if(t instanceof e)return t;if(o(t)){var l=new e(n);return t._then(l._fulfillUnchecked,l._rejectUncheckedCheckError,l._progressUnchecked,l,null),l}var f=a.tryCatch(i)(t);if(f===u){r&&r._pushContext();var l=e.reject(f.e);return r&&r._popContext(),l}if("function"==typeof f)return s(t,f,r)}return t}function i(t){return t.then}function o(t){return l.call(t,"_promise0")}function s(t,r,i){function o(t){l&&(l._resolveCallback(t),l=null)}function s(t){l&&(l._rejectCallback(t,h,!0),l=null)}function c(t){l&&"function"==typeof l._progress&&l._progress(t)}var l=new e(n),f=l;i&&i._pushContext(),l._captureStackTrace(),i&&i._popContext();var h=!0,p=a.tryCatch(r).call(t,o,s,c);return h=!1,l&&p===u&&(l._rejectCallback(p.e,!0,!0),l=null),f}var a=t("./util.js"),u=a.errorObj,c=a.isObject,l={}.hasOwnProperty;return r}},{"./util.js":38}],36:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){var e=this;return e instanceof Number&&(e=+e),clearTimeout(e),t}function i(t){var e=this;throw e instanceof Number&&(e=+e),clearTimeout(e),t}var o=t("./util.js"),s=e.TimeoutError,a=function(t,e){if(t.isPending()){var n;!o.isPrimitive(e)&&e instanceof Error?n=e:("string"!=typeof e&&(e="operation timed out"),n=new s(e)),o.markAsOriginatingFromRejection(n),t._attachExtraTrace(n),t._cancel(n)}},u=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,r){if(void 0===r){r=t,t=void 0;var i=new e(n);return setTimeout(function(){i._fulfill()},r),i}return r=+r,e.resolve(t)._then(u,null,null,r,void 0)};e.prototype.delay=function(t){return c(this,t)},e.prototype.timeout=function(t,e){t=+t;var n=this.then().cancellable();n._cancellationParent=this;var o=setTimeout(function(){a(n,e)},t);return n._then(r,i,void 0,o,void 0)}}},{"./util.js":38}],37:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){for(var n=t.length,r=0;r<n;++r){var i=t[r];if(i.isRejected())return e.reject(i.error());t[r]=i._settledValue}return t}function s(t){setTimeout(function(){throw t},0)}function a(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function u(t,n){function i(){if(o>=u)return c.resolve();var l=a(t[o++]);if(l instanceof e&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),t.promise)}catch(f){return s(f)}if(l instanceof e)return l._then(i,s,null,null,null)}i()}var o=0,u=t.length,c=e.defer();return i(),c.promise}function c(t){var e=new g;return e._settledValue=t,e._bitField=268435456,u(this,e).thenReturn(t)}function l(t){var e=new g;return e._settledValue=t,e._bitField=134217728,u(this,e).thenThrow(t)}function f(t,e,n){this._data=t,this._promise=e,this._context=n}function h(t,e,n){this.constructor$(t,e,n)}function p(t){return f.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}var d=t("./errors.js").TypeError,_=t("./util.js").inherits,g=e.PromiseInspection;f.prototype.data=function(){return this._data},f.prototype.promise=function(){return this._promise},f.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},f.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=null!==e?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},f.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},_(h,f),h.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");
var i=arguments[t-1];if("function"!=typeof i)return n("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var s,a=!0;2===t&&Array.isArray(arguments[0])?(s=arguments[0],t=s.length,a=!1):(s=arguments,t--);for(var u=new Array(t),h=0;h<t;++h){var d=s[h];if(f.isDisposer(d)){var _=d;d=d.promise(),d._setDisposable(_)}else{var g=r(d);g instanceof e&&(d=g._then(p,null,null,{resources:u,index:h},void 0))}u[h]=d}var y=e.settle(u).then(o).then(function(t){y._pushContext();var e;try{e=a?i.apply(void 0,t):i.call(void 0,t)}finally{y._popContext()}return e})._then(c,l,void 0,u,void 0);return u.promise=y,y},e.prototype._setDisposable=function(t){this._bitField=262144|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(262144&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-262145,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new h(t,this,i());throw new d}}},{"./errors.js":13,"./util.js":38}],38:[function(e,n,r){"use strict";function i(){try{var t=O;return O=null,t.apply(this,arguments)}catch(e){return A.e=e,A}}function o(t){return O=t,i}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return!s(t)}function u(t){return s(t)?new Error(y(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function l(t,e,n){if(!j.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function f(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return j.defineProperty(t,e,r),t}function h(t){throw t}function p(t){try{if("function"==typeof t){var e=j.names(t.prototype),n=j.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=T.test(t+"")&&j.names(t).length>0;if(n||r||i)return!0}return!1}catch(o){return!1}}function d(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function _(t){return I.test(t)}function g(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function y(t){try{return t+""}catch(e){return"[no string representation]"}}function v(t){try{f(t,"isOperational",!0)}catch(e){}}function m(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function b(t){return t instanceof Error&&j.propertyIsWritable(t,"stack")}function w(t){return{}.toString.call(t)}function x(t,e,n){for(var r=j.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{j.defineProperty(e,o,j.getDescriptor(t,o))}catch(s){}}}var j=e("./es5.js"),k="undefined"==typeof navigator,E=function(){try{var t={};return j.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),A={e:{}},O,S=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},R=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(j.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(t,u);null!=c&&null==c.get&&null==c.set&&r.push(u)}}t=j.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var s=0;s<t.length;++s)if(r.call(t[s],o))continue t;i.push(o)}return i}}(),T=/this\s*\.\s*\S+\s*=/,I=/^[a-z$_][a-z$_0-9]*$/i,C=function(){return"stack"in new Error?function(t){return b(t)?t:new Error(y(t))}:function(t){if(b(t))return t;try{throw new Error(y(t))}catch(e){return e}}}(),q={isClass:p,isIdentifier:_,inheritedDataKeys:R,getDataPropertyOrDefault:l,thrower:h,isArray:j.isArray,haveGetters:E,notEnumerableProp:f,isPrimitive:s,isObject:a,canEvaluate:k,errorObj:A,tryCatch:o,inherits:S,withAppended:c,maybeWrapAsError:u,toFastProperties:d,filledRange:g,toString:y,canAttachTrace:b,ensureErrorObject:C,originatesFromRejection:m,markAsOriginatingFromRejection:v,classString:w,copyDescriptors:x,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof t&&"[object process]"===w(t).toLowerCase()};q.isRecentNode=q.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),q.isNode&&q.toFastProperties(t);try{throw new Error}catch(F){q.lastLineError=F}n.exports=q},{"./es5.js":14}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:28}],90:[function(t,e,n){(function(n){"use strict";function r(t){this.enabled=t&&void 0!==t.enabled?t.enabled:f}function i(t){var e=function(){return o.apply(e,arguments)};return e._styles=t,e.enabled=this.enabled,e.__proto__=_,e}function o(){var t=arguments,e=t.length,n=0!==e&&String(arguments[0]);if(e>1)for(var r=1;r<e;r++)n+=" "+t[r];if(!this.enabled||!n)return n;var i=this._styles,o=i.length,s=u.dim.open;for(!p||i.indexOf("gray")===-1&&i.indexOf("grey")===-1||(u.dim.open="");o--;){var a=u[i[o]];n=a.open+n.replace(a.closeRe,a.open)+a.close}return u.dim.open=s,n}function s(){var t={};return Object.keys(d).forEach(function(e){t[e]={get:function(){return i.call(this,[e])}}}),t}var a=t("escape-string-regexp"),u=t("ansi-styles"),c=t("strip-ansi"),l=t("has-ansi"),f=t("supports-color"),h=Object.defineProperties,p="win32"===n.platform&&!/^xterm/i.test(n.env.TERM);p&&(u.blue.open="[94m");var d=function(){var t={};return Object.keys(u).forEach(function(e){u[e].closeRe=new RegExp(a(u[e].close),"g"),t[e]={get:function(){return i.call(this,this._styles.concat(e))}}}),t}(),_=h(function(){},d);h(r.prototype,s()),e.exports=new r,e.exports.styles=u,e.exports.hasColor=l,e.exports.stripColor=c,e.exports.supportsColor=f}).call(this,t("_process"))},{_process:28,"ansi-styles":91,"escape-string-regexp":92,"has-ansi":93,"strip-ansi":95,"supports-color":97}],91:[function(t,e,n){"use strict";function r(){var t={modifiers:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},colors:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39]},bgColors:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49]}};return t.colors.grey=t.colors.gray,Object.keys(t).forEach(function(e){var n=t[e];Object.keys(n).forEach(function(e){var r=n[e];t[e]=n[e]={open:"["+r[0]+"m",close:"["+r[1]+"m"}}),Object.defineProperty(t,e,{value:n,enumerable:!1})}),t}Object.defineProperty(e,"exports",{enumerable:!0,get:r})},{}],92:[function(t,e,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(r,"\\$&")}},{}],93:[function(t,e,n){"use strict";var r=t("ansi-regex"),i=new RegExp(r().source);e.exports=i.test.bind(i)},{"ansi-regex":94}],94:[function(t,e,n){"use strict";e.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g}},{}],95:[function(t,e,n){"use strict";var r=t("ansi-regex")();e.exports=function(t){return"string"==typeof t?t.replace(r,""):t}},{"ansi-regex":96}],96:[function(t,e,n){arguments[4][94][0].apply(n,arguments)},{dup:94}],97:[function(t,e,n){(function(t){"use strict";var n=t.argv,r=n.indexOf("--"),i=function(t){t="--"+t;var e=n.indexOf(t);return e!==-1&&(r===-1||e<r)};e.exports=function(){return"FORCE_COLOR"in t.env||!(i("no-color")||i("no-colors")||i("color=false"))&&(!!(i("color")||i("colors")||i("color=true")||i("color=always"))||!(t.stdout&&!t.stdout.isTTY)&&("win32"===t.platform||("COLORTERM"in t.env||"dumb"!==t.env.TERM&&!!/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(t.env.TERM))))}()}).call(this,t("_process"))},{_process:28}],98:[function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(e){}}function a(){var t;try{t=n.storage.debug}catch(e){}return t}function u(){try{return window.localStorage}catch(t){}}n=e.exports=t("./debug"),n.log=o,n.formatArgs=i,n.save=s,n.load=a,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(a())},{"./debug":99}],99:[function(t,e,n){function r(){return n.colors[l++%n.colors.length]}function i(t){function e(){}function i(){var t=i,e=+new Date,o=e-(c||e);t.diff=o,t.prev=c,t.curr=e,c=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=r());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;a++;var i=n.formatters[r];if("function"==typeof i){var o=s[a];e=i.call(t,o),s.splice(a,1),a--}return e}),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(t,s));var u=i.log||n.log||console.log.bind(console);u.apply(t,s)}e.enabled=!1,i.enabled=!0;var o=n.enabled(t)?i:e;return o.namespace=t,o}function o(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i<r;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))}function s(){n.enable("")}function a(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}n=e.exports=i,n.coerce=u,n.disable=s,n.enable=o,n.enabled=a,n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var c,l=0},{ms:100}],100:[function(t,e,n){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*f;case"days":case"day":case"d":return n*l;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(t){return t>=l?Math.round(t/l)+"d":t>=c?Math.round(t/c)+"h":t>=u?Math.round(t/u)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function o(t){return s(t,l,"day")||s(t,c,"hour")||s(t,u,"minute")||s(t,a,"second")||t+" ms"}function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var a=1e3,u=60*a,c=60*u,l=24*c,f=365.25*l;e.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e["long"]?o(t):i(t)}},{}],101:[function(t,e,n){arguments[4][26][0].apply(n,arguments)},{dup:26}],102:[function(t,e,n){function r(t){var e=t?t.length:0;return e?t[e-1]:void 0}e.exports=r},{}],103:[function(t,e,n){function r(t,e,n){var r=a(t)?i:s;return e=o(e,n,3),r(t,e)}var i=t("../internal/arrayMap"),o=t("../internal/baseCallback"),s=t("../internal/baseMap"),a=t("../lang/isArray");e.exports=r},{"../internal/arrayMap":110,"../internal/baseCallback":115,"../internal/baseMap":127,"../lang/isArray":163}],104:[function(t,e,n){function r(t,e){return i(t,o(e))}var i=t("./map"),o=t("../utility/property");e.exports=r},{"../utility/property":176,"./map":103}],105:[function(t,e,n){var r=t("../internal/arrayReduce"),i=t("../internal/baseEach"),o=t("../internal/createReduce"),s=o(r,i);e.exports=s},{"../internal/arrayReduce":111,"../internal/baseEach":119,"../internal/createReduce":140}],106:[function(t,e,n){function r(t,e){if("function"!=typeof t)throw new TypeError(i);return e=o(void 0===e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-e,0),s=Array(i);++r<i;)s[r]=n[e+r];switch(e){case 0:return t.call(this,s);case 1:return t.call(this,n[0],s);case 2:return t.call(this,n[0],n[1],s)}var a=Array(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=s,t.apply(this,a)}}var i="Expected a function",o=Math.max;e.exports=r},{}],107:[function(t,e,n){(function(t){(function(){function r(t,e){if(t!==e){var n=null===t,r=t===E,i=t===t,o=null===e,s=e===E,a=e===e;if(t>e&&!o||!i||n&&!s&&a||r&&a)return 1;if(t<e&&!n||!a||o&&!r&&i||s&&i)return-1}return 0}function i(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function o(t,e,n){if(e!==e)return g(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function s(t){return"function"==typeof t||!1}function a(t){return null==t?"":t+""}function u(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function f(t,e,n){for(var i=-1,o=t.criteria,s=e.criteria,a=o.length,u=n.length;++i<a;){var c=r(o[i],s[i]);if(c){if(i>=u)return c;var l=n[i];return c*("asc"===l||l===!0?1:-1)}}return t.index-e.index}function h(t){return zt[t]}function p(t){return Vt[t]}function d(t,e,n){return e?t=Kt[t]:n&&(t=Ht[t]),"\\"+t}function _(t){return"\\"+Ht[t]}function g(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function y(t){return!!t&&"object"==typeof t}function v(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function m(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=z,o[++i]=n);return o}function b(t,e){for(var n,r=-1,i=t.length,o=-1,s=[];++r<i;){var a=t[r],u=e?e(a,r,t):a;r&&n===u||(n=u,s[++o]=a)}return s}function w(t){for(var e=-1,n=t.length;++e<n&&v(t.charCodeAt(e)););return e}function x(t){for(var e=t.length;e--&&v(t.charCodeAt(e)););return e}function j(t){return $t[t]}function k(t){function e(t){if(y(t)&&!Ra(t)&&!(t instanceof G)){if(t instanceof v)return t;if(es.call(t,"__chain__")&&es.call(t,"__wrapped__"))return pr(t)}return new v(t)}function n(){}function v(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function G(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ss,this.__views__=[]}function et(){var t=new G(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function rt(){if(this.__filtered__){var t=new G(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function zt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ra(t),r=e<0,i=n?t.length:0,o=$n(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,l=this.__iteratees__,f=l.length,h=0,p=js(u,this.__takeCount__);if(!n||i<M||i==u&&p==u)return nn(r&&n?t.reverse():t,this.__actions__);var d=[];t:for(;u--&&h<p;){c+=e;for(var _=-1,g=t[c];++_<f;){var y=l[_],v=y.iteratee,m=y.type,b=v(g);if(m==W)g=b;else if(!b){if(m==U)continue t;break t}}d[h++]=g}return d}function Vt(){this.__data__={}}function $t(t){return this.has(t)&&delete this.__data__[t]}function Jt(t){return"__proto__"==t?E:this.__data__[t]}function Kt(t){return"__proto__"!=t&&es.call(this.__data__,t)}function Ht(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Yt(t){var e=t?t.length:0;for(this.data={hash:ys(null),set:new fs};e--;)this.push(t[e])}function Gt(t,e){var n=t.data,r="string"==typeof e||Fi(e)?n.set.has(e):n.hash[e];return r?0:-1}function Xt(t){var e=this.data;"string"==typeof t||Fi(t)?e.set.add(t):e.hash[t]=!0}function Zt(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,s=Uo(r+o);++n<r;)s[n]=t[n];for(;++i<o;)s[n++]=e[i];return s}function te(t,e){var n=-1,r=t.length;for(e||(e=Uo(r));++n<r;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ie(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function se(t,e,n,r){for(var i=-1,o=t.length,s=r,a=s;++i<o;){var u=t[i],c=+e(u);n(c,s)&&(s=c,a=u)}return a}function ae(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[++i]=s)}return o}function ue(t,e){for(var n=-1,r=t.length,i=Uo(r);++n<r;)i[n]=e(t[n],n,t);return i}function ce(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function le(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function fe(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function he(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function pe(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function de(t,e){return t===E?e:t}function _e(t,e,n,r){return t!==E&&es.call(r,n)?t:e}function ge(t,e,n){for(var r=-1,i=Ma(e),o=i.length;++r<o;){var s=i[r],a=t[s],u=n(a,e[s],s,t,e);(u===u?u===a:a!==a)&&(a!==E||s in t)||(t[s]=u)}return t}function ye(t,e){return null==e?t:me(e,Ma(e),t)}function ve(t,e){for(var n=-1,r=null==t,i=!r&&Gn(t),o=i?t.length:0,s=e.length,a=Uo(s);++n<s;){var u=e[n];i?a[n]=Xn(u,o)?t[u]:E:a[n]=r?E:t[u]}return a}function me(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===E?t:sn(t,e,n):null==t?So:"object"==r?Le(t):e===E?Fo(t):Me(t,e)}function we(t,e,n,r,i,o,s){var a;if(n&&(a=i?n(t,r,i):n(t)),a!==E)return a;if(!Fi(t))return t;var u=Ra(t);if(u){if(a=Jn(t),!e)return te(t,a)}else{var c=rs.call(t),l=c==Y;if(c!=Z&&c!=V&&(!l||i))return Qt[c]?Hn(t,c,e):i?t:{};if(a=Kn(l?{}:t),!e)return ye(a,t)}o||(o=[]),s||(s=[]);for(var f=o.length;f--;)if(o[f]==t)return s[f];return o.push(t),s.push(a),(u?ee:Ie)(t,function(r,i){a[i]=we(r,e,n,i,t,o,s)}),a}function xe(t,e,n){if("function"!=typeof t)throw new Yo(Q);return hs(function(){t.apply(E,n)},e)}function je(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,s=Qn(),a=s==o,u=a&&e.length>=M?_n(e):null,c=e.length;u&&(s=Gt,a=!1,e=u);t:for(;++i<n;){var l=t[i];if(a&&l===l){for(var f=c;f--;)if(e[f]===l)continue t;r.push(l)}else s(e,l,0)<0&&r.push(l)}return r}function ke(t,e){var n=!0;return Ds(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Ee(t,e,n,r){var i=r,o=i;return Ds(t,function(t,s,a){var u=+e(t,s,a);(n(u,i)||u===r&&u===o)&&(i=u,o=t)}),o}function Ae(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>i?0:i+n),r=r===E||r>i?i:+r||0,r<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}function Oe(t,e){var n=[];return Ds(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Se(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}function Re(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var s=t[i];y(s)&&Gn(s)&&(n||Ra(s)||Ei(s))?e?Re(s,e,n,r):ce(r,s):n||(r[r.length]=s)}return r}function Te(t,e){return Ns(t,e,to)}function Ie(t,e){return Ns(t,e,Ma)}function Ce(t,e){return Ls(t,e,Ma)}function qe(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var s=e[n];qi(t[s])&&(o[++i]=s)}return o}function Fe(t,e,n){if(null!=t){n!==E&&n in fr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:E}}function Pe(t,e,n,r,i,o){return t===e||(null==t||null==e||!Fi(t)&&!y(e)?t!==t&&e!==e:De(t,e,Pe,n,r,i,o))}function De(t,e,n,r,i,o,s){var a=Ra(t),u=Ra(e),c=$,l=$;a||(c=rs.call(t),c==V?c=Z:c!=Z&&(a=Qi(t))),u||(l=rs.call(e),l==V?l=Z:l!=Z&&(u=Qi(e)));var f=c==Z,h=l==Z,p=c==l;if(p&&!a&&!f)return Ln(t,e,c);if(!i){var d=f&&es.call(t,"__wrapped__"),_=h&&es.call(e,"__wrapped__");if(d||_)return n(d?t.value():t,_?e.value():e,r,i,o,s)}if(!p)return!1;o||(o=[]),s||(s=[]);for(var g=o.length;g--;)if(o[g]==t)return s[g]==e;o.push(t),s.push(e);var y=(a?Nn:Mn)(t,e,n,r,i,o,s);return o.pop(),s.pop(),y}function Be(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=fr(t);r--;){var s=e[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<i;){s=e[r];var a=s[0],u=t[a],c=s[1];if(o&&s[2]){if(u===E&&!(a in t))return!1}else{var l=n?n(u,c,a):E;if(!(l===E?Pe(c,u,n,!0):l))return!1}}return!0}function Ne(t,e){var n=-1,r=Gn(t)?Uo(t.length):[];return Ds(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Le(t){var e=zn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(r!==E||n in fr(t)))}}return function(t){return Be(t,e)}}function Me(t,e){var n=Ra(t),r=tr(t)&&rr(e),i=t+"";return t=hr(t),function(o){if(null==o)return!1;var s=i;if(o=fr(o),(n||!r)&&!(s in o)){if(o=1==t.length?o:Fe(o,Ke(t,0,-1)),null==o)return!1;s=Ar(t),o=fr(o)}return o[s]===e?e!==E||s in o:Pe(e,o[s],E,!0)}}function Ue(t,e,n,r,i){if(!Fi(t))return t;var o=Gn(e)&&(Ra(e)||Qi(e)),s=o?E:Ma(e);return ee(s||e,function(a,u){if(s&&(u=a,a=e[u]),y(a))r||(r=[]),i||(i=[]),We(t,e,u,Ue,n,r,i);else{var c=t[u],l=n?n(c,a,u,t,e):E,f=l===E;f&&(l=a),l===E&&(!o||u in t)||!f&&(l===l?l===c:c!==c)||(t[u]=l)}}),t}function We(t,e,n,r,i,o,s){for(var a=o.length,u=e[n];a--;)if(o[a]==u)return void(t[n]=s[a]);var c=t[n],l=i?i(c,u,n,t,e):E,f=l===E;f&&(l=u,Gn(u)&&(Ra(u)||Qi(u))?l=Ra(c)?c:Gn(c)?te(c):[]:Mi(u)||Ei(u)?l=Ei(c)?Ki(c):Mi(c)?c:{}:f=!1),o.push(u),s.push(l),f?t[n]=r(l,u,i,o,s):(l===l?l!==c:c===c)&&(t[n]=l)}function Qe(t){return function(e){return null==e?E:e[t]}}function ze(t){var e=t+"";return t=hr(t),function(n){return Fe(n,t,e)}}function Ve(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Xn(r)){var i=r;ps.call(t,r,1)}}return t}function $e(t,e){return t+vs(As()*(e-t+1))}function Je(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Ke(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,e<0&&(e=-e>i?0:i+e),n=n===E||n>i?i:+n||0,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Uo(i);++r<i;)o[r]=t[r+e];return o}function He(t,e){var n;return Ds(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Ye(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ge(t,e,n){var r=Un(),i=-1;e=ue(e,function(t){return r(t)});var o=Ne(t,function(t){var n=ue(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return Ye(o,function(t,e){return f(t,e,n)})}function Xe(t,e){var n=0;return Ds(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Ze(t,e){var n=-1,r=Qn(),i=t.length,s=r==o,a=s&&i>=M,u=a?_n():null,c=[];u?(r=Gt,s=!1):(a=!1,u=e?[]:c);t:for(;++n<i;){var l=t[n],f=e?e(l,n,t):l;if(s&&l===l){for(var h=u.length;h--;)if(u[h]===f)continue t;e&&u.push(f),c.push(l)}else r(u,f,0)<0&&((e||a)&&u.push(f),c.push(l))}return c}function tn(t,e){for(var n=-1,r=e.length,i=Uo(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Ke(t,r?0:o,r?o+1:i):Ke(t,r?o+1:0,r?i:o)}function nn(t,e){var n=t;n instanceof G&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=e[r];n=o.func.apply(o.thisArg,ce([n],o.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&i<=Is){for(;r<i;){var o=r+i>>>1,s=t[o];(n?s<=e:s<e)&&null!==s?r=o+1:i=o}return i}return on(t,e,So,n)}function on(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,s=e!==e,a=null===e,u=e===E;i<o;){var c=vs((i+o)/2),l=n(t[c]),f=l!==E,h=l===l;if(s)var p=h||r;else p=a?h&&f&&(r||null!=l):u?h&&(r||f):null!=l&&(r?l<=e:l<e);p?i=c+1:o=c}return js(o,Ts)}function sn(t,e,n){if("function"!=typeof t)return So;if(e===E)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,s){return t.call(e,n,r,i,o,s)}}return function(){return t.apply(e,arguments)}}function an(t){var e=new ss(t.byteLength),n=new ds(e);return n.set(new ds(t)),e}function un(t,e,n){for(var r=n.length,i=-1,o=xs(t.length-r,0),s=-1,a=e.length,u=Uo(a+o);++s<a;)u[s]=e[s];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[s++]=t[i++];return u}function cn(t,e,n){for(var r=-1,i=n.length,o=-1,s=xs(t.length-i,0),a=-1,u=e.length,c=Uo(s+u);++o<s;)c[o]=t[o];for(var l=o;++a<u;)c[l+a]=e[a];for(;++r<i;)c[l+n[r]]=t[o++];return c}function ln(t,e){return function(n,r,i){var o=e?e():{};if(r=Un(r,i,3),Ra(n))for(var s=-1,a=n.length;++s<a;){var u=n[s];t(o,u,r(u,s,n),n)}else Ds(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function fn(t){return yi(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2?n[i-2]:E,s=i>2?n[2]:E,a=i>1?n[i-1]:E;for("function"==typeof o?(o=sn(o,a,5),i-=2):(o="function"==typeof a?a:E,i-=o?1:0),s&&Zn(n[0],n[1],s)&&(o=i<3?E:o,i=1);++r<i;){var u=n[r];u&&t(e,u,o)}return e})}function hn(t,e){return function(n,r){var i=n?Ws(n):0;if(!nr(i))return t(n,r);for(var o=e?i:-1,s=fr(n);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return n}}function pn(t){return function(e,n,r){for(var i=fr(e),o=r(e),s=o.length,a=t?s:-1;t?a--:++a<s;){var u=o[a];if(n(i[u],u,i)===!1)break}return e}}function dn(t,e){function n(){var i=this&&this!==ne&&this instanceof n?r:t;return i.apply(e,arguments)}var r=yn(t);return n}function _n(t){return ys&&fs?new Yt(t):null}function gn(t){return function(e){for(var n=-1,r=Eo(lo(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function yn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Ps(t.prototype),r=t.apply(n,e);return Fi(r)?r:n}}function vn(t){function e(n,r,i){i&&Zn(n,r,i)&&(r=E);var o=Bn(n,t,E,E,E,E,E,r);return o.placeholder=e.placeholder,o}return e}function mn(t,e){return yi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(E,n))})}function bn(t,e){return function(n,r,i){if(i&&Zn(n,r,i)&&(r=E),r=Un(r,i,3),1==r.length){n=Ra(n)?n:lr(n);var o=se(n,r,t,e);if(!n.length||o!==e)return o}return Ee(n,r,t,e)}}function wn(t,e){return function(n,r,o){if(r=Un(r,o,3),Ra(n)){var s=i(n,r,e);return s>-1?n[s]:E}return Se(n,r,t)}}function xn(t){return function(e,n,r){return e&&e.length?(n=Un(n,r,3),i(e,n,t)):-1}}function jn(t){return function(e,n,r){return n=Un(n,r,3),Se(e,n,t,!0)}}function kn(t){return function(){for(var e,n=arguments.length,r=t?n:-1,i=0,o=Uo(n);t?r--:++r<n;){var s=o[i++]=arguments[r];if("function"!=typeof s)throw new Yo(Q);!e&&v.prototype.thru&&"wrapper"==Wn(s)&&(e=new v([],(!0)))}for(r=e?-1:n;++r<n;){s=o[r];var a=Wn(s),u="wrapper"==a?Us(s):E;e=u&&er(u[0])&&u[1]==(F|T|C|P)&&!u[4].length&&1==u[9]?e[Wn(u[0])].apply(e,u[3]):1==s.length&&er(s)?e[a]():e.thru(s)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Ra(r)&&r.length>=M)return e.plant(r).value();for(var i=0,s=n?o[i].apply(this,t):r;++i<n;)s=o[i].call(this,s);return s}}}function En(t,e){return function(n,r,i){return"function"==typeof r&&i===E&&Ra(n)?t(n,r):e(n,sn(r,i,3))}}function An(t){return function(e,n,r){return"function"==typeof n&&r===E||(n=sn(n,r,3)),t(e,n,to)}}function On(t){return function(e,n,r){return"function"==typeof n&&r===E||(n=sn(n,r,3)),t(e,n)}}function Sn(t){return function(e,n,r){var i={};return n=Un(n,r,3),Ie(e,function(e,r,o){var s=n(e,r,o);r=t?s:r,e=t?e:s,i[r]=e}),i}}function Rn(t){return function(e,n,r){return e=a(e),(t?e:"")+qn(e,n,r)+(t?"":e)}}function Tn(t){var e=yi(function(n,r){var i=m(r,e.placeholder);return Bn(n,t,E,r,i)});return e}function In(t,e){return function(n,r,i,o){var s=arguments.length<3;return"function"==typeof r&&o===E&&Ra(n)?t(n,r,i,s):Je(n,Un(r,o,4),i,s,e)}}function Cn(t,e,n,r,i,o,s,a,u,c){function l(){for(var v=arguments.length,b=v,w=Uo(v);b--;)w[b]=arguments[b];if(r&&(w=un(w,r,i)),o&&(w=cn(w,o,s)),d||g){var x=l.placeholder,j=m(w,x);if(v-=j.length,v<c){var k=a?te(a):E,A=xs(c-v,0),R=d?j:E,T=d?E:j,I=d?w:E,F=d?E:w;e|=d?C:q,e&=~(d?q:C),_||(e&=~(O|S));var P=[t,e,n,I,R,F,T,k,u,A],D=Cn.apply(E,P);return er(t)&&Qs(D,P),D.placeholder=x,D}}var B=h?n:this,N=p?B[t]:t;return a&&(w=ur(w,a)),f&&u<w.length&&(w.length=u),this&&this!==ne&&this instanceof l&&(N=y||yn(t)),N.apply(B,w)}var f=e&F,h=e&O,p=e&S,d=e&T,_=e&R,g=e&I,y=p?E:yn(t);return l}function qn(t,e,n){var r=t.length;if(e=+e,r>=e||!bs(e))return"";var i=e-r;return n=null==n?" ":n+"",yo(n,gs(i/n.length)).slice(0,i)}function Fn(t,e,n,r){function i(){for(var e=-1,a=arguments.length,u=-1,c=r.length,l=Uo(c+a);++u<c;)l[u]=r[u];for(;a--;)l[u++]=arguments[++e];var f=this&&this!==ne&&this instanceof i?s:t;return f.apply(o?n:this,l)}var o=e&O,s=yn(t);return i}function Pn(t){var e=Vo[t];return function(t,n){return n=n===E?0:+n||0,n?(n=cs(10,n),e(t*n)/n):e(t)}}function Dn(t){return function(e,n,r,i){var o=Un(r);return null==r&&o===be?rn(e,n,t):on(e,n,o(r,i,1),t)}}function Bn(t,e,n,r,i,o,s,a){var u=e&S;if(!u&&"function"!=typeof t)throw new Yo(Q);var c=r?r.length:0;if(c||(e&=~(C|q),r=i=E),c-=i?i.length:0,e&q){var l=r,f=i;r=i=E}var h=u?E:Us(t),p=[t,e,n,r,i,l,f,o,s,a];if(h&&(ir(p,h),e=p[1],a=p[9]),p[9]=null==a?u?0:t.length:xs(a-c,0)||0,e==O)var d=dn(p[0],p[2]);else d=e!=C&&e!=(O|C)||p[4].length?Cn.apply(E,p):Fn.apply(E,p);var _=h?Ms:Qs;return _(d,p)}function Nn(t,e,n,r,i,o,s){var a=-1,u=t.length,c=e.length;if(u!=c&&!(i&&c>u))return!1;for(;++a<u;){var l=t[a],f=e[a],h=r?r(i?f:l,i?l:f,a):E;if(h!==E){if(h)continue;return!1}if(i){if(!he(e,function(t){return l===t||n(l,t,r,i,o,s)}))return!1}else if(l!==f&&!n(l,f,r,i,o,s))return!1}return!0}function Ln(t,e,n){switch(n){case J:case K:return+t==+e;case H:return t.name==e.name&&t.message==e.message;case X:return t!=+t?e!=+e:t==+e;case tt:case nt:return t==e+""}return!1}function Mn(t,e,n,r,i,o,s){var a=Ma(t),u=a.length,c=Ma(e),l=c.length;if(u!=l&&!i)return!1;for(var f=u;f--;){var h=a[f];if(!(i?h in e:es.call(e,h)))return!1}for(var p=i;++f<u;){h=a[f];var d=t[h],_=e[h],g=r?r(i?_:d,i?d:_,h):E;if(!(g===E?n(d,_,r,i,o,s):g))return!1;p||(p="constructor"==h)}if(!p){var y=t.constructor,v=e.constructor;if(y!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v))return!1}return!0}function Un(t,n,r){var i=e.callback||Ao;return i=i===Ao?be:i,r?i(t,n,r):i}function Wn(t){for(var e=t.name,n=Fs[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Qn(t,n,r){var i=e.indexOf||kr;return i=i===kr?o:i,t?i(t,n,r):i}function zn(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function Vn(t,e){var n=null==t?E:t[e];return Bi(n)?n:E}function $n(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=js(e,t+s);break;case"takeRight":t=xs(t,e-s)}}return{start:t,end:e}}function Jn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&es.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Kn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Jo),new e}
function Hn(t,e,n){var r=t.constructor;switch(e){case it:return an(t);case J:case K:return new r((+t));case ot:case st:case at:case ut:case ct:case lt:case ft:case ht:case pt:var i=t.buffer;return new r(n?an(i):i,t.byteOffset,t.length);case X:case nt:return new r(t);case tt:var o=new r(t.source,Ct.exec(t));o.lastIndex=t.lastIndex}return o}function Yn(t,e,n){null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Fe(t,Ke(e,0,-1)),e=Ar(e));var r=null==t?t:t[e];return null==r?E:r.apply(t,n)}function Gn(t){return null!=t&&nr(Ws(t))}function Xn(t,e){return t="number"==typeof t||Pt.test(t)?+t:-1,e=null==e?Cs:e,t>-1&&t%1==0&&t<e}function Zn(t,e,n){if(!Fi(n))return!1;var r=typeof e;if("number"==r?Gn(n)&&Xn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;if("string"==n&&Et.test(t)||"number"==n)return!0;if(Ra(t))return!1;var r=!kt.test(t);return r||null!=e&&t in fr(e)}function er(t){var n=Wn(t);if(!(n in G.prototype))return!1;var r=e[n];if(t===r)return!0;var i=Us(r);return!!i&&t===i[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Cs}function rr(t){return t===t&&!Fi(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,o=i<F,s=r==F&&n==T||r==F&&n==P&&t[7].length<=e[8]||r==(F|P)&&n==T;if(!o&&!s)return t;r&O&&(t[2]=e[2],i|=n&O?0:R);var a=e[3];if(a){var u=t[3];t[3]=u?un(u,a,e[4]):te(a),t[4]=u?m(t[3],z):te(e[4])}return a=e[5],a&&(u=t[5],t[5]=u?cn(u,a,e[6]):te(a),t[6]=u?m(t[5],z):te(e[6])),a=e[7],a&&(t[7]=te(a)),r&F&&(t[8]=null==t[8]?e[8]:js(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function or(t,e){return t===E?e:Ta(t,e,or)}function sr(t,e){t=fr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function ar(t,e){var n={};return Te(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ur(t,e){for(var n=t.length,r=js(e.length,n),i=te(t);r--;){var o=e[r];t[r]=Xn(o,n)?i[o]:E}return t}function cr(t){for(var e=to(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Ra(t)||Ei(t)),o=-1,s=[];++o<n;){var a=e[o];(i&&Xn(a,r)||es.call(t,a))&&s.push(a)}return s}function lr(t){return null==t?[]:Gn(t)?Fi(t)?t:Jo(t):oo(t)}function fr(t){return Fi(t)?t:Jo(t)}function hr(t){if(Ra(t))return t;var e=[];return a(t).replace(At,function(t,n,r,i){e.push(r?i.replace(Tt,"$1"):n||t)}),e}function pr(t){return t instanceof G?t.clone():new v(t.__wrapped__,t.__chain__,te(t.__actions__))}function dr(t,e,n){e=(n?Zn(t,e,n):null==e)?1:xs(vs(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,s=Uo(gs(i/e));r<i;)s[++o]=Ke(t,r,r+=e);return s}function _r(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function gr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),Ke(t,e<0?0:e)):[]}function yr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Ke(t,0,e<0?0:e)):[]}function vr(t,e,n){return t&&t.length?en(t,Un(e,n,3),!0,!0):[]}function mr(t,e,n){return t&&t.length?en(t,Un(e,n,3),!0):[]}function br(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Zn(t,e,n)&&(n=0,r=i),Ae(t,e,n,r)):[]}function wr(t){return t?t[0]:E}function xr(t,e,n){var r=t?t.length:0;return n&&Zn(t,e,n)&&(e=!1),r?Re(t,e):[]}function jr(t){var e=t?t.length:0;return e?Re(t,!0):[]}function kr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?xs(r+n,0):n;else if(n){var i=rn(t,e);return i<r&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return o(t,e,n||0)}function Er(t){return yr(t,1)}function Ar(t){var e=t?t.length:0;return e?t[e-1]:E}function Or(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?xs(r+n,0):js(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return g(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Sr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Qn(),i=t.length;++n<i;)for(var o=0,s=t[n];(o=r(e,s,o))>-1;)ps.call(e,o,1);return e}function Rr(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],s=t.length;for(e=Un(e,n,3);++i<s;){var a=t[i];e(a,i,t)&&(r.push(a),o.push(i))}return Ve(t,o),r}function Tr(t){return gr(t,1)}function Ir(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Zn(t,e,n)&&(e=0,n=r),Ke(t,e,n)):[]}function Cr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),Ke(t,0,e<0?0:e)):[]}function qr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Ke(t,e<0?0:e)):[]}function Fr(t,e,n){return t&&t.length?en(t,Un(e,n,3),!1,!0):[]}function Pr(t,e,n){return t&&t.length?en(t,Un(e,n,3)):[]}function Dr(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Zn(t,e,r)?E:e,e=!1);var s=Un();return null==n&&s===be||(n=s(n,r,3)),e&&Qn()==o?b(t,n):Ze(t,n)}function Br(t){if(!t||!t.length)return[];var e=-1,n=0;t=ae(t,function(t){if(Gn(t))return n=xs(t.length,n),!0});for(var r=Uo(n);++e<n;)r[e]=ue(t,Qe(e));return r}function Nr(t,e,n){var r=t?t.length:0;if(!r)return[];var i=Br(t);return null==e?i:(e=sn(e,n,4),ue(i,function(t){return le(t,e,E,!0)}))}function Lr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Gn(n))var r=r?ce(je(r,n),je(n,r)):n}return r?Ze(r):[]}function Mr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Ra(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Ur(t){var n=e(t);return n.__chain__=!0,n}function Wr(t,e,n){return e.call(n,t),t}function Qr(t,e,n){return e.call(n,t)}function zr(){return Ur(this)}function Vr(){return new v(this.value(),this.__chain__)}function $r(t){for(var e,r=this;r instanceof n;){var i=pr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Jr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof G){var n=t;return this.__actions__.length&&(n=new G(this)),n=n.reverse(),n.__actions__.push({func:Qr,args:[e],thisArg:E}),new v(n,this.__chain__)}return this.thru(e)}function Kr(){return this.value()+""}function Hr(){return nn(this.__wrapped__,this.__actions__)}function Yr(t,e,n){var r=Ra(t)?oe:ke;return n&&Zn(t,e,n)&&(e=E),"function"==typeof e&&n===E||(e=Un(e,n,3)),r(t,e)}function Gr(t,e,n){var r=Ra(t)?ae:Oe;return e=Un(e,n,3),r(t,e)}function Xr(t,e){return ia(t,Le(e))}function Zr(t,e,n,r){var i=t?Ws(t):0;return nr(i)||(t=oo(t),i=t.length),n="number"!=typeof n||r&&Zn(e,n,r)?0:n<0?xs(i+n,0):n||0,"string"==typeof t||!Ra(t)&&Wi(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Qn(t,e,n)>-1}function ti(t,e,n){var r=Ra(t)?ue:Ne;return e=Un(e,n,3),r(t,e)}function ei(t,e){return ti(t,Fo(e))}function ni(t,e,n){var r=Ra(t)?ae:Oe;return e=Un(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Zn(t,e,n):null==e){t=lr(t);var r=t.length;return r>0?t[$e(0,r-1)]:E}var i=-1,o=Ji(t),r=o.length,s=r-1;for(e=js(e<0?0:+e||0,r);++i<e;){var a=$e(i,s),u=o[a];o[a]=o[i],o[i]=u}return o.length=e,o}function ii(t){return ri(t,Ss)}function oi(t){var e=t?Ws(t):0;return nr(e)?e:Ma(t).length}function si(t,e,n){var r=Ra(t)?he:He;return n&&Zn(t,e,n)&&(e=E),"function"==typeof e&&n===E||(e=Un(e,n,3)),r(t,e)}function ai(t,e,n){if(null==t)return[];n&&Zn(t,e,n)&&(e=E);var r=-1;e=Un(e,n,3);var i=Ne(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return Ye(i,l)}function ui(t,e,n,r){return null==t?[]:(r&&Zn(e,n,r)&&(n=E),Ra(e)||(e=null==e?[]:[e]),Ra(n)||(n=null==n?[]:[n]),Ge(t,e,n))}function ci(t,e){return Gr(t,Le(e))}function li(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Yo(Q);var n=t;t=e,e=n}return t=bs(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function fi(t,e,n){return n&&Zn(t,e,n)&&(e=E),e=t&&null==e?t.length:xs(+e||0,0),Bn(t,F,E,E,E,E,e)}function hi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Yo(Q);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=E),n}}function pi(t,e,n){function r(){p&&as(p),c&&as(c),_=0,c=p=d=E}function i(e,n){n&&as(n),c=p=d=E,e&&(_=_a(),l=t.apply(h,u),p||c||(u=h=E))}function o(){var t=e-(_a()-f);t<=0||t>e?i(d,c):p=hs(o,t)}function s(){i(y,p)}function a(){if(u=arguments,f=_a(),h=this,d=y&&(p||!v),g===!1)var n=v&&!p;else{c||v||(_=f);var r=g-(f-_),i=r<=0||r>g;i?(c&&(c=as(c)),_=f,l=t.apply(h,u)):c||(c=hs(s,r))}return i&&p?p=as(p):p||e===g||(p=hs(o,e)),n&&(i=!0,l=t.apply(h,u)),!i||p||c||(u=h=E),l}var u,c,l,f,h,p,d,_=0,g=!1,y=!0;if("function"!=typeof t)throw new Yo(Q);if(e=e<0?0:+e||0,n===!0){var v=!0;y=!1}else Fi(n)&&(v=!!n.leading,g="maxWait"in n&&xs(+n.maxWait||0,e),y="trailing"in n?!!n.trailing:y);return a.cancel=r,a}function di(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Yo(Q);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new di.Cache,n}function _i(t){if("function"!=typeof t)throw new Yo(Q);return function(){return!t.apply(this,arguments)}}function gi(t){return hi(2,t)}function yi(t,e){if("function"!=typeof t)throw new Yo(Q);return e=xs(e===E?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=xs(n.length-e,0),o=Uo(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var s=Uo(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=o,t.apply(this,s)}}function vi(t){if("function"!=typeof t)throw new Yo(Q);return function(e){return t.apply(this,e)}}function mi(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Yo(Q);return n===!1?r=!1:Fi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pi(t,e,{leading:r,maxWait:+e,trailing:i})}function bi(t,e){return e=null==e?So:e,Bn(e,C,E,[t],[])}function wi(t,e,n,r){return e&&"boolean"!=typeof e&&Zn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?we(t,e,sn(n,r,1)):we(t,e)}function xi(t,e,n){return"function"==typeof e?we(t,!0,sn(e,n,1)):we(t,!0)}function ji(t,e){return t>e}function ki(t,e){return t>=e}function Ei(t){return y(t)&&Gn(t)&&es.call(t,"callee")&&!ls.call(t,"callee")}function Ai(t){return t===!0||t===!1||y(t)&&rs.call(t)==J}function Oi(t){return y(t)&&rs.call(t)==K}function Si(t){return!!t&&1===t.nodeType&&y(t)&&!Mi(t)}function Ri(t){return null==t||(Gn(t)&&(Ra(t)||Wi(t)||Ei(t)||y(t)&&qi(t.splice))?!t.length:!Ma(t).length)}function Ti(t,e,n,r){n="function"==typeof n?sn(n,r,3):E;var i=n?n(t,e):E;return i===E?Pe(t,e,n):!!i}function Ii(t){return y(t)&&"string"==typeof t.message&&rs.call(t)==H}function Ci(t){return"number"==typeof t&&bs(t)}function qi(t){return Fi(t)&&rs.call(t)==Y}function Fi(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Pi(t,e,n,r){return n="function"==typeof n?sn(n,r,3):E,Be(t,zn(e),n)}function Di(t){return Li(t)&&t!=+t}function Bi(t){return null!=t&&(qi(t)?os.test(ts.call(t)):y(t)&&Ft.test(t))}function Ni(t){return null===t}function Li(t){return"number"==typeof t||y(t)&&rs.call(t)==X}function Mi(t){var e;if(!y(t)||rs.call(t)!=Z||Ei(t)||!es.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Te(t,function(t,e){n=e}),n===E||es.call(t,n)}function Ui(t){return Fi(t)&&rs.call(t)==tt}function Wi(t){return"string"==typeof t||y(t)&&rs.call(t)==nt}function Qi(t){return y(t)&&nr(t.length)&&!!Wt[rs.call(t)]}function zi(t){return t===E}function Vi(t,e){return t<e}function $i(t,e){return t<=e}function Ji(t){var e=t?Ws(t):0;return nr(e)?e?te(t):[]:oo(t)}function Ki(t){return me(t,to(t))}function Hi(t,e,n){var r=Ps(t);return n&&Zn(t,e,n)&&(e=E),e?ye(r,e):r}function Yi(t){return qe(t,to(t))}function Gi(t,e,n){var r=null==t?E:Fe(t,hr(e),e+"");return r===E?n:r}function Xi(t,e){if(null==t)return!1;var n=es.call(t,e);if(!n&&!tr(e)){if(e=hr(e),t=1==e.length?t:Fe(t,Ke(e,0,-1)),null==t)return!1;e=Ar(e),n=es.call(t,e)}return n||nr(t.length)&&Xn(e,t.length)&&(Ra(t)||Ei(t))}function Zi(t,e,n){n&&Zn(t,e,n)&&(e=E);for(var r=-1,i=Ma(t),o=i.length,s={};++r<o;){var a=i[r],u=t[a];e?es.call(s,u)?s[u].push(a):s[u]=[a]:s[u]=a}return s}function to(t){if(null==t)return[];Fi(t)||(t=Jo(t));var e=t.length;e=e&&nr(e)&&(Ra(t)||Ei(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=Uo(e),s=e>0;++r<e;)o[r]=r+"";for(var a in t)s&&Xn(a,e)||"constructor"==a&&(i||!es.call(t,a))||o.push(a);return o}function eo(t){t=fr(t);for(var e=-1,n=Ma(t),r=n.length,i=Uo(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function no(t,e,n){var r=null==t?E:t[e];return r===E&&(null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Fe(t,Ke(e,0,-1)),r=null==t?E:t[Ar(e)]),r=r===E?n:r),qi(r)?r.call(t):r}function ro(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:hr(e);for(var i=-1,o=e.length,s=o-1,a=t;null!=a&&++i<o;){var u=e[i];Fi(a)&&(i==s?a[u]=n:null==a[u]&&(a[u]=Xn(e[i+1])?[]:{})),a=a[u]}return t}function io(t,e,n,r){var i=Ra(t)||Qi(t);if(e=Un(e,r,4),null==n)if(i||Fi(t)){var o=t.constructor;n=i?Ra(t)?new o:[]:Ps(qi(o)?o.prototype:E)}else n={};return(i?ee:Ie)(t,function(t,r,i){return e(n,t,r,i)}),n}function oo(t){return tn(t,Ma(t))}function so(t){return tn(t,to(t))}function ao(t,e,n){return e=+e||0,n===E?(n=e,e=0):n=+n||0,t>=js(e,n)&&t<xs(e,n)}function uo(t,e,n){n&&Zn(t,e,n)&&(e=n=E);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=As();return js(t+o*(e-t+us("1e-"+((o+"").length-1))),e)}return $e(t,e)}function co(t){return t=a(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function lo(t){return t=a(t),t&&t.replace(Dt,h).replace(Rt,"")}function fo(t,e,n){t=a(t),e+="";var r=t.length;return n=n===E?r:js(n<0?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function ho(t){return t=a(t),t&&bt.test(t)?t.replace(vt,p):t}function po(t){return t=a(t),t&&St.test(t)?t.replace(Ot,d):t||"(?:)"}function _o(t,e,n){t=a(t),e=+e;var r=t.length;if(r>=e||!bs(e))return t;var i=(e-r)/2,o=vs(i),s=gs(i);return n=qn("",s,n),n.slice(0,o)+t+n}function go(t,e,n){return(n?Zn(t,e,n):null==e)?e=0:e&&(e=+e),t=bo(t),Es(t,e||(qt.test(t)?16:10))}function yo(t,e){var n="";if(t=a(t),e=+e,e<1||!t||!bs(e))return n;do e%2&&(n+=t),e=vs(e/2),t+=t;while(e);return n}function vo(t,e,n){return t=a(t),n=null==n?0:js(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function mo(t,n,r){var i=e.templateSettings;r&&Zn(t,n,r)&&(n=r=E),t=a(t),n=ge(ye({},r||n),i,_e);var o,s,u=ge(ye({},n.imports),i.imports,_e),c=Ma(u),l=tn(u,c),f=0,h=n.interpolate||Bt,p="__p += '",d=Ko((n.escape||Bt).source+"|"+h.source+"|"+(h===jt?It:Bt).source+"|"+(n.evaluate||Bt).source+"|$","g"),g="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Ut+"]")+"\n";t.replace(d,function(e,n,r,i,a,u){return r||(r=i),p+=t.slice(f,u).replace(Nt,_),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),p+="';\n";var y=n.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(s?p.replace(dt,""):p).replace(_t,"$1").replace(gt,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=Ga(function(){return zo(c,g+"return "+p).apply(E,l)});if(v.source=p,Ii(v))throw v;return v}function bo(t,e,n){var r=t;return(t=a(t))?(n?Zn(r,e,n):null==e)?t.slice(w(t),x(t)+1):(e+="",t.slice(u(t,e),c(t,e)+1)):t}function wo(t,e,n){var r=t;return t=a(t),t?(n?Zn(r,e,n):null==e)?t.slice(w(t)):t.slice(u(t,e+"")):t}function xo(t,e,n){var r=t;return t=a(t),t?(n?Zn(r,e,n):null==e)?t.slice(0,x(t)+1):t.slice(0,c(t,e+"")+1):t}function jo(t,e,n){n&&Zn(t,e,n)&&(e=E);var r=D,i=B;if(null!=e)if(Fi(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?a(e.omission):i}else r=+e||0;if(t=a(t),r>=t.length)return t;var s=r-i.length;if(s<1)return i;var u=t.slice(0,s);if(null==o)return u+i;if(Ui(o)){if(t.slice(s).search(o)){var c,l,f=t.slice(0,s);for(o.global||(o=Ko(o.source,(Ct.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(f);)l=c.index;u=u.slice(0,null==l?s:l)}}else if(t.indexOf(o,s)!=s){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i}function ko(t){return t=a(t),t&&mt.test(t)?t.replace(yt,j):t}function Eo(t,e,n){return n&&Zn(t,e,n)&&(e=E),t=a(t),t.match(e||Lt)||[]}function Ao(t,e,n){return n&&Zn(t,e,n)&&(e=E),y(t)?Ro(t):be(t,e)}function Oo(t){return function(){return t}}function So(t){return t}function Ro(t){return Le(we(t,!0))}function To(t,e){return Me(t,we(e,!0))}function Io(t,e,n){if(null==n){var r=Fi(e),i=r?Ma(e):E,o=i&&i.length?qe(e,i):E;(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=qe(e,Ma(e)));var s=!0,a=-1,u=qi(t),c=o.length;n===!1?s=!1:Fi(n)&&"chain"in n&&(s=n.chain);for(;++a<c;){var l=o[a],f=e[l];t[l]=f,u&&(t.prototype[l]=function(e){return function(){var n=this.__chain__;if(s||n){var r=t(this.__wrapped__),i=r.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,ce([this.value()],arguments))}}(f))}return t}function Co(){return ne._=is,this}function qo(){}function Fo(t){return tr(t)?Qe(t):ze(t)}function Po(t){return function(e){return Fe(t,hr(e),e+"")}}function Do(t,e,n){n&&Zn(t,e,n)&&(e=n=E),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=xs(gs((e-t)/(n||1)),0),o=Uo(i);++r<i;)o[r]=t,t+=n;return o}function Bo(t,e,n){if(t=vs(t),t<1||!bs(t))return[];var r=-1,i=Uo(js(t,Rs));for(e=sn(e,n,1);++r<t;)r<Rs?i[r]=e(r):e(r);return i}function No(t){var e=++ns;return a(t)+e}function Lo(t,e){return(+t||0)+(+e||0)}function Mo(t,e,n){return n&&Zn(t,e,n)&&(e=E),e=Un(e,n,3),1==e.length?pe(Ra(t)?t:lr(t),e):Xe(t,e)}t=t?re.defaults(ne.Object(),t,re.pick(ne,Mt)):ne;var Uo=t.Array,Wo=t.Date,Qo=t.Error,zo=t.Function,Vo=t.Math,$o=t.Number,Jo=t.Object,Ko=t.RegExp,Ho=t.String,Yo=t.TypeError,Go=Uo.prototype,Xo=Jo.prototype,Zo=Ho.prototype,ts=zo.prototype.toString,es=Xo.hasOwnProperty,ns=0,rs=Xo.toString,is=ne._,os=Ko("^"+ts.call(es).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ss=t.ArrayBuffer,as=t.clearTimeout,us=t.parseFloat,cs=Vo.pow,ls=Xo.propertyIsEnumerable,fs=Vn(t,"Set"),hs=t.setTimeout,ps=Go.splice,ds=t.Uint8Array,_s=Vn(t,"WeakMap"),gs=Vo.ceil,ys=Vn(Jo,"create"),vs=Vo.floor,ms=Vn(Uo,"isArray"),bs=t.isFinite,ws=Vn(Jo,"keys"),xs=Vo.max,js=Vo.min,ks=Vn(Wo,"now"),Es=t.parseInt,As=Vo.random,Os=$o.NEGATIVE_INFINITY,Ss=$o.POSITIVE_INFINITY,Rs=4294967295,Ts=Rs-1,Is=Rs>>>1,Cs=9007199254740991,qs=_s&&new _s,Fs={};e.support={};e.templateSettings={escape:wt,evaluate:xt,interpolate:jt,variable:"",imports:{_:e}};var Ps=function(){function t(){}return function(e){if(Fi(e)){t.prototype=e;var n=new t;t.prototype=E}return n||{}}}(),Ds=hn(Ie),Bs=hn(Ce,!0),Ns=pn(),Ls=pn(!0),Ms=qs?function(t,e){return qs.set(t,e),t}:So,Us=qs?function(t){return qs.get(t)}:qo,Ws=Qe("length"),Qs=function(){var t=0,e=0;return function(n,r){var i=_a(),o=L-(i-e);if(e=i,o>0){if(++t>=N)return n}else t=0;return Ms(n,r)}}(),zs=yi(function(t,e){return y(t)&&Gn(t)?je(t,Re(e,!1,!0)):[]}),Vs=xn(),$s=xn(!0),Js=yi(function(t){for(var e=t.length,n=e,r=Uo(f),i=Qn(),s=i==o,a=[];n--;){var u=t[n]=Gn(u=t[n])?u:[];r[n]=s&&u.length>=120?_n(n&&u):null}var c=t[0],l=-1,f=c?c.length:0,h=r[0];t:for(;++l<f;)if(u=c[l],(h?Gt(h,u):i(a,u,0))<0){for(var n=e;--n;){var p=r[n];if((p?Gt(p,u):i(t[n],u,0))<0)continue t}h&&h.push(u),a.push(u)}return a}),Ks=yi(function(t,e){e=Re(e);var n=ve(t,e);return Ve(t,e.sort(r)),n}),Hs=Dn(),Ys=Dn(!0),Gs=yi(function(t){return Ze(Re(t,!1,!0))}),Xs=yi(function(t,e){return Gn(t)?je(t,e):[]}),Zs=yi(Br),ta=yi(function(t){var e=t.length,n=e>2?t[e-2]:E,r=e>1?t[e-1]:E;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):E,r=E),t.length=e,Nr(t,n,r)}),ea=yi(function(t){return t=Re(t),this.thru(function(e){return Zt(Ra(e)?e:[fr(e)],t)})}),na=yi(function(t,e){return ve(t,Re(e))}),ra=ln(function(t,e,n){es.call(t,n)?++t[n]:t[n]=1}),ia=wn(Ds),oa=wn(Bs,!0),sa=En(ee,Ds),aa=En(ie,Bs),ua=ln(function(t,e,n){es.call(t,n)?t[n].push(e):t[n]=[e]}),ca=ln(function(t,e,n){t[n]=e}),la=yi(function(t,e,n){var r=-1,i="function"==typeof e,o=tr(e),s=Gn(t)?Uo(t.length):[];return Ds(t,function(t){var a=i?e:o&&null!=t?t[e]:E;s[++r]=a?a.apply(t,n):Yn(t,e,n)}),s}),fa=ln(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),ha=In(le,Ds),pa=In(fe,Bs),da=yi(function(t,e){if(null==t)return[];var n=e[2];return n&&Zn(e[0],e[1],n)&&(e.length=1),Ge(t,Re(e),[])}),_a=ks||function(){return(new Wo).getTime()},ga=yi(function(t,e,n){var r=O;if(n.length){var i=m(n,ga.placeholder);r|=C}return Bn(t,r,e,n,i)}),ya=yi(function(t,e){e=e.length?Re(e):Yi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Bn(t[i],O,t)}return t}),va=yi(function(t,e,n){var r=O|S;if(n.length){var i=m(n,va.placeholder);r|=C}return Bn(e,r,t,n,i)}),ma=vn(T),ba=vn(I),wa=yi(function(t,e){return xe(t,1,e)}),xa=yi(function(t,e,n){return xe(t,e,n)}),ja=kn(),ka=kn(!0),Ea=yi(function(t,e){if(e=Re(e),"function"!=typeof t||!oe(e,s))throw new Yo(Q);var n=e.length;return yi(function(r){for(var i=js(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Aa=Tn(C),Oa=Tn(q),Sa=yi(function(t,e){return Bn(t,P,E,E,E,Re(e))}),Ra=ms||function(t){return y(t)&&nr(t.length)&&rs.call(t)==$},Ta=fn(Ue),Ia=fn(function(t,e,n){return n?ge(t,e,n):ye(t,e)}),Ca=mn(Ia,de),qa=mn(Ta,or),Fa=jn(Ie),Pa=jn(Ce),Da=An(Ns),Ba=An(Ls),Na=On(Ie),La=On(Ce),Ma=ws?function(t){var e=null==t?E:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Gn(t)?cr(t):Fi(t)?ws(t):[]}:cr,Ua=Sn(!0),Wa=Sn(),Qa=yi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Re(e),Ho);return sr(t,je(to(t),e))}var n=sn(e[0],e[1],3);return ar(t,function(t,e,r){return!n(t,e,r)})}),za=yi(function(t,e){return null==t?{}:"function"==typeof e[0]?ar(t,sn(e[0],e[1],3)):sr(t,Re(e))}),Va=gn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),$a=gn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ja=Rn(),Ka=Rn(!0),Ha=gn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Ya=gn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ga=yi(function(t,e){try{return t.apply(E,e)}catch(n){return Ii(n)?n:new Qo(n)}}),Xa=yi(function(t,e){return function(n){return Yn(n,t,e)}}),Za=yi(function(t,e){return function(n){return Yn(t,n,e)}}),tu=Pn("ceil"),eu=Pn("floor"),nu=bn(ji,Os),ru=bn(Vi,Ss),iu=Pn("round");return e.prototype=n.prototype,v.prototype=Ps(n.prototype),v.prototype.constructor=v,G.prototype=Ps(n.prototype),G.prototype.constructor=G,Vt.prototype["delete"]=$t,Vt.prototype.get=Jt,Vt.prototype.has=Kt,Vt.prototype.set=Ht,Yt.prototype.push=Xt,di.Cache=Vt,e.after=li,e.ary=fi,e.assign=Ia,e.at=na,e.before=hi,e.bind=ga,e.bindAll=ya,e.bindKey=va,e.callback=Ao,e.chain=Ur,e.chunk=dr,e.compact=_r,e.constant=Oo,e.countBy=ra,e.create=Hi,e.curry=ma,e.curryRight=ba,e.debounce=pi,e.defaults=Ca,e.defaultsDeep=qa,e.defer=wa,e.delay=xa,e.difference=zs,e.drop=gr,e.dropRight=yr,e.dropRightWhile=vr,e.dropWhile=mr,e.fill=br,e.filter=Gr,e.flatten=xr,e.flattenDeep=jr,e.flow=ja,e.flowRight=ka,e.forEach=sa,e.forEachRight=aa,e.forIn=Da,e.forInRight=Ba,e.forOwn=Na,e.forOwnRight=La,e.functions=Yi,e.groupBy=ua,e.indexBy=ca,e.initial=Er,e.intersection=Js,e.invert=Zi,e.invoke=la,e.keys=Ma,e.keysIn=to,e.map=ti,e.mapKeys=Ua,e.mapValues=Wa,e.matches=Ro,e.matchesProperty=To,e.memoize=di,e.merge=Ta,e.method=Xa,e.methodOf=Za,e.mixin=Io,e.modArgs=Ea,e.negate=_i,e.omit=Qa,e.once=gi,e.pairs=eo,e.partial=Aa,e.partialRight=Oa,e.partition=fa,e.pick=za,e.pluck=ei,e.property=Fo,e.propertyOf=Po,e.pull=Sr,e.pullAt=Ks,e.range=Do,e.rearg=Sa,e.reject=ni,e.remove=Rr,e.rest=Tr,e.restParam=yi,e.set=ro,e.shuffle=ii,e.slice=Ir,e.sortBy=ai,e.sortByAll=da,e.sortByOrder=ui,e.spread=vi,e.take=Cr,e.takeRight=qr,e.takeRightWhile=Fr,e.takeWhile=Pr,e.tap=Wr,e.throttle=mi,e.thru=Qr,e.times=Bo,e.toArray=Ji,e.toPlainObject=Ki,e.transform=io,e.union=Gs,e.uniq=Dr,e.unzip=Br,e.unzipWith=Nr,e.values=oo,e.valuesIn=so,e.where=ci,e.without=Xs,e.wrap=bi,e.xor=Lr,e.zip=Zs,e.zipObject=Mr,e.zipWith=ta,e.backflow=ka,e.collect=ti,e.compose=ka,e.each=sa,e.eachRight=aa,e.extend=Ia,e.iteratee=Ao,e.methods=Yi,e.object=Mr,e.select=Gr,e.tail=Tr,e.unique=Dr,Io(e,e),e.add=Lo,e.attempt=Ga,e.camelCase=Va,e.capitalize=co,e.ceil=tu,e.clone=wi,e.cloneDeep=xi,e.deburr=lo,e.endsWith=fo,e.escape=ho,e.escapeRegExp=po,e.every=Yr,e.find=ia,e.findIndex=Vs,e.findKey=Fa,e.findLast=oa,e.findLastIndex=$s,e.findLastKey=Pa,e.findWhere=Xr,e.first=wr,e.floor=eu,e.get=Gi,e.gt=ji,e.gte=ki,e.has=Xi,e.identity=So,e.includes=Zr,e.indexOf=kr,e.inRange=ao,e.isArguments=Ei,e.isArray=Ra,e.isBoolean=Ai,e.isDate=Oi,e.isElement=Si,e.isEmpty=Ri,e.isEqual=Ti,e.isError=Ii,e.isFinite=Ci,e.isFunction=qi,e.isMatch=Pi,e.isNaN=Di,e.isNative=Bi,e.isNull=Ni,e.isNumber=Li,e.isObject=Fi,e.isPlainObject=Mi,e.isRegExp=Ui,e.isString=Wi,e.isTypedArray=Qi,e.isUndefined=zi,e.kebabCase=$a,e.last=Ar,e.lastIndexOf=Or,e.lt=Vi,e.lte=$i,e.max=nu,e.min=ru,e.noConflict=Co,e.noop=qo,e.now=_a,e.pad=_o,e.padLeft=Ja,e.padRight=Ka,e.parseInt=go,e.random=uo,e.reduce=ha,e.reduceRight=pa,e.repeat=yo,e.result=no,e.round=iu,e.runInContext=k,e.size=oi,e.snakeCase=Ha,e.some=si,e.sortedIndex=Hs,e.sortedLastIndex=Ys,e.startCase=Ya,e.startsWith=vo,e.sum=Mo,e.template=mo,e.trim=bo,e.trimLeft=wo,e.trimRight=xo,e.trunc=jo,e.unescape=ko,e.uniqueId=No,e.words=Eo,e.all=Yr,e.any=si,e.contains=Zr,e.eq=Ti,e.detect=ia,e.foldl=ha,e.foldr=pa,e.head=wr,e.include=Zr,e.inject=ha,Io(e,function(){var t={};return Ie(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=A,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){G.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new G(this);n=null==n?1:xs(vs(n)||0,0);var i=this.clone();return r?i.__takeCount__=js(i.__takeCount__,n):i.__views__.push({size:n,type:t+(i.__dir__<0?"Right":"")}),i},G.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=W;G.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Un(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");G.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");G.prototype[t]=function(){return this.__filtered__?new G(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Le:Fo;G.prototype[t]=function(t){return this[n](r(t))}}),G.prototype.compact=function(){return this.filter(So)},G.prototype.reject=function(t,e){return t=Un(t,e,1),this.filter(function(e){return!t(e)})},G.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new G(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==E&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n)},G.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},G.prototype.toArray=function(){return this.take(Ss)},Ie(G.prototype,function(t,n){var r=/^(?:filter|map|reject)|While$/.test(n),i=/^(?:first|last)$/.test(n),o=e[i?"take"+("last"==n?"Right":""):n];o&&(e.prototype[n]=function(){var e=i?[1]:arguments,n=this.__chain__,s=this.__wrapped__,a=!!this.__actions__.length,u=s instanceof G,c=e[0],l=u||Ra(s);l&&r&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=function(t){return i&&n?o(t,1)[0]:o.apply(E,ce([t],e))},h={func:Qr,args:[f],thisArg:E},p=u&&!a;if(i&&!n)return p?(s=s.clone(),s.__actions__.push(h),t.call(s)):o.call(E,this.value())[0];if(!i&&l){s=p?s:new G(this);var d=t.apply(s,e);return d.__actions__.push(h),new v(d,n)}return this.thru(f)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Zo:Go)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Ie(G.prototype,function(t,n){var r=e[n];if(r){var i=r.name,o=Fs[i]||(Fs[i]=[]);o.push({name:n,func:r})}}),Fs[Cn(E,S).name]=[{name:"wrapper",func:E}],G.prototype.clone=et,G.prototype.reverse=rt,G.prototype.value=zt,e.prototype.chain=zr,e.prototype.commit=Vr,e.prototype.concat=ea,e.prototype.plant=$r,e.prototype.reverse=Jr,e.prototype.toString=Kr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Hr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var E,A="3.10.1",O=1,S=2,R=4,T=8,I=16,C=32,q=64,F=128,P=256,D=30,B="...",N=150,L=16,M=200,U=1,W=2,Q="Expected a function",z="__lodash_placeholder__",V="[object Arguments]",$="[object Array]",J="[object Boolean]",K="[object Date]",H="[object Error]",Y="[object Function]",G="[object Map]",X="[object Number]",Z="[object Object]",tt="[object RegExp]",et="[object Set]",nt="[object String]",rt="[object WeakMap]",it="[object ArrayBuffer]",ot="[object Float32Array]",st="[object Float64Array]",at="[object Int8Array]",ut="[object Int16Array]",ct="[object Int32Array]",lt="[object Uint8Array]",ft="[object Uint8ClampedArray]",ht="[object Uint16Array]",pt="[object Uint32Array]",dt=/\b__p \+= '';/g,_t=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39|#96);/g,vt=/[&<>"'`]/g,mt=RegExp(yt.source),bt=RegExp(vt.source),wt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,jt=/<%=([\s\S]+?)%>/g,kt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Et=/^\w*$/,At=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Ot=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,St=RegExp(Ot.source),Rt=/[\u0300-\u036f\ufe20-\ufe23]/g,Tt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ct=/\w*$/,qt=/^0[xX]/,Ft=/^\[object .+?Constructor\]$/,Pt=/^\d+$/,Dt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Bt=/($^)/,Nt=/['\n\r\u2028\u2029\\]/g,Lt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Mt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Ut=-1,Wt={};Wt[ot]=Wt[st]=Wt[at]=Wt[ut]=Wt[ct]=Wt[lt]=Wt[ft]=Wt[ht]=Wt[pt]=!0,Wt[V]=Wt[$]=Wt[it]=Wt[J]=Wt[K]=Wt[H]=Wt[Y]=Wt[G]=Wt[X]=Wt[Z]=Wt[tt]=Wt[et]=Wt[nt]=Wt[rt]=!1;var Qt={};Qt[V]=Qt[$]=Qt[it]=Qt[J]=Qt[K]=Qt[ot]=Qt[st]=Qt[at]=Qt[ut]=Qt[ct]=Qt[X]=Qt[Z]=Qt[tt]=Qt[nt]=Qt[lt]=Qt[ft]=Qt[ht]=Qt[pt]=!0,Qt[H]=Qt[Y]=Qt[G]=Qt[et]=Qt[rt]=!1;var zt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},$t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Jt={"function":!0,object:!0},Kt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Ht={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yt=Jt[typeof n]&&n&&!n.nodeType&&n,Gt=Jt[typeof e]&&e&&!e.nodeType&&e,Xt=Yt&&Gt&&"object"==typeof t&&t&&t.Object&&t,Zt=Jt[typeof self]&&self&&self.Object&&self,te=Jt[typeof window]&&window&&window.Object&&window,ee=Gt&&Gt.exports===Yt&&Yt,ne=Xt||te!==(this&&this.window)&&te||Zt||this,re=k();
"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ne._=re,define(function(){return re})):Yt&&Gt?ee?(Gt.exports=re)._=re:Yt._=re:ne._=re}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],108:[function(t,e,n){function r(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}e.exports=r},{}],109:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}e.exports=r},{}],110:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}e.exports=r},{}],111:[function(t,e,n){function r(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}e.exports=r},{}],112:[function(t,e,n){function r(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}e.exports=r},{}],113:[function(t,e,n){function r(t,e,n){for(var r=-1,o=i(e),s=o.length;++r<s;){var a=o[r],u=t[a],c=n(u,e[a],a,t,e);(c===c?c===u:u!==u)&&(void 0!==u||a in t)||(t[a]=c)}return t}var i=t("../object/keys");e.exports=r},{"../object/keys":171}],114:[function(t,e,n){function r(t,e){return null==e?t:i(e,o(e),t)}var i=t("./baseCopy"),o=t("../object/keys");e.exports=r},{"../object/keys":171,"./baseCopy":117}],115:[function(t,e,n){function r(t,e,n){var r=typeof t;return"function"==r?void 0===e?t:s(t,e,n):null==t?a:"object"==r?i(t):void 0===e?u(t):o(t,e)}var i=t("./baseMatches"),o=t("./baseMatchesProperty"),s=t("./bindCallback"),a=t("../utility/identity"),u=t("../utility/property");e.exports=r},{"../utility/identity":175,"../utility/property":176,"./baseMatches":128,"./baseMatchesProperty":129,"./bindCallback":135}],116:[function(t,e,n){function r(t,e,n,d,_,g,y){var m;if(n&&(m=_?n(t,d,_):n(t)),void 0!==m)return m;if(!h(t))return t;var b=f(t);if(b){if(m=u(t),!e)return i(t,m)}else{var x=N.call(t),j=x==v;if(x!=w&&x!=p&&(!j||_))return D[x]?c(t,x,e):_?t:{};if(m=l(j?{}:t),!e)return s(m,t)}g||(g=[]),y||(y=[]);for(var k=g.length;k--;)if(g[k]==t)return y[k];return g.push(t),y.push(m),(b?o:a)(t,function(i,o){m[o]=r(i,e,n,o,t,g,y)}),m}var i=t("./arrayCopy"),o=t("./arrayEach"),s=t("./baseAssign"),a=t("./baseForOwn"),u=t("./initCloneArray"),c=t("./initCloneByTag"),l=t("./initCloneObject"),f=t("../lang/isArray"),h=t("../lang/isObject"),p="[object Arguments]",d="[object Array]",_="[object Boolean]",g="[object Date]",y="[object Error]",v="[object Function]",m="[object Map]",b="[object Number]",w="[object Object]",x="[object RegExp]",j="[object Set]",k="[object String]",E="[object WeakMap]",A="[object ArrayBuffer]",O="[object Float32Array]",S="[object Float64Array]",R="[object Int8Array]",T="[object Int16Array]",I="[object Int32Array]",C="[object Uint8Array]",q="[object Uint8ClampedArray]",F="[object Uint16Array]",P="[object Uint32Array]",D={};D[p]=D[d]=D[A]=D[_]=D[g]=D[O]=D[S]=D[R]=D[T]=D[I]=D[b]=D[w]=D[x]=D[k]=D[C]=D[q]=D[F]=D[P]=!0,D[y]=D[v]=D[m]=D[j]=D[E]=!1;var B=Object.prototype,N=B.toString;e.exports=r},{"../lang/isArray":163,"../lang/isObject":166,"./arrayCopy":108,"./arrayEach":109,"./baseAssign":114,"./baseForOwn":122,"./initCloneArray":147,"./initCloneByTag":148,"./initCloneObject":149}],117:[function(t,e,n){function r(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}e.exports=r},{}],118:[function(t,e,n){var r=t("../lang/isObject"),i=function(){function t(){}return function(e){if(r(e)){t.prototype=e;var n=new t;t.prototype=void 0}return n||{}}}();e.exports=i},{"../lang/isObject":166}],119:[function(t,e,n){var r=t("./baseForOwn"),i=t("./createBaseEach"),o=i(r);e.exports=o},{"./baseForOwn":122,"./createBaseEach":138}],120:[function(t,e,n){var r=t("./createBaseFor"),i=r();e.exports=i},{"./createBaseFor":139}],121:[function(t,e,n){function r(t,e){return i(t,e,o)}var i=t("./baseFor"),o=t("../object/keysIn");e.exports=r},{"../object/keysIn":172,"./baseFor":120}],122:[function(t,e,n){function r(t,e){return i(t,e,o)}var i=t("./baseFor"),o=t("../object/keys");e.exports=r},{"../object/keys":171,"./baseFor":120}],123:[function(t,e,n){function r(t,e,n){if(null!=t){void 0!==n&&n in i(t)&&(e=[n]);for(var r=0,o=e.length;null!=t&&r<o;)t=t[e[r++]];return r&&r==o?t:void 0}}var i=t("./toObject");e.exports=r},{"./toObject":158}],124:[function(t,e,n){function r(t,e,n,a,u,c){return t===e||(null==t||null==e||!o(t)&&!s(e)?t!==t&&e!==e:i(t,e,r,n,a,u,c))}var i=t("./baseIsEqualDeep"),o=t("../lang/isObject"),s=t("./isObjectLike");e.exports=r},{"../lang/isObject":166,"./baseIsEqualDeep":125,"./isObjectLike":155}],125:[function(t,e,n){function r(t,e,n,r,h,_,g){var y=a(t),v=a(e),m=l,b=l;y||(m=d.call(t),m==c?m=f:m!=f&&(y=u(t))),v||(b=d.call(e),b==c?b=f:b!=f&&(v=u(e)));var w=m==f,x=b==f,j=m==b;if(j&&!y&&!w)return o(t,e,m);if(!h){var k=w&&p.call(t,"__wrapped__"),E=x&&p.call(e,"__wrapped__");if(k||E)return n(k?t.value():t,E?e.value():e,r,h,_,g)}if(!j)return!1;_||(_=[]),g||(g=[]);for(var A=_.length;A--;)if(_[A]==t)return g[A]==e;_.push(t),g.push(e);var O=(y?i:s)(t,e,n,r,h,_,g);return _.pop(),g.pop(),O}var i=t("./equalArrays"),o=t("./equalByTag"),s=t("./equalObjects"),a=t("../lang/isArray"),u=t("../lang/isTypedArray"),c="[object Arguments]",l="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty,d=h.toString;e.exports=r},{"../lang/isArray":163,"../lang/isTypedArray":168,"./equalArrays":141,"./equalByTag":142,"./equalObjects":143}],126:[function(t,e,n){function r(t,e,n){var r=e.length,s=r,a=!n;if(null==t)return!s;for(t=o(t);r--;){var u=e[r];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++r<s;){u=e[r];var c=u[0],l=t[c],f=u[1];if(a&&u[2]){if(void 0===l&&!(c in t))return!1}else{var h=n?n(l,f,c):void 0;if(!(void 0===h?i(f,l,n,!0):h))return!1}}return!0}var i=t("./baseIsEqual"),o=t("./toObject");e.exports=r},{"./baseIsEqual":124,"./toObject":158}],127:[function(t,e,n){function r(t,e){var n=-1,r=o(t)?Array(t.length):[];return i(t,function(t,i,o){r[++n]=e(t,i,o)}),r}var i=t("./baseEach"),o=t("./isArrayLike");e.exports=r},{"./baseEach":119,"./isArrayLike":150}],128:[function(t,e,n){function r(t){var e=o(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(void 0!==r||n in s(t)))}}return function(t){return i(t,e)}}var i=t("./baseIsMatch"),o=t("./getMatchData"),s=t("./toObject");e.exports=r},{"./baseIsMatch":126,"./getMatchData":145,"./toObject":158}],129:[function(t,e,n){function r(t,e){var n=a(t),r=u(t)&&c(e),p=t+"";return t=h(t),function(a){if(null==a)return!1;var u=p;if(a=f(a),(n||!r)&&!(u in a)){if(a=1==t.length?a:i(a,s(t,0,-1)),null==a)return!1;u=l(t),a=f(a)}return a[u]===e?void 0!==e||u in a:o(e,a[u],void 0,!0)}}var i=t("./baseGet"),o=t("./baseIsEqual"),s=t("./baseSlice"),a=t("../lang/isArray"),u=t("./isKey"),c=t("./isStrictComparable"),l=t("../array/last"),f=t("./toObject"),h=t("./toPath");e.exports=r},{"../array/last":102,"../lang/isArray":163,"./baseGet":123,"./baseIsEqual":124,"./baseSlice":133,"./isKey":153,"./isStrictComparable":156,"./toObject":158,"./toPath":159}],130:[function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}e.exports=r},{}],131:[function(t,e,n){function r(t){var e=t+"";return t=o(t),function(n){return i(n,t,e)}}var i=t("./baseGet"),o=t("./toPath");e.exports=r},{"./baseGet":123,"./toPath":159}],132:[function(t,e,n){function r(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}e.exports=r},{}],133:[function(t,e,n){function r(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,e<0&&(e=-e>i?0:i+e),n=void 0===n||n>i?i:+n||0,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}e.exports=r},{}],134:[function(t,e,n){function r(t){return null==t?"":t+""}e.exports=r},{}],135:[function(t,e,n){function r(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,s){return t.call(e,n,r,i,o,s)}}return function(){return t.apply(e,arguments)}}var i=t("../utility/identity");e.exports=r},{"../utility/identity":175}],136:[function(t,e,n){(function(t){function n(t){var e=new r(t.byteLength),n=new i(e);return n.set(new i(t)),e}var r=t.ArrayBuffer,i=t.Uint8Array;e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],137:[function(t,e,n){function r(t){return s(function(e,n){var r=-1,s=null==e?0:n.length,a=s>2?n[s-2]:void 0,u=s>2?n[2]:void 0,c=s>1?n[s-1]:void 0;for("function"==typeof a?(a=i(a,c,5),s-=2):(a="function"==typeof c?c:void 0,s-=a?1:0),u&&o(n[0],n[1],u)&&(a=s<3?void 0:a,s=1);++r<s;){var l=n[r];l&&t(e,l,a)}return e})}var i=t("./bindCallback"),o=t("./isIterateeCall"),s=t("../function/restParam");e.exports=r},{"../function/restParam":106,"./bindCallback":135,"./isIterateeCall":152}],138:[function(t,e,n){function r(t,e){return function(n,r){var a=n?i(n):0;if(!o(a))return t(n,r);for(var u=e?a:-1,c=s(n);(e?u--:++u<a)&&r(c[u],u,c)!==!1;);return n}}var i=t("./getLength"),o=t("./isLength"),s=t("./toObject");e.exports=r},{"./getLength":144,"./isLength":154,"./toObject":158}],139:[function(t,e,n){function r(t){return function(e,n,r){for(var o=i(e),s=r(e),a=s.length,u=t?a:-1;t?u--:++u<a;){var c=s[u];if(n(o[c],c,o)===!1)break}return e}}var i=t("./toObject");e.exports=r},{"./toObject":158}],140:[function(t,e,n){function r(t,e){return function(n,r,a,u){var c=arguments.length<3;return"function"==typeof r&&void 0===u&&s(n)?t(n,r,a,c):o(n,i(r,u,4),a,c,e)}}var i=t("./baseCallback"),o=t("./baseReduce"),s=t("../lang/isArray");e.exports=r},{"../lang/isArray":163,"./baseCallback":115,"./baseReduce":132}],141:[function(t,e,n){function r(t,e,n,r,o,s,a){var u=-1,c=t.length,l=e.length;if(c!=l&&!(o&&l>c))return!1;for(;++u<c;){var f=t[u],h=e[u],p=r?r(o?h:f,o?f:h,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!i(e,function(t){return f===t||n(f,t,r,o,s,a)}))return!1}else if(f!==h&&!n(f,h,r,o,s,a))return!1}return!0}var i=t("./arraySome");e.exports=r},{"./arraySome":112}],142:[function(t,e,n){function r(t,e,n){switch(n){case i:case o:return+t==+e;case s:return t.name==e.name&&t.message==e.message;case a:return t!=+t?e!=+e:t==+e;case u:case c:return t==e+""}return!1}var i="[object Boolean]",o="[object Date]",s="[object Error]",a="[object Number]",u="[object RegExp]",c="[object String]";e.exports=r},{}],143:[function(t,e,n){function r(t,e,n,r,o,a,u){var c=i(t),l=c.length,f=i(e),h=f.length;if(l!=h&&!o)return!1;for(var p=l;p--;){var d=c[p];if(!(o?d in e:s.call(e,d)))return!1}for(var _=o;++p<l;){d=c[p];var g=t[d],y=e[d],v=r?r(o?y:g,o?g:y,d):void 0;if(!(void 0===v?n(g,y,r,o,a,u):v))return!1;_||(_="constructor"==d)}if(!_){var m=t.constructor,b=e.constructor;if(m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b))return!1}return!0}var i=t("../object/keys"),o=Object.prototype,s=o.hasOwnProperty;e.exports=r},{"../object/keys":171}],144:[function(t,e,n){var r=t("./baseProperty"),i=r("length");e.exports=i},{"./baseProperty":130}],145:[function(t,e,n){function r(t){for(var e=o(t),n=e.length;n--;)e[n][2]=i(e[n][1]);return e}var i=t("./isStrictComparable"),o=t("../object/pairs");e.exports=r},{"../object/pairs":173,"./isStrictComparable":156}],146:[function(t,e,n){function r(t,e){var n=null==t?void 0:t[e];return i(n)?n:void 0}var i=t("../lang/isNative");e.exports=r},{"../lang/isNative":165}],147:[function(t,e,n){function r(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&o.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var i=Object.prototype,o=i.hasOwnProperty;e.exports=r},{}],148:[function(t,e,n){function r(t,e,n){var r=t.constructor;switch(e){case l:return i(t);case o:case s:return new r((+t));case f:case h:case p:case d:case _:case g:case y:case v:case m:var w=t.buffer;return new r(n?i(w):w,t.byteOffset,t.length);case a:case c:return new r(t);case u:var x=new r(t.source,b.exec(t));x.lastIndex=t.lastIndex}return x}var i=t("./bufferClone"),o="[object Boolean]",s="[object Date]",a="[object Number]",u="[object RegExp]",c="[object String]",l="[object ArrayBuffer]",f="[object Float32Array]",h="[object Float64Array]",p="[object Int8Array]",d="[object Int16Array]",_="[object Int32Array]",g="[object Uint8Array]",y="[object Uint8ClampedArray]",v="[object Uint16Array]",m="[object Uint32Array]",b=/\w*$/;e.exports=r},{"./bufferClone":136}],149:[function(t,e,n){function r(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}e.exports=r},{}],150:[function(t,e,n){function r(t){return null!=t&&o(i(t))}var i=t("./getLength"),o=t("./isLength");e.exports=r},{"./getLength":144,"./isLength":154}],151:[function(t,e,n){function r(t,e){return t="number"==typeof t||i.test(t)?+t:-1,e=null==e?o:e,t>-1&&t%1==0&&t<e}var i=/^\d+$/,o=9007199254740991;e.exports=r},{}],152:[function(t,e,n){function r(t,e,n){if(!s(n))return!1;var r=typeof e;if("number"==r?i(n)&&o(e,n.length):"string"==r&&e in n){var a=n[e];return t===t?t===a:a!==a}return!1}var i=t("./isArrayLike"),o=t("./isIndex"),s=t("../lang/isObject");e.exports=r},{"../lang/isObject":166,"./isArrayLike":150,"./isIndex":151}],153:[function(t,e,n){function r(t,e){var n=typeof t;if("string"==n&&a.test(t)||"number"==n)return!0;if(i(t))return!1;var r=!s.test(t);return r||null!=e&&t in o(e)}var i=t("../lang/isArray"),o=t("./toObject"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=r},{"../lang/isArray":163,"./toObject":158}],154:[function(t,e,n){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}var i=9007199254740991;e.exports=r},{}],155:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}e.exports=r},{}],156:[function(t,e,n){function r(t){return t===t&&!i(t)}var i=t("../lang/isObject");e.exports=r},{"../lang/isObject":166}],157:[function(t,e,n){function r(t){for(var e=u(t),n=e.length,r=n&&t.length,c=!!r&&a(r)&&(o(t)||i(t)),f=-1,h=[];++f<n;){var p=e[f];(c&&s(p,r)||l.call(t,p))&&h.push(p)}return h}var i=t("../lang/isArguments"),o=t("../lang/isArray"),s=t("./isIndex"),a=t("./isLength"),u=t("../object/keysIn"),c=Object.prototype,l=c.hasOwnProperty;e.exports=r},{"../lang/isArguments":162,"../lang/isArray":163,"../object/keysIn":172,"./isIndex":151,"./isLength":154}],158:[function(t,e,n){function r(t){return i(t)?t:Object(t)}var i=t("../lang/isObject");e.exports=r},{"../lang/isObject":166}],159:[function(t,e,n){function r(t){if(o(t))return t;var e=[];return i(t).replace(s,function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)}),e}var i=t("./baseToString"),o=t("../lang/isArray"),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,a=/\\(\\)?/g;e.exports=r},{"../lang/isArray":163,"./baseToString":134}],160:[function(t,e,n){function r(t,e,n,r){return e&&"boolean"!=typeof e&&s(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?i(t,e,o(n,r,3)):i(t,e)}var i=t("../internal/baseClone"),o=t("../internal/bindCallback"),s=t("../internal/isIterateeCall");e.exports=r},{"../internal/baseClone":116,"../internal/bindCallback":135,"../internal/isIterateeCall":152}],161:[function(t,e,n){function r(t,e,n){return"function"==typeof e?i(t,!0,o(e,n,3)):i(t,!0)}var i=t("../internal/baseClone"),o=t("../internal/bindCallback");e.exports=r},{"../internal/baseClone":116,"../internal/bindCallback":135}],162:[function(t,e,n){function r(t){return o(t)&&i(t)&&a.call(t,"callee")&&!u.call(t,"callee")}var i=t("../internal/isArrayLike"),o=t("../internal/isObjectLike"),s=Object.prototype,a=s.hasOwnProperty,u=s.propertyIsEnumerable;e.exports=r},{"../internal/isArrayLike":150,"../internal/isObjectLike":155}],163:[function(t,e,n){var r=t("../internal/getNative"),i=t("../internal/isLength"),o=t("../internal/isObjectLike"),s="[object Array]",a=Object.prototype,u=a.toString,c=r(Array,"isArray"),l=c||function(t){return o(t)&&i(t.length)&&u.call(t)==s};e.exports=l},{"../internal/getNative":146,"../internal/isLength":154,"../internal/isObjectLike":155}],164:[function(t,e,n){function r(t){return i(t)&&a.call(t)==o}var i=t("./isObject"),o="[object Function]",s=Object.prototype,a=s.toString;e.exports=r},{"./isObject":166}],165:[function(t,e,n){function r(t){return null!=t&&(i(t)?l.test(u.call(t)):o(t)&&s.test(t))}var i=t("./isFunction"),o=t("../internal/isObjectLike"),s=/^\[object .+?Constructor\]$/,a=Object.prototype,u=Function.prototype.toString,c=a.hasOwnProperty,l=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},{"../internal/isObjectLike":155,"./isFunction":164}],166:[function(t,e,n){function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=r},{}],167:[function(t,e,n){function r(t){var e;if(!s(t)||l.call(t)!=a||o(t)||!c.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return i(t,function(t,e){n=e}),void 0===n||c.call(t,n)}var i=t("../internal/baseForIn"),o=t("./isArguments"),s=t("../internal/isObjectLike"),a="[object Object]",u=Object.prototype,c=u.hasOwnProperty,l=u.toString;e.exports=r},{"../internal/baseForIn":121,"../internal/isObjectLike":155,"./isArguments":162}],168:[function(t,e,n){function r(t){return o(t)&&i(t.length)&&!!R[I.call(t)]}var i=t("../internal/isLength"),o=t("../internal/isObjectLike"),s="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",h="[object Map]",p="[object Number]",d="[object Object]",_="[object RegExp]",g="[object Set]",y="[object String]",v="[object WeakMap]",m="[object ArrayBuffer]",b="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",j="[object Int16Array]",k="[object Int32Array]",E="[object Uint8Array]",A="[object Uint8ClampedArray]",O="[object Uint16Array]",S="[object Uint32Array]",R={};R[b]=R[w]=R[x]=R[j]=R[k]=R[E]=R[A]=R[O]=R[S]=!0,R[s]=R[a]=R[m]=R[u]=R[c]=R[l]=R[f]=R[h]=R[p]=R[d]=R[_]=R[g]=R[y]=R[v]=!1;var T=Object.prototype,I=T.toString;e.exports=r},{"../internal/isLength":154,"../internal/isObjectLike":155}],169:[function(t,e,n){function r(t){return void 0===t}e.exports=r},{}],170:[function(t,e,n){var r=t("../internal/assignWith"),i=t("../internal/baseAssign"),o=t("../internal/createAssigner"),s=o(function(t,e,n){return n?r(t,e,n):i(t,e)});e.exports=s},{"../internal/assignWith":113,"../internal/baseAssign":114,"../internal/createAssigner":137}],171:[function(t,e,n){var r=t("../internal/getNative"),i=t("../internal/isArrayLike"),o=t("../lang/isObject"),s=t("../internal/shimKeys"),a=r(Object,"keys"),u=a?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&i(t)?s(t):o(t)?a(t):[]}:s;e.exports=u},{"../internal/getNative":146,"../internal/isArrayLike":150,"../internal/shimKeys":157,"../lang/isObject":166}],172:[function(t,e,n){function r(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(o(t)||i(t))&&e||0;for(var n=t.constructor,r=-1,c="function"==typeof n&&n.prototype===t,f=Array(e),h=e>0;++r<e;)f[r]=r+"";for(var p in t)h&&s(p,e)||"constructor"==p&&(c||!l.call(t,p))||f.push(p);return f}var i=t("../lang/isArguments"),o=t("../lang/isArray"),s=t("../internal/isIndex"),a=t("../internal/isLength"),u=t("../lang/isObject"),c=Object.prototype,l=c.hasOwnProperty;e.exports=r},{"../internal/isIndex":151,"../internal/isLength":154,"../lang/isArguments":162,"../lang/isArray":163,"../lang/isObject":166}],173:[function(t,e,n){function r(t){t=o(t);for(var e=-1,n=i(t),r=n.length,s=Array(r);++e<r;){var a=n[e];s[e]=[a,t[a]]}return s}var i=t("./keys"),o=t("../internal/toObject");e.exports=r},{"../internal/toObject":158,"./keys":171}],174:[function(t,e,n){function r(t,e,n,r){var h=u(t)||f(t);if(e=o(e,r,4),null==n)if(h||l(t)){var p=t.constructor;n=h?u(t)?new p:[]:s(c(p)?p.prototype:void 0)}else n={};return(h?i:a)(t,function(t,r,i){return e(n,t,r,i)}),n}var i=t("../internal/arrayEach"),o=t("../internal/baseCallback"),s=t("../internal/baseCreate"),a=t("../internal/baseForOwn"),u=t("../lang/isArray"),c=t("../lang/isFunction"),l=t("../lang/isObject"),f=t("../lang/isTypedArray");e.exports=r},{"../internal/arrayEach":109,"../internal/baseCallback":115,"../internal/baseCreate":118,"../internal/baseForOwn":122,"../lang/isArray":163,"../lang/isFunction":164,"../lang/isObject":166,"../lang/isTypedArray":168}],175:[function(t,e,n){function r(t){return t}e.exports=r},{}],176:[function(t,e,n){function r(t){return s(t)?i(t):o(t)}var i=t("../internal/baseProperty"),o=t("../internal/basePropertyDeep"),s=t("../internal/isKey");e.exports=r},{"../internal/baseProperty":130,"../internal/basePropertyDeep":131,"../internal/isKey":153}],177:[function(t,e,n){function r(t){var e=++o;return i(t)+e}var i=t("../internal/baseToString"),o=0;e.exports=r},{"../internal/baseToString":134}],178:[function(t,e,n){"use strict";function r(t){var e;if("/"===t.charAt(0))return e=t.split(" "),{host:e[0],database:e[1]};/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/\%25(\d\d)/g,"%$1"));var n=i.parse(t,!0);if(e={},n.query.application_name&&(e.application_name=n.query.application_name),n.query.fallback_application_name&&(e.fallback_application_name=n.query.fallback_application_name),e.port=n.port,"socket:"==n.protocol)return e.host=decodeURI(n.pathname),e.database=n.query.db,e.client_encoding=n.query.encoding,e;e.host=n.hostname;var r=n.pathname;r&&"/"===r.charAt(0)&&(r=n.pathname.slice(1)||null),e.database=r&&decodeURI(r);var o=(n.auth||":").split(":");e.user=o[0],e.password=o.splice(1).join(":");var s=n.query.ssl;return"true"!==s&&"1"!==s||(e.ssl=!0),e}var i=t("url");e.exports={parse:r}},{url:50}],179:[function(t,e,n){(function(n){function r(t){return this instanceof r?(u.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}e.exports=r;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},a=t("core-util-is");a.inherits=t("inherits");var u=t("./_stream_readable"),c=t("./_stream_writable");a.inherits(r,u),o(s(c.prototype),function(t){r.prototype[t]||(r.prototype[t]=c.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":181,"./_stream_writable":183,_process:28,"core-util-is":184,inherits:101}],180:[function(t,e,n){function r(t){return this instanceof r?void i.call(this,t):new r(t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":182,"core-util-is":184,inherits:101}],181:[function(t,e,n){(function(n){function r(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(S||(S=t("string_decoder/").StringDecoder),this.decoder=new S(e.encoding),this.encoding=e.encoding)}function i(e){t("./_stream_duplex");return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void A.call(this)):new i(e)}function o(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(O.isNullOrUndefined(n))e.reading=!1,e.ended||l(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||r||(n=e.decoder.write(n)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&f(t)),p(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=T)t=T;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||O.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return O.isBuffer(e)||O.isString(e)||O.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,f(t)}function f(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(R("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(function(){h(t)}):h(t))}function h(t){R("emit readable"),t.emit("readable"),v(t)}function p(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){d(t,e)}))}function d(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(R("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function _(t){return function(){var e=t._readableState;R("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&E.listenerCount(t,"data")&&(e.flowing=!0,v(t))}}function g(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(function(){y(t,e)}))}function y(t,e){e.resumeScheduled=!1,t.emit("resume"),v(t),e.flowing&&!e.reading&&t.read(0)}function v(t){var e=t._readableState;if(R("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function m(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!t||t>=i)n=o?r.join(""):k.concat(r,i),r.length=0;else if(t<r[0].length){var a=r[0];n=a.slice(0,t),r[0]=a.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new k(t);for(var u=0,c=0,l=r.length;c<l&&u<t;c++){var a=r[0],f=Math.min(t-u,a.length);o?n+=a.slice(0,f):a.copy(n,u,0,f),f<a.length?r[0]=a.slice(f):r.shift(),u+=f}}return n}function b(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function x(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}e.exports=i;var j=t("isarray"),k=t("buffer").Buffer;i.ReadableState=r;var E=t("events").EventEmitter;E.listenerCount||(E.listenerCount=function(t,e){return t.listeners(e).length});var A=t("stream"),O=t("core-util-is");O.inherits=t("inherits");var S,R=t("util");R=R&&R.debuglog?R.debuglog("stream"):function(){},O.inherits(i,A),i.prototype.push=function(t,e){var n=this._readableState;return O.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new k(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){return S||(S=t("string_decoder/").StringDecoder),this._readableState.decoder=new S(e),this._readableState.encoding=e,this};var T=8388608;i.prototype.read=function(t){R("read",t);var e=this._readableState,n=t;if((!O.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return R("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?b(this):f(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&b(this),null;var r=e.needReadable;R("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,R("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,R("reading or ended",r)),r&&(R("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=u(n,e));var i;return i=t>0?m(t,e):null,O.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&b(this),O.isNull(i)||this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){R("onunpipe"),t===f&&o()}function i(){R("onend"),t.end()}function o(){R("cleanup"),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("drain",g),t.removeListener("error",a),t.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",s),!h.awaitDrain||t._writableState&&!t._writableState.needDrain||g()}function s(e){R("ondata");var n=t.write(e);!1===n&&(R("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function a(e){R("onerror",e),l(),t.removeListener("error",a),0===E.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",c),l()}function c(){R("onfinish"),t.removeListener("close",u),l()}function l(){R("unpipe"),f.unpipe(t)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1,R("pipe count=%d opts=%j",h.pipesCount,e);var p=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,d=p?i:o;h.endEmitted?n.nextTick(d):f.once("end",d),t.on("unpipe",r);var g=_(f);return t.on("drain",g),f.on("data",s),t._events&&t._events.error?j(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",u),t.once("finish",c),t.emit("pipe",f),h.flowing||(R("pipe resume"),f.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=x(e.pipes,t);return i===-1?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=A.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&f(this,i);else{var o=this;n.nextTick(function(){R("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(R("resume"),t.flowing=!0,t.reading||(R("resume read 0"),this.read(0)),g(this,t)),this},i.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(R("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(R("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=r.push(i);o||(n=!0,t.pause())}});for(var i in t)O.isFunction(t[i])&&O.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){R("wrapped _read",e),n&&(n=!1,t.resume())},r},i._fromList=m}).call(this,t("_process"))},{"./_stream_duplex":179,_process:28,
buffer:21,"core-util-is":184,events:25,inherits:101,isarray:185,stream:48,"string_decoder/":186,util:20}],182:[function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,u.isNullOrUndefined(n)||t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState=new r(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var a=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,a),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":179,"core-util-is":184,inherits:101}],183:[function(t,e,n){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(e,this),this.writable=!0,void j.call(this)):new o(e)}function s(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function a(t,e,r,i){var o=!0;if(!(x.isBuffer(r)||x.isString(r)||x.isNullOrUndefined(r)||e.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),n.nextTick(function(){i(s)}),o=!1}return o}function u(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&x.isString(e)&&(e=new w(e,n)),e}function c(t,e,n,i,o){n=u(e,n,i),x.isBuffer(n)&&(i="buffer");var s=e.objectMode?1:n.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new r(n,i,o)):l(t,e,!1,s,n,i,o),a}function l(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function f(t,e,r,i,o){r?n.nextTick(function(){e.pendingcb--,o(i)}):(e.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(h(r),e)f(t,r,i,e,o);else{var s=y(t,r);s||r.corked||r.bufferProcessing||!r.buffer.length||g(t,r),i?n.nextTick(function(){d(t,r,s,o)}):d(t,r,s,o)}}function d(t,e,n,r){n||_(t,e),e.pendingcb--,r(),m(t,e)}function _(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function g(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],r=0;r<e.buffer.length;r++)n.push(e.buffer[r].callback);e.pendingcb++,l(t,e,!0,e.length,e.buffer,"",function(t){for(var r=0;r<n.length;r++)e.pendingcb--,n[r](t)}),e.buffer=[]}else{for(var r=0;r<e.buffer.length;r++){var i=e.buffer[r],o=i.chunk,s=i.encoding,a=i.callback,u=e.objectMode?1:o.length;if(l(t,e,!1,u,o,s,a),e.writing){r++;break}}r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}e.bufferProcessing=!1}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function v(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function m(t,e){var n=y(t,e);return n&&(0===e.pendingcb?(v(t,e),e.finished=!0,t.emit("finish")):v(t,e)),n}function b(t,e,r){e.ending=!0,m(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var w=t("buffer").Buffer;o.WritableState=i;var x=t("core-util-is");x.inherits=t("inherits");var j=t("stream");x.inherits(o,j),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return x.isFunction(e)&&(n=e,e=null),x.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),x.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):a(this,r,t,n)&&(r.pendingcb++,i=c(this,r,t,e,n)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||g(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var r=this._writableState;x.isFunction(t)?(n=t,t=null,e=null):x.isFunction(e)&&(n=e,e=null),x.isNullOrUndefined(t)||this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||b(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":179,_process:28,buffer:21,"core-util-is":184,inherits:101,stream:48}],184:[function(t,e,n){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===g(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===g(t)}function p(t){return"[object Error]"===g(t)||t instanceof Error}function d(t){return"function"==typeof t}function _(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=f,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=_,n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../../../../../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js")})},{"../../../../../../browserify/node_modules/insert-module-globals/node_modules/is-buffer/index.js":27}],185:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],186:[function(t,e,n){arguments[4][49][0].apply(n,arguments)},{buffer:21,dup:49}],187:[function(t,e,n){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=t("stream"),n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":179,"./lib/_stream_passthrough.js":180,"./lib/_stream_readable.js":181,"./lib/_stream_transform.js":182,"./lib/_stream_writable.js":183,stream:48}],188:[function(t,e,n){!function(e,n){"use strict";var r=t("./lib/idbInit.js").idbInit,i=t("./lib/Dml.js").Dml,o=t("./lib/Ddl.js").Ddl,s=t("./lib/DatabaseDefinition.js").DatabaseDefinition,a=t("./lib/Table.js").Table,u=t("./lib/Tasker.js").Tasker,c=t("./param/Error.js").ERROR,l=function(t,e){this._name=t,this.db=null,this.transaction=null,this._version=0,this._upgrade_enable=!0,this._mode="",this._use_idb=!1,this._opened=!1,this._closed=!1,this._upgrading=!1,this._transacting=!1,this.tables={},this._idb_objects=null,this._tasker=new u,this._tasker.auto_run=!0,e?e.mode&&this.setMode(e.mode):this.useIndexedDB()};l.USE_IDB="idb",l.NO_IDB="no_idb",l.READ_WRITE="readwrite",l.READ_ONLY="readonly",l.DEFAULT_UPGRADING_HANDLER="sli2_upgrade",l.DEFAULT_TRANSACTION_HANDLER="sli2_transaction",l.prototype.useIndexedDB=function(){if(this._idb_objects=r(),null===this._idb_objects)throw c.idb_objects_not_exists;this._mode===l.NO_IDB&&(this._opened=!1),this._mode=l.USE_IDB,this._use_idb=!0},l.prototype.setMode=function(t){t===l.USE_IDB?this.useIndexedDB():t===l.NO_IDB&&(this._mode=l.NO_IDB,this._idb_objects=null,this._use_idb=!1,this._opened=!0,this._closed=!1)},l.createDatabaseDefinition=function(){return new s},l.prototype.deleteDatabase=function(t,e){var n=this;return new Promise(function(r,i){if(n._mode===l.NO_IDB)return void i(c.mode_is_no_idb);if(!n._use_idb)return void i(c.idb_objects_not_used);var o=n._idb_objects.indexedDB.deleteDatabase(t||n._name);o.onsuccess=function(){r()},o.onerror=function(){i()},o.onblocked="function"==typeof e?e:function(){console.log("deletedatabase blocking")}})},l.prototype._initTables=function(){for(var t=this.db,e=0,n=t.objectStoreNames.length;e<n;e+=1){var r=t.objectStoreNames[e],i=new a(r,null,this);this.tables[r]=i}},l.prototype._openTables=function(t,e,n){var r=n||this.tables;for(var i in r)this.tables[i].open(t,e)},l.prototype._closeTables=function(t,e){var n=e||this.tables;for(var r in n)this.tables[r].close(t)},l.prototype._destroyTables=function(){for(var t in this.tables)this.tables[t].destroy()},l.prototype._initInOpen=function(t){this.db=t,0===this._version&&(this._version=t.version),this._opened=!0,this._closed=!1},l.prototype.isUpgrading=function(){return this._upgrading},l.prototype.isTransacting=function(){return this._transacting},l.prototype.open=function(t){var e=this,n=null,r=[],i=[],o={},a=0,u=0;return new Promise(function(f,h){var p=null;return e._mode===l.NO_IDB?void h(c.mode_is_no_idb):e._opened?void h(c.already_open):e._use_idb?void(t instanceof s?new Promise(function(s,l){return r=t.getVersionMapStartWithVersion(1),e.db&&e.db.close(),r?(i=r.seq,o=r.map,n=e._idb_objects.indexedDB.open(e._name),n.onupgradeneeded=function(t){for(e._initInOpen(t.target.result),e.transaction=this.transaction,e._upgrading=!0,e._initTables(),e._openTables(this.transaction,"version_change"),e._tasker.auto_run=!1,a=0,u=i.length;!p&&a<u;a+=1){var n=o[i[a]];"function"==typeof n?n(e):p=c.no_definition(i[a])}e._tasker.addTask(null,function(t){e._version=i[a-1],e.transaction=null,e._upgrading=!1,e.db=null,e._tasker.auto_run=!0,t()}).runQueue()},n.onsuccess=function(t){e._initInOpen(t.target.result),p?l(p):(e._destroyTables(),e._initTables(),s())},n.onerror=function(t){l(t.target.error)},void 0):void l(c.no_version_map(1))}).then(function(){return new Promise(function(s,l){if(e.db.close(),t.isLatestVersion(e._version))n=e._idb_objects.indexedDB.open(e._name,e._version),n.onsuccess=function(t){e._initInOpen(t.target.result),s()},n.onerror=function(t){l(t.target.error)};else{r=t.getVersionMapStartWithVersion(e._version+1);var f=t.getLatestVersionForVersion(e._version);r?(i=r.seq,o=r.map,n=e._idb_objects.indexedDB.open(e._name,f),n.onupgradeneeded=function(t){for(e._initInOpen(t.target.result),e.transaction=this.transaction,e._upgrading=!0,e._initTables(),e._openTables(this.transaction,"version_change"),e._tasker.auto_run=!1,a=0,u=i.length;!p&&a<u;a+=1){var n=o[i[a]];"function"==typeof n?n(e):p=c.no_definition(i[a])}e._tasker.addTask(null,function(t){e._version=i[a-1],e.transaction=null,e._upgrading=!1,e.db=null,e._tasker.auto_run=!0,t()}).runQueue()},n.onsuccess=function(t){e._initInOpen(t.target.result),p?l(p):(e._destroyTables(),e._initTables(),s())},n.onerror=function(t){l(t.target.error)}):p=c.no_version_map(e._version)}})}).then(function(){e._upgrade_enable=!1,f(e.db)})["catch"](function(t){h(t)}):(e._upgrade_enable=!0,e.db&&e.db.close(),n=e._idb_objects.indexedDB.open(e._name),n.onsuccess=function(t){e._initInOpen(t.target.result),e._initTables(),f(e.db)},n.onerror=function(t){h(t.target.error)})):void h(c.idb_objects_not_used)})},l.prototype.close=function(){var t=this;return new Promise(function(e){t._tasker.addTask(null,function(n){t.db&&t.db.close(),t._name=null,t.db=null,t.transaction=null,t._version=0,t._upgrade_enable=!0,t._mode=null,t._upgrading=!1,t._transacting=!1,t._opened=!1,t._closed=!0,t._tasker.terminate(),t._destroyTables(),t.tables={},e(),n()})})},l.prototype.destroy=function(){var t=this;return this.close().then(function(){t._use_idb=!1,t._idb_objects=null,t.tables=null})},l.prototype.getCurrentVersion=function(){return this._version},l.prototype.getNewVersion=function(){if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;return this._version=this._version+1,this._version},l.prototype.begin_transaction=l.prototype.beginTransaction=function(t,e,n){var r=this;return new Promise(function(i,o){var s=[],a={},u=0,f=0,h=function(){r.transaction=null,r._transacting=!1;try{r._closeTables("sli2_transaction",a)}catch(t){o(t)}};if(Array.isArray(t)?s=t:s[0]=t,r._mode===l.NO_IDB)o(c.mode_is_no_idb);else if(r._opened){if(r._closed)o(c.closed);else if(!r._transacting){for(r._transacting=!0,u=0,f=s.length;u<f;u+=1){var p=s[u];if(!r.tables[p])return void o(c.table_not_exist(p));a[p]=r.tables[p]}var d=r.db.transaction(s,e);d.oncomplete=function(){h(),i()},d.onabort=function(){r._tasker.terminate(),h(),o(c.transaction_abort("transaction"))},r.transaction=d;try{r._openTables(d,"sli2_transaction",a)}catch(_){o(_)}}}else o(c.not_open);if("function"==typeof n)try{r._tasker.auto_run=!1,n(),r._tasker.addTask(null,function(){r._tasker.auto_run=!0}).runQueue()}catch(g){r.rollback(),h(),o(g)}})},l.prototype.upgrade=function(t,e){var n=this;return new Promise(function(r,i){var o="function"==typeof t?t:function(){},s="function"==typeof e?e:function(){};if(n._mode===l.NO_IDB)i(c.mode_is_no_idb);else if(n._upgrade_enable)if(n._opened)if(n._closed)i(c.closed);else if(n._upgrading)try{o(n.db,n.transaction),s(),r()}catch(a){i(a)}else{n._upgrading=!0,n.db.close();var u=n._idb_objects.indexedDB.open(n._name,n.getNewVersion());u.onupgradeneeded=function(t){var e=t.target.result,r=this.transaction;r.onabort=function(){i(c.transaction_abort("upgrade"))},n.db=e,n.transaction=r,n._openTables(r,"sli2_upgrade");try{n._tasker.auto_run=!1,o(e,r),n._tasker.addTask(null,function(){n._tasker.auto_run=!0}).runQueue()}catch(t){i(t)}},u.onsuccess=function(t){n._upgrading=!1,n._upgrading===!1&&(n.db=t.target.result),n.transaction=null,n._closeTables("sli2_upgrade"),s(),r()},u.onerror=function(t){i(c.upgrade_error(t.target.error))}}else i(c.not_open);else i(c.update_unable)})},l.prototype.addTask=function(t,e){if(this._closed)throw c.closed;return this._tasker.addTask(t,e)},l.prototype.runQueue=function(){if(this._closed)throw c.closed;return this._tasker.runQueue()},l.prototype.create_table=l.prototype.createTable=function(t,e){var n=e?e:{autoIncrement:!0};if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._upgrade_enable)throw c.update_unable;if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;var r=new o(this);return r.createTable(t,n)},l.prototype.drop_table=l.prototype.dropTable=function(t){if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._upgrade_enable)throw c.update_unable;if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;var e=new o(this);return e.dropTable(t)},l.prototype.create_index=l.prototype.createIndex=function(t,e,n){if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._upgrade_enable)throw c.update_unable;if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;if(!n)throw c.no_option("createIndex");var r=new o(this);return r.createIndex(t,e,n)},l.prototype.drop_index=l.prototype.dropIndex=function(t,e){if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._opened)throw c.not_open;if(!this._upgrade_enable)throw c.update_unable;if(this._closed)throw c.closed;var n=new o(this);return n.dropIndex(t,e)},l.prototype.select=function(t){if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;var e=new i(this);return e.select(t)},l.prototype.insert_into=l.prototype.insertInto=function(t,e){if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;var n=new i(this);return n.insert_into(t,e)},l.prototype.delete_from=l.prototype.deleteFrom=function(t){if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;var e=new i(this);return e.delete_from(t)},l.prototype.update=function(t){if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;var e=new i(this);return e.update(t)},l.prototype.rollback=function(){if(this._mode===l.NO_IDB)throw c.mode_is_no_idb;if(!this._opened)throw c.not_open;if(this._closed)throw c.closed;if(!this.transaction)throw c.no_transaction;this.transaction.abort(),this._tasker.terminate(),this._tasker.auto_run=!0},e.SLI2=l,n.SLI2=l}(this,(0,eval)("this").window||this)},{"./lib/DatabaseDefinition.js":189,"./lib/Ddl.js":190,"./lib/Dml.js":191,"./lib/Table.js":196,"./lib/Tasker.js":197,"./lib/idbInit.js":201,"./param/Error.js":203}],189:[function(t,e,n){!function(e){"use strict";var n=t("../param/Error.js").ERROR,r=function(){this._version_maps=[],this._version_procs={}};r.prototype.setVersion=function(t,e){var r=+t;if(Number.isNaN(r)||r<=0)throw n.invalid_version_number(t);if("function"!=typeof e)throw n.is_not_function("arguments[2]:proc");this._version_procs[r]=e},r.prototype.defineVersionMap=function(){this._version_maps=[];for(var t=0,e=arguments.length;t<e;t+=1){if(!Array.isArray(arguments[t]))throw n.is_not_array("arguments["+t+"] of defineVersionMap");for(var r=0,i=arguments[t].length;r<i;r+=1){var o=arguments[t][r],s=+o;if(Number.isNaN(s)||s<=0)throw n.invalid_version_number(o);this._version_maps[this._version_maps.length]=arguments[t]}}},r.prototype.isLatestVersion=function(t){var e=this._version_maps;if(e.length>0){for(var n=0,r=e.length;n<r;n+=1){var i=e[n];if(i[i.length-1]===t)return!0}return!1}return this.getLatestVersionOfDefinition()===t},r.prototype.getVersionMapStartWithVersion=function(t){var e=this._version_maps,n={seq:[],map:{}};if(e.length>0){for(var r=0,i=e.length;r<i;r+=1){var o=e[r],s=o.indexOf(t);if(~s){for(var a=s,u=o.length;a<u;a+=1){var c=o[a];n.map[c]=this._version_procs[c],n.seq[n.seq.length]=c}return n.seq.sort(),n}}return null}for(var l in this._version_procs){var f=+l;t<=f&&(n.map[l]=this._version_procs[l],n.seq[n.seq.length]=f)}return n.seq.sort(),n},r.prototype.getLatestVersionOfDefinition=function(){var t=0;for(var e in this._version_procs){var n=+e;t<n&&(t=n)}return t},r.prototype.getLatestVersionForVersion=function(t){var e=this._version_maps;if(e.length>0){for(var n=0,r=e.length;n<r;n+=1){var i=e[n];if(~i.indexOf(t))return i[i.length-1]}return null}return this.existVersionInDefinition(t)||1===t?this.getLatestVersionOfDefinition():null},r.prototype.existVersionInDefinition=function(t){var e=!1,n=+t;for(var r in this._version_procs)if(+r===n){e=!0;break}return e},e.DatabaseDefinition=r}(this)},{"../param/Error.js":203}],190:[function(t,e,n){!function(e){"use strict";var n=t("./Querable.js").Querable,r=t("./Table.js").Table,i=t("../param/Error.js").ERROR,o=function(){n.apply(this,arguments),this._set_create_table=!1,this._set_drop_table=!1,this._set_create_index=!1,this._set_drop_index=!1,this._table_name="",this._index_name="",this._option={}};o.prototype=Object.create(n.prototype,{constructor:{value:o,enumerable:!0,writable:!1,configurable:!0}}),o.prototype.create_table=o.prototype.createTable=function(t,e){if(this._set_create_table||this._set_drop_table||this._set_create_index||this._set_drop_index)throw i.invalid_description("create_table");if(this._check_arguments&&(arguments.length<1||arguments.length>2))throw i.invalid_argument("create_table");return this._set_create_table=!0,this._table_name=t,this._option=e,this},o.prototype.drop_table=o.prototype.dropTable=function(t){if(this._set_create_table||this._set_drop_table||this._set_create_index||this._set_drop_index)throw i.invalid_description("drop_table");if(this._check_arguments&&1!==arguments.length)throw i.invalid_argument("drop_table");return this._set_drop_table=!0,this._table_name=t,this},o.prototype.create_index=o.prototype.createIndex=function(t,e,n){if(this._set_create_table||this._set_drop_table||this._set_create_index||this._set_drop_index)throw i.invalid_description("create_index");if(this._check_arguments&&3!==arguments.length)throw i.invalid_argument("create_index");return this._set_create_index=!0,this._table_name=t,this._index_name=e,this._option=n,this},o.prototype.drop_index=o.prototype.dropIndex=function(t,e){if(this._set_create_table||this._set_drop_table||this._set_create_index||this._set_drop_index)throw i.invalid_description("drop_index");if(this._check_arguments&&2!==arguments.length)throw i.invalid_argument("create_index");return this._set_drop_index=!0,this._table_name=t,this._index_name=e,this},o.prototype._isRunnable=function(){return this._set_create_table||this._set_drop_table||this._set_create_index||this._set_drop_index},o.prototype.exec=function(t,e,n){if(!this._isRunnable())throw i.invalid_description("exec");var o=this,s=this._sli2_object,a="function"==typeof e?e:function(){},u="function"==typeof n?n:function(){};if(void 0===s||null===s)throw i.querable_is_not_initialized;var c=function(){a()},l=function(t){return function(e){u(i.ddl_exec_error(t+" / "+e.message))}},f=function(){},h="function"==typeof t?t:c;if(this._set_create_table)if(f=l("create_table"),s.tables[this._table_name])f(i.table_already_exist(this._table_name));else{var p=new r(this._table_name,null,s);p.create(this._option,function(){var t="";s.tables[o._table_name]=p,s.isUpgrading()?t=s.constructor.DEFAULT_UPGRADING_HANDLER:s.isTransacting()&&f(i.cannot_execute("create_table in transacting")),p.open(s.transactio,t),h(p,c,f),t||p.close(t)},f)}else this._set_drop_table?(f=l("drop_table"),s.tables[this._table_name]?s.tables[this._table_name].drop(function(){h(null,c,f)},f):f(i.table_not_exist(this._table_name))):this._set_create_index?(f=l("create_index"),s.tables[this._table_name]?s.tables[this._table_name].createIndex(this._index_name,this._option,function(){h(null,c,f)},f):f(i.table_not_exist(this._table_name))):this._set_drop_index&&(f=l("drop_index"),s.tables[this._table_name]?s.tables[this._table_name].dropIndex(this._index_name,function(){h(null,c,f)},f):f(i.table_not_exist(this._table_name)))},e.Ddl=o}(this)},{"../param/Error.js":203,"./Querable.js":192,"./Table.js":196}],191:[function(t,e,n){!function(e){"use strict";var n=(0,eval)("this"),r=t("../param/Error.js").ERROR,i=t("./Querable.js").Querable,o=t("Kriteria").Kriteria||n.Kriteria,s=t("./SelectionAggregator.js").SelectionAggregator,a=t("./arraySortWithObjectElement.js").arraySortWithObjectElement,u=t("./arrayUniqueMerge.js").arrayUniqueMerge,c=t("./setFunction.js").setFunction,l=t("./asyncLoop.js").asyncLoop,f=t("./SyncPromise.js").SyncPromise,h=t("clone"),p=function(){i.apply(this,arguments),this._check_arguments=!0,this._set_select=!1,this._set_from=!1,this._set_as=!1,this._set_insert=!1,this._set_delete=!1,this._set_update=!1,this._set_set=!1,this._set_join=!1,this._set_where=!1,this._set_group_by=!1,this._set_having=!1,this._set_order_by=!1,this._set_limit=!1,this._limit_num=0,this._set_offet=!1,this._ready_offset=!1,this._offset_num=0,this._selection=null,this._select_table="",this._table_alias="",this._select_input_query=null,this._select_input_array=null,this._insert_table="",this._insert_columns=[],this._delete_table="",this._update_table="",this._update_data="",this._joins=[],this._where=null,this._groupings=[],this._having=null,this._orderings=[],this._insert_array_values=[],this._insert_object_values=[],this._union_queries=[],this._union_all_queries=[],this._must_be_select=!1};p.prototype=Object.create(i.prototype,{constructor:{value:p,enumerable:!0,writable:!1,configurable:!0}}),p.prototype.isSelectQuery=function(){return!(this._set_insert||!this._set_select||!this._set_from)},p.prototype.isInsertQuery=function(){return!!this._set_insert},p.prototype.isDeleteQuery=function(){return!!this._set_delete},p.prototype.isUpdateQuery=function(){return!!this._set_update},p.prototype.forceSelectQuery=function(t){this._must_be_select=t},p.prototype.addUnions=function(t,e){for(var n=t.getUnions(e),r=[],i=0,o=n.length;i<o;i+=1)r[r.length]=n[i];r[r.length]=t,"union"===e?this._union_queries=r:"union_all"===e&&(this._union_all_queries=r),t.clearUnions(e)},p.prototype.getUnions=function(t){return"union"===t?this._union_queries:"union_all"===t?this._union_all_queries:[]},p.prototype.clearUnions=function(t){"union"===t?this._union_queries=[]:"union_all"===t&&(this._union_all_queries=[])},p.prototype.getTableName=function(){return this.isInsertQuery()?this._insert_table:this._select_input_query?this._table_alias||"":this.isSelectQuery()?this._table_alias||this._select_table||"":this.isDeleteQuery()?this._delete_table:this.isUpdateQuery()?this._update_table:""},p.prototype.getTableNames=function(){var t=[];this._select_table&&(t[t.length]=this._select_table),this._table_alias&&(t[t.length]=this._table_alias);for(var e=0,n=this._joins.length;e<n;e+=1){var r=this._joins[e][3];r&&(t[t.length]=r)}return t},p.prototype.select=function(t){if(this._set_select||this._set_values||this._set_delete||this._set_update)throw r.invalid_description("select");if(this._check_arguments&&0!==arguments.length&&1!==arguments.length&&"function"!=typeof t&&void 0!==t)throw r.invalid_argument("select");return this._set_select=!0,this._selection=t,this},p.prototype.from=function(){if(!this._set_select||this._set_from||this._set_join||this._set_where||this._set_group_by||this._set_having||this._set_order_by||this._set_limit)throw r.invalid_description("from");if(this._check_arguments&&0===arguments.length)throw r.invalid_argument("from");this._set_from=!0;for(var t=0,e=arguments.length;t<e;t+=1){var n=arguments[t];if("string"==typeof n||n instanceof String)0===t?this._select_table=n:this.join(n);else if(n instanceof p){if(!n.isSelectQuery())throw r.invalid_argument("from");0===t?this._select_input_query=n:this.join(n)}else if(Array.isArray(n))0===t?(this._select_input_array=n,this._table_alias="left"):this.join(n);else for(var i in n)0===t?(this._select_table=i,this.as(n[i])):this.join(i).as(n[i])}return this},p.prototype.as=function(t){if(!this._set_select||!this._set_from&&!this._set_join||this._set_as||this._set_where||this._set_group_by||this._set_having||this._set_order_by||this._set_limit)throw r.invalid_description("as");if(this._check_arguments&&!("string"==typeof t||t instanceof String&&""!==t))throw r.invalid_argument("as");return this._set_as=!0,this._set_join?this._joins[this._joins.length-1]&&(this._joins[this._joins.length-1][3]=t):this._table_alias=t,this},p.prototype.insert_into=p.prototype.insertInto=function(t,e){if(this._must_be_select||this._set_select||this._set_insert||this._set_delete||this._set_update)throw r.invalid_description("insert_into");if(this._check_arguments&&1!==arguments.length&&2!==arguments.length)throw r.invalid_argument("insert_into");return this._set_insert=!0,this._insert_table=t,Array.isArray(e)&&e.length>0&&(this._insert_columns=e),this},p.prototype.delete_from=p.prototype.deleteFrom=function(t){if(this._must_be_select||this._set_select||this._set_insert||this._set_delete||this._set_update)throw r.invalid_description("delete_from");if(this._check_arguments&&1!==arguments.length)throw r.invalid_argument("delete_from");return this._set_delete=!0,this._delete_table=t,this},p.prototype.update=function(t){if(this._must_be_select||this._set_select||this._set_insert||this._set_delete||this._set_update)throw r.invalid_description("update");if(this._check_arguments&&1!==arguments.length)throw r.invalid_argument("update");return this._set_update=!0,this._update_table=t,this},p.prototype.set=function(t){if(!this._set_update)throw r.invalid_argument("set");if(this._check_arguments&&1!==arguments.length)throw r.invalid_argument("set");return this._set_set=!0,this._update_data=t,this},p.prototype.join=function(t,e,n){if(!this._set_select||!this._set_from||this._set_where||this._set_group_by||this._set_having||this._set_order_by||this._set_limit)throw r.invalid_description("join");if(this._check_arguments&&(0===arguments.length||arguments.length>3))throw r.invalid_argument("join");var i=null,s=n||"inner";arguments.length>=2&&("function"==typeof e?(i=new o,e(i)):e instanceof o&&(i=e)),this._set_join=!0,this._set_as=!1;var a=this._joins.length;if(t instanceof p)this._joins[a]=[t,i,null,"",s];else if("string"==typeof t||t instanceof String)this._joins[a]=[new p(this._sli2_object).select().from(t),i,null,t,s];else if(Array.isArray(t))this._joins[a]=[null,i,t,"right_"+(a+1),s];else if(this._check_arguments)throw r.invalid_argument("join");return this},p.prototype.inner_join=p.prototype.innerJoin=function(t,e){return this.join(t,e,"inner")},p.prototype.left_join=p.prototype.leftJoin=function(t,e){return this.join(t,e,"left")},p.prototype.right_join=p.prototype.rightJoin=function(t,e){return this.join(t,e,"right")},p.prototype.where=function(t){if(!(this._set_select&&this._set_from||this._set_delete||this._set_update&&this._set_set)||this._set_where||this._set_group_by||this._set_having||this._set_order_by||this._set_limit)throw r.invalid_description("where");if(this._check_arguments&&1!==arguments.length)throw r.invalid_argument("where");var e=null;return"function"==typeof t?(e=new o,t(e)):e=t,this._set_where=!0,this._where=e,this},p.prototype.group_by=p.prototype.groupBy=function(){if(!this._set_select||!this._set_from||this._set_group_by||this._set_order_by||this._set_having||this._set_limit)throw r.invalid_description("group_by");if(this._check_arguments&&(0===arguments.length||Array.isArray(arguments[0])&&0===arguments[0].length))throw r.invalid_argument("group_by");var t=0,e=0;if(this._set_group_by=!0,this._groupings=[],Array.isArray(arguments[0]))for(t=0,e=arguments[0].length;t<e;t+=1)this._groupings[this._groupings.length]=arguments[0][t];else for(t=0,e=arguments.length;t<e;t+=1)this._groupings[this._groupings.length]=arguments[t];return this},p.prototype.having=function(t){if(!(this._set_select&&this._set_from&&this._set_group_by)||this._set_order_by||this._set_having||this._set_limit)throw r.invalid_description("having");if(this._check_arguments&&1!==arguments.length)throw r.invalid_argument("having");var e=null;return"function"==typeof t?(e=new o,t(e)):e=t,this._set_having=!0,this._having=e,this},p.prototype.union=function(){if(!this.isSelectQuery()||this._set_order_by||this._set_limit||this._union_all_queries.length>0)throw r.invalid_description("union");var t=new p(this._sli2_object);return t.forceSelectQuery(!0),t.addUnions(this,"union"),t},p.prototype.union_all=p.prototype.unionAll=function(){if(!this.isSelectQuery()||this._set_order_by||this._set_limit||this._union_queries.length>0)throw r.invalid_description("union_all");var t=new p(this._sli2_object);return t.forceSelectQuery(!0),t.addUnions(this,"union_all"),t},p.prototype.order_by=p.prototype.orderBy=function(){if(!this._set_select||!this._set_from||this._set_order_by||this._set_limit)throw r.invalid_description("order_by");
if(this._check_arguments&&(0===arguments.length||Array.isArray(arguments[0])&&0===arguments[0].length))throw r.invalid_argument("order_by");var t=0,e=0;if(this._set_order_by=!0,this._orderings=[],Array.isArray(arguments[0]))for(t=0,e=arguments[0].length;t<e;t+=1)this._orderings[this._orderings.length]=arguments[0][t];else for(t=0,e=arguments.length;t<e;t+=1)this._orderings[this._orderings.length]=arguments[t];return this},p.prototype.limit=function(t,e){if(!this._set_select||!this._set_from||this._set_limit)throw r.invalid_description("limit");if(this._check_arguments&&0===arguments.length||arguments.length>2||arguments.length>0&&(Number.isNaN(+arguments[0])||arguments[0]<0)||arguments.length>1&&(Number.isNaN(+arguments[1])||arguments[1]<0))throw r.invalid_argument("limit");return this._set_limit=!0,1===arguments.length?this._limit_num=0|t:2===arguments.length&&(this._offset_num=0|t,this._limit_num=0|e),this},p.prototype.offset=function(t){if(!this._set_limit||this._set_offet)throw r.invalid_description("offset");if(this._check_arguments&&1===arguments.length&&(Number.isNaN(+arguments[0])||arguments[0]<0))throw r.invalid_argument("offset");return this._set_offet=!0,this._offset_num=t,this},p.prototype.values=function(){if(!this._set_insert||this._set_values)throw r.invalid_description("values");if(this._check_arguments&&(0===arguments.length||Array.isArray(arguments[0])&&0===arguments[0].length))throw r.invalid_argument("values");var t=!1,e=0,n=0;for(this._set_values=!0,this._insert_array_values=[],this._insert_object_values=[],e=0,n=arguments.length;e<n;e+=1){var i=arguments[e];if(Array.isArray(i))this._insert_array_values[this._insert_array_values.length]=i;else{if(i.constructor!==Object){t=!0;break}this._insert_object_values[this._insert_object_values.length]=i}}if(t)for(this._insert_array_values=[[]],this._insert_object_values=[],e=0,n=arguments.length;e<n;e+=1)this._insert_array_values[0][e]=arguments[e];return this},p.prototype._isRunnable=function(){return this._set_select&&this._set_from||this._set_insert||this._set_delete||this._set_update&&this._set_set},p.prototype.exec=function(t,e,n){if(!this._isRunnable())throw r.invalid_description("exec");var i=this,p=this._sli2_object,d="function"==typeof e?e:function(){},_="function"==typeof n?n:function(){},g=[],y=0,v=0,m=0,b=0,w=0,x=0;if(void 0===p||null===p)throw r.querable_is_not_initialized;var j=function(){d()},k=function(t){return function(e){_(r.dml_exec_error(t+" / "+e.message))}},E=function(){},A="function"==typeof t?t:j;if(i.isInsertQuery()){if(E=k("insert_into"),!p.tables[i._insert_table])return void E(r.table_not_exist(i._insert_table));if(i._insert_array_values.length>0||i._insert_object_values.length>0){var O=[];if(i._insert_array_values.length>0)if(i._insert_columns.length>0)for(y=0,v=i._insert_array_values.length;y<v;y+=1)for(O[y]={},m=0,b=i._insert_columns.length;m<b;m+=1)O[y][i._insert_columns[m]]=i._insert_array_values[y][m];else E(new Error("unsupported command."));if(i._insert_object_values.length>0)for(y=0,v=i._insert_object_values.length;y<v;y+=1)O[O.length]=i._insert_object_values[y];p.tables[i._insert_table].add(O,function(t){A(t,j,E)},E)}else E(i._set_select?new Error("unsupported command."):r.invalid_description("insert_into"))}else if(i.isDeleteQuery()){if(E=k("delete_from"),!p.tables[i._delete_table])return void E(r.table_not_exist(i._delete_table));i._where?p.tables[i._delete_table].removeForQuery(i._where,function(t){A(t,j,E)},E):p.tables[i._delete_table].removeAll(function(t){A(t,j,E)},E)}else if(i.isUpdateQuery()){if(!p.tables[i._update_table])return void E(r.table_not_exist(i._update_table));i._where?p.tables[i._update_table].updateForQuery(i._where,i._update_data,function(t){A(t,j,E)},E):p.tables[i._update_table].updateAll(i._update_data,function(t){A(t,j,E)},E)}else if(i.isSelectQuery()){E=k("select");var S=[],R={},T=null,I=null,C=null,q="";if(this._where)if(S=this.getTableNames(),R=this._where.splitByKeyPrefixes(S)){R[this._select_table]&&R[this._table_alias]&&E(r.kriteria_prefix_conflict(this._select_table,this._table_alias));var F=new o,P=0;if(R[i._select_table]||R[i._table_alias]){T=R[i._select_table]||R[i._table_alias];for(q in R)R[q]&&q!==i._select_table&&q!==i._table_alias&&("else"===q?C=R[q]:(P+=1,F=F.merge(R[q])));P>0&&(I=F)}else{T=R["else"];for(q in R)R[q]&&("else"===q?C=R[q]:(P+=1,F=F.merge(R[q])));P>0&&(I=F)}}else C=this._where;new f(function(t,e){if(i._select_table){if(!p.tables[i._select_table])return void E(r.table_not_exist(i._select_table));R[i._select_table]||R[i._table_alias]?p.tables[i._select_table].selectForQuery(T,R[i._select_table]?i._select_table:i._table_alias,i._table_alias||(i._joins.length>0?i._select_table:""),function(e){j(),t(e)},e):p.tables[i._select_table].selectAll(i._joins.length>0?i._table_alias||i._select_table:i._table_alias,function(e){j(),t(e)},e)}else if(i._select_input_query)i._select_input_query.run(function(e,n){var r=[];if(i._table_alias)for(y=0,v=e.length;y<v;y+=1)r[y]={},r[y][i._table_alias]=e[y];else r=e;j(),t(r),n()});else if(i._select_input_array){var n=[];if(T){var o=null;if(0===i._joins.length?R[i._table_alias]&&R["else"]?o=c.setWithNoJoinAndAliasWhere:R[i._table_alias]&&!R["else"]?o=c.setWithNoJoinAndAliasWhere:!R[i._table_alias]&&R["else"]&&(o=c.setWithNoJoinAndNoAliasWhere):R[i._table_alias]&&R["else"]?o=c.setWithHasJoinAndAliasWhere:R[i._table_alias]&&!R["else"]?o=c.setWithHasJoinAndAliasWhere:!R[i._table_alias]&&R["else"]&&(o=c.setWithHasJoinAndNoAliasWhere),null===o)n=i._select_input_array;else for(y=0,v=i._select_input_array.length;y<v;y+=1)o(i._select_input_array[y],n,T,i._table_alias)}else if(0===i._joins.length)n=i._select_input_array;else for(y=0,v=i._select_input_array.length;y<v;y+=1){var s={};s[i._table_alias]=i._select_input_array[y],n[n.length]=s}j(),t(n)}else e(r.invalid_description("select"))}).then(function(t){return new f(function(e,n){var o=[];if(0===i._joins.length)e(t);else{var s=t,a=0;l(i._joins,function(t,e){var i=t[0],u=t[1],c=t[2],l=t[3],p=t[4],d={},_=0,g=[],j=[],k="",E="",A=[];o=[],a+=1,new f(function(t,e){i&&i.isSelectQuery?i.run(function(e,n){n(),t([e,l||""])}):c?t([c,l]):e(r.reqire_select_query)}).then(function(t){var n=t[0],r=t[1];if("inner"===p){for(y=0,v=s.length;y<v;y+=1)for(m=0,b=n.length;m<b;m+=1){if(d=h(s[y]),r)d[r]=n[m];else for(A=Object.keys(n[1]),w=0,x=A.length;w<x;w+=1)q=A[w],d[q]=n[m][q];u&&!u.match(d)||(o[o.length]=h(d))}s=o}else if("left"===p||"right"===p){for("left"===p?(g=s,j=n,k="",E=r):(g=n,j=s,k=r,E=""),y=0,v=g.length;y<v;y+=1){for(_=0,m=0,b=j.length;m<b;m+=1){if(d={},k?d[k]=h(g[y]):d=h(g[y]),E)d[E]=h(j[m]);else for(A=Object.keys(j[m]),w=0,x=A.length;w<x;w+=1)q=A[w],d[q]=j[m][q];u&&!u.match(d)||(o[o.length]=h(d),_+=1)}0===_&&(d={},k?d[k]=g[y]:d=g[y],o[o.length]=h(d))}s=o,g=[],j=[]}e()})["catch"](function(t){n(t)})}).then(function(){s=[],e(o)})}}).then(function(t){var e=[];if(I){for(y=0,v=t.length;y<v;y+=1)I.match(t[y])&&(e[e.length]=t[y]);return e}return t}).then(function(t){var e=s.createAggregationOperator(i._groupings);if(i._selection){for(y=0,v=t.length;y<v;y+=1)i._selection(e,t[y]),e.aggregate();return e.getResult()}if(i._groupings.length>0){var n=function(t,e){for(q in e)t(e[q]).as(q)};for(y=0,v=t.length;y<v;y+=1)n(e,t[y]),e.aggregate();return e.getResult()}return t}).then(function(t){var e=[];if(C){for(y=0,v=t.length;y<v;y+=1)C.match(t[y])&&(e[e.length]=t[y]);return e}return t}).then(function(t){var e=[];if(i._having)for(y=0,v=t.length;y<v;y+=1)i._having.match(t[y])&&(e[e.length]=t[y]);else e=t;return e}).then(function(t){if(i._orderings.length>0&&(t=a(t,i._orderings)),i._limit_num>0){var e=[];for(y=0+i._offset_num,v=i._limit_num+i._offset_num;y<v&&!(v>t.length);y+=1)e[e.length]=t[y];t=e,e=[]}return t}).then(function(t){return new f(function(e,n){i._union_queries.length>0?l(i._union_queries,function(t,e){t.run(function(t){g=u(g,t),e()})["catch"](function(t){n(t)})}).then(function(){g=u(g,t),e(g)}):i._union_all_queries.length>0?l(i._union_all_queries,function(t,e){t.run(function(t){for(y=0,v=t.length;y<v;y+=1)g[g.length]=t[y];e()})["catch"](function(t){n(t)})}).then(function(){for(y=0,v=t.length;y<v;y+=1)g[g.length]=t[y];e(g)}):e(t)})}).then(function(t){A(t,function(){},k("select - run process"))})["catch"](k("select - promise"))})["catch"](function(t){E(t)})}},e.Dml=p}(this)},{"../param/Error.js":203,"./Querable.js":192,"./SelectionAggregator.js":194,"./SyncPromise.js":195,"./arraySortWithObjectElement.js":198,"./arrayUniqueMerge.js":199,"./asyncLoop.js":200,"./setFunction.js":202,Kriteria:204,clone:209}],192:[function(t,e,n){!function(e){"use strict";var n=t("../param/Error.js").ERROR,r=function(t){this._sli2_object=t};r.prototype._isRunnable=function(){return!0},r.prototype.run=function(t){if(!this._isRunnable())throw n.invalid_description("run");var e=this,r=this._sli2_object;if(void 0===r||null===r)throw n.querable_is_not_initialized;return new Promise(function(n){r.addTask(e,function(e,r,i){"function"==typeof t?t(e,function(){n(),r()},i):(n(),r())})})},r.prototype.exec=function(t,e,n){var r="function"==typeof t?t:function(){},i="function"==typeof e?e:function(){},o="function"==typeof n?n:function(){};r(null,i,o)},e.Querable=r}(this)},{"../param/Error.js":203}],193:[function(t,e,n){!function(e){"use strict";var n=t("../param/Error.js").ERROR,r=t("./setFunction.js").setFunction,i=function(t){this._sli2_object=t,this._closed=!1};i.prototype.close=function(){this._sli2_object=null,this._closed=!0},i.prototype.add=function(t,e,r,i){if(this._closed)throw n.closed;var o=null,s=[],a=[],u="function"==typeof r?r:function(){},c="function"==typeof i?i:function(){};if(Array.isArray(e))for(var l=0,f=e.length;l<f;l+=1)s[l]=e[l];else s[0]=e;var h=function p(){o=t.add(s.shift()),o.onsuccess=function(t){a[a.length]=t.target.result,s.length>0?p():u(a)},o.onerror=function(t){var e=t.target.error;c("add: "+e.name+": "+e.message)}};h()},i.prototype.put=function(t,e,r,i){if(this._closed)throw n.closed;var o=null,s=[],a=[],u="function"==typeof r?r:function(){},c="function"==typeof i?i:function(){};if(Array.isArray(e))for(var l=0,f=e.length;l<f;l+=1)s[l]=e[l];else s[0]=e;var h=function p(){o=t.put(s.shift()),o.onsuccess=function(t){a[a.length]=t.target.result,s.length>0?p():u(a)},o.onerror=function(t){var e=t.target.error;c("put: "+e.name+": "+e.message)}};h()},i.prototype.selectAll=function(t,e,r,i){if(this._closed)throw n.closed;var o=[],s=t.openCursor(),a="function"==typeof r?r:function(){},u="function"==typeof i?i:function(){};e?(s.onsuccess=function(t){var n=t.target.result;if(n){var r={};r[e]=n.value,o[o.length]=r,n["continue"]()}else a(o)},s.onerror=function(t){var e=t.target.error;u(n.indexed_operation("selectAll: "+e.name+": "+e.message))}):(s.onsuccess=function(t){var e=t.target.result;e?(o[o.length]=e.value,e["continue"]()):a(o)},s.onerror=function(t){var e=t.target.error;u(n.indexed_operation("selectAll: "+e.name+": "+e.message))})},i.prototype.selectForStoresAndKeyRangesAndFilters=function(t,e,i,o,s,a,u){if(this._closed)throw n.closed;for(var c=[],l=[],f=[],h=[],p="function"==typeof a?a:function(){},d="function"==typeof u?u:function(){},_=[],g=0,y=t.length;g<y;g+=1)l[g]=t[g],f[g]=e[g],h[g]=i[g];var v=function(){if(l.length>0){var t=l.shift(),e=f.shift(),i=h.shift(),a=t.openCursor(e),u=r.setWithNoTableNameAndNoAlias;""!==o&&""!==s?u=r.setWithTableNameAndAlias:""!==o&&""===s?u=r.setWithTableName:""===o&&""!==s&&(u=r.setWithAlias),a.onsuccess=function(t){var e=t.target.result;if(e){var n=e.primaryKey+"";!~_.indexOf(n)&&u(e.value,c,i,o,s)&&(_[_.length]=n),e["continue"]()}else v()},a.onerror=function(t){var e=t.target.error;d(n.indexed_operation("selectForStoreAndKeyRangesAndFilter: "+e.name+": "+e.message))}}else p(c)};v()},i.prototype.deleteAll=function(t,e,r){if(this._closed)throw n.closed;var i="function"==typeof e?e:function(){},o="function"==typeof r?r:function(){},s=t.openCursor(),a=0;s.onsuccess=function(t){var e=t.target.result;e?(e["delete"](),a+=1,e["continue"]()):i(a)},s.onerror=function(t){var e=t.target.error;o(n.indexed_operation("deleteAll: "+e.name+": "+e.message))}},i.prototype.deleteForStoresAndKeyRangesAndFilters=function(t,e,r,i,o){if(this._closed)throw n.closed;for(var s="function"==typeof i?i:function(){},a="function"==typeof o?o:function(){},u=0,c=[],l=[],f=[],h=0,p=t.length;h<p;h+=1)c[h]=t[h],l[h]=e[h],f[h]=r[h];var d=function _(){if(c.length>0){var t=c.shift(),e=l.shift(),r=f.shift(),i=t.openCursor(e);i.onsuccess=function(t){var e=t.target.result;e?(r(e.value)&&(e["delete"](),u+=1),e["continue"]()):_()},i.onerror=function(t){var e=t.target.error;a(n.indexed_operation("deleteForStoreAndKeyRangesAndFilter: "+e.name+": "+e.message))}}else s(u)};d()},i.prototype.updateAll=function(t,e,r,i){if(this._closed)throw n.closed;var o=t.openCursor(),s=0,a="function"==typeof r?r:function(){},u="function"==typeof i?i:function(){};o.onsuccess=function(t){var n=t.target.result;if(n){var r=n.value;for(var i in e)r[i]=e[i];n.update(r),s+=1,n["continue"]()}else a(s)},o.onerror=function(t){var e=t.target.error;u(n.indexed_operation("updateAll: "+e.name+": "+e.message))}},i.prototype.updateForStoresAndKeyRangesAndFilters=function(t,e,r,i,o,s){if(this._closed)throw n.closed;for(var a=0,u=[],c=[],l=[],f="function"==typeof o?o:function(){},h="function"==typeof s?s:function(){},p=0,d=t.length;p<d;p+=1)u[p]=t[p],c[p]=e[p],l[p]=r[p];var _=function g(){if(c.length>0){var t=u.shift(),e=c.shift(),r=l.shift(),o=t.openCursor(e);o.onsuccess=function(t){var e=t.target.result;if(e){if(r(e.value)){var n=e.value;for(var o in i)n[o]=i[o];e.update(n),a+=1}e["continue"]()}else g()},o.onerror=function(t){var e=t.target.error;h(n.indexed_operation("updateForStoreAndKeyRangesAndFilter: "+e.name+": "+e.message))}}else f(a)};_()},e.SLI2Operator=i}(this)},{"../param/Error.js":203,"./setFunction.js":202}],194:[function(t,e,n){!function(t){"use strict";var e=function(t){this._key_targets=t||[],this._pos=-1,this._names=[],this._values=[],this._result_keys=[],this._result_values=[]};e.isValue=function(t){return"string"==typeof t||t instanceof String||"number"==typeof t||t instanceof Number||null===t||void 0===t},e.hasAction=function(t,n){var r=e.actions[t];return!(!r||"function"!=typeof r[n])},e.prototype.setValue=function(t){this._values[this._pos]=t},e.prototype.setName=function(t){this._names[this._pos]=t},e.prototype.next=function(){this._pos=this._pos+1},e.prototype.getKey=function(){for(var t="",e=0,n=this._key_targets.length;e<n;e+=1){var r=this._key_targets[e],i=this._names.indexOf(r);t=~i?t+"_"+this._values[i]:t+"_"+this._values[r]}return t},e.prototype.getCurrentValue=function(t){var e=this.getPos(this.getKey(t));return this._result_values[e]?this._result_values[e][t]||null:null},e.prototype.getPos=function(t){var e=this._result_keys.indexOf(t);return~e||(e=this._result_values.length),e},e.prototype.aggretate=function(){var t=this.getKey(),n=this.getPos(t);""!==t&&(this._result_keys[n]=t),this._result_values[n]||(this._result_values[n]={});for(var r=0,i=this._values.length;r<i;r+=1){var o=this._names[r]||r,s=this._values[r];if(e.isValue(s))this._result_values[n][o]=s;else{var a=Object.keys(s)[0];e.hasAction(a,"aggregate")&&(this._result_values[n][o]=e.actions[a].aggregate(this,o,s[a]))}}this._names=[],this._values=[],this._pos=-1},e.prototype.getResult=function(){for(var t=this,n=[],r=0,i=t._result_values.length;r<i;r+=1){var o={},s=t._result_values[r];for(var a in s)e.isValue(s[a])?o[a]=s[a]:e.hasAction(s[a].type,"getResult")?o[a]=e.actions[s[a].type].getResult(s[a]):o[a]=null;n[n.length]=o}return n},e.actions={},e.addPlugin=function(t,n){n&&(e.actions[t]={},e.actions[t].init=e.createInit(t),"function"==typeof n.aggregate&&(e.actions[t].aggregate=n.aggregate),"function"==typeof n.getResult&&(e.actions[t].getResult=n.getResult))},e.createInit=function(t){return function(e){var n={};return n[t]=e,this._agg.next(),this._agg.setValue(n),this}},e.loadPluginsTo=function(t){for(var n in e.actions)e.hasAction(n,"init")&&(t[n]=e.actions[n].init)},e.addPlugin("min",{aggregate:function(t,e,n){var r=t.getCurrentValue(e)||Number.MAX_SAFE_INTEGER;return r>n?n:r},getResult:null}),e.addPlugin("max",{aggregate:function(t,e,n){var r=t.getCurrentValue(e)||0;return r<n?n:r},getResult:null}),e.addPlugin("avg",{aggregate:function(t,e,n){var r=t.getCurrentValue(e)||{type:"avg",count:0,value:0};return r.count=r.count+1,r.value=r.value+n,r},getResult:function(t){return t.value/t.count}}),e.addPlugin("sum",{aggregate:function(t,e,n){var r=t.getCurrentValue(e)||0;return r+n},getResult:null}),e.addPlugin("count",{aggregate:function(t,e){var n=t.getCurrentValue(e)||0;return n+1},getResult:null}),e.createAggregationOperator=function(t){var n=new e(t),r=function i(t){return n.next(),n.setValue(t),i};return r._agg=n,r.as=function(t){return this._agg.setName(t),r},r.aggregate=function(){this._agg.aggretate()},r.getResult=function(){return this._agg.getResult()},e.loadPluginsTo(r),r.debug=function(){return n},r},t.SelectionAggregator=e}(this)},{}],195:[function(t,e,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],196:[function(t,e,n){!function(e){"use strict";var n=(0,eval)("this"),r=t("criteria2IDBQuery").criteria2IDBQuery||n.criteria2IDBQuery,i=t("./SLI2Operator.js").SLI2Operator,o=t("../param/Error.js").ERROR,s=function(t,e,n){this._name=t,this._sli2_object=n,this.transaction=null,this.store=null,e&&n.db.createObjectStore(t,e),this._handling=null};s.prototype.open=function(t,e){if(this.transaction||null!==this._handling&&this._handling!==(e||""))throw o.table_already_opened(this._name,this._handling);if(this._handling!==e){var n=t||this._sli2_object.transaction||this._sli2_object.db.transaction(this._name,"readwrite");this.transaction=n,this.store=n.objectStore(this._name),this._handling=e||""}},s.prototype.tryOpen=function(t,e){return!(this.transaction||null!==this._handling&&this._handling!==e)&&(this.open(t,e),!0)},s.prototype.close=function(t){if(!this.transaction||this._handling!==(t||""))throw o.table_cannot_close(this._name,this._handling,t);this.transaction=null,this.store=null,this._handling=null},s.prototype.tryClose=function(t){return!(!this.transaction||this._handling!==(t||""))&&(this.close(t),!0)},s.prototype.destroy=function(){this._name=null,this._sli2_object=null,this.transaction=null,this.store=null,this._handling=""},s.prototype.beginTransaction=function(t,e,n,r){var i=this,s="function"==typeof n?n:function(){},a="function"==typeof r?r:function(){};return!this.transaction&&this._handling?void a(o.invalid_state("beginTransaction")):void(this.transaction?e.call(this,function(t){s(t)},a):(this.open(null,"table_transaction"),e.call(this,function(t){i.close("table_transaction"),s(t)},function(t){i.close("table_transaction"),a(t)})))},s.prototype.create=function(t,e,n){var r=this._name,i=this._sli2_object,s="function"==typeof e?e:function(){},a="function"==typeof n?n:function(){};i.upgrade(function(e){e.objectStoreNames.contains(r)?a(o.table_already_exist(r)):i.db.createObjectStore(r,t)},s)},s.prototype.drop=function(t,e){var n=this._name,r=this._sli2_object,i="function"==typeof t?t:function(){},s="function"==typeof e?e:function(){};r.upgrade(function(t){t.objectStoreNames.contains(n)?(delete r.tables[n],r.db.deleteObjectStore(n)):s(o.table_not_exist(n))},i)},s.prototype.createIndex=function(t,e,n,r){var i=this,s=this._name,a=this._sli2_object,u="function"==typeof n?n:function(){},c="function"==typeof r?r:function(){};a.upgrade(function(n){var r=i.transaction||a.db.transaction(s),u=i.store||r.objectStore(s);if(n.objectStoreNames.contains(s)){if(!u.indexNames.contains(t))return u.createIndex(t,e);c(o.index_already_exist(t))}else c(o.table_not_exist(s))},u)},s.prototype.dropIndex=function(t,e){var n=this,r=this._name,i=this._sli2_object,o="function"==typeof e?e:function(){};i.upgrade(function(){var e=n.store,o=n.transaction;return e?e.deleteIndex(t):o?o.objectStore(r).deleteIndex(t):i.db.transaction(r).objectStore(r).deleteIndex(t)},o)},s.prototype.selectAll=function(t,e,n){var r=new i(this._sli2_object),o="function"==typeof e?e:function(){},s="function"==typeof n?n:function(){};this.beginTransaction("readwrite",function(e,n){r.selectAll(this.store,t,function(t){r.close(),e(t)},n)},o,s)},s.prototype.selectForQuery=function(t,e,n,o,s){var a=this,u=new i(this._sli2_object),c="function"==typeof o?o:function(){},l="function"==typeof s?s:function(){};this.beginTransaction("readwrite",function(i,o){for(var s=r.createQueryParameter(t,this.store),c=[],l=[],f=[],h=0,p=s.length;h<p;h+=1)c[c.length]=s[h].store,f[f.length]=s[h].filter,l[l.length]=r.createIDBKeyRange(s[h],a._sli2_object._idb_objects.IDBKeyRange);u.selectForStoresAndKeyRangesAndFilters(c,l,f,e,n,function(t){u.close(),i(t)},o)},c,l)},s.prototype.add=function(t,e,n){var r=new i(this._sli2_object),o="function"==typeof e?e:function(){},s="function"==typeof n?n:function(){};this.beginTransaction("readwrite",function(e,n){r.add(this.store,t,function(t){r.close(),e(t)},n)},o,s)},s.prototype.put=function(t,e,n){var r=new i(this._sli2_object),o="function"==typeof e?e:function(){},s="function"==typeof n?n:function(){};this.beginTransaction("readwrite",function(e,n){r.put(this.store,t,function(t){r.close(),e(t)},n)},o,s)},s.prototype.removeAll=function(t,e){var n=new i(this._sli2_object),r="function"==typeof t?t:function(){},o="function"==typeof e?e:function(){};this.beginTransaction("readwrite",function(t,e){n.deleteAll(this.store,function(e){n.close(),t(e)},e)},r,o)},s.prototype.removeForQuery=function(t,e,n){var o=this,s=new i(this._sli2_object),a="function"==typeof e?e:function(){},u="function"==typeof n?n:function(){};this.beginTransaction("readwrite",function(e,n){for(var i=r.createQueryParameter(t,this.store),a=[],u=[],c=[],l=0,f=i.length;l<f;l+=1)a[a.length]=i[l].store,c[c.length]=i[l].filter,u[u.length]=r.createIDBKeyRange(i[l],o._sli2_object._idb_objects.IDBKeyRange);s.deleteForStoresAndKeyRangesAndFilters(a,u,c,function(t){s.close(),e(t)},n)},a,u)},s.prototype.updateAll=function(t,e,n){var r=new i(this._sli2_object),o="function"==typeof e?e:function(){},s="function"==typeof n?n:function(){};this.beginTransaction("readwrite",function(e,n){r.updateAll(this.store,t,function(t){r.close(),e(t)},n)},o,s)},s.prototype.updateForQuery=function(t,e,n,o){var s=this,a=new i(this._sli2_object),u="function"==typeof n?n:function(){},c="function"==typeof o?o:function(){};this.beginTransaction("readwrite",function(n,i){for(var o=r.createQueryParameter(t,this.store),u=[],c=[],l=[],f=0,h=o.length;f<h;f+=1)u[u.length]=o[f].store,l[l.length]=o[f].filter,c[c.length]=r.createIDBKeyRange(o[f],s._sli2_object._idb_objects.IDBKeyRange);a.updateForStoresAndKeyRangesAndFilters(u,c,l,e,function(t){a.close(),n(t)},i)},u,c)},s.prototype.rollback=function(){if(!this.transaction)throw o.no_transaction(this._name);this.transaction.abort()},e.Table=s}(this)},{"../param/Error.js":203,"./SLI2Operator.js":193,criteria2IDBQuery:210}],197:[function(t,e,n){!function(t){"use strict";var e=function(){this._running=!1,this._stop=!1,this.auto_run=!1,this._task_queue=[]};e.prototype.addTask=function(t,e){return this._task_queue[this._task_queue.length]=[t,e],this.auto_run&&this.runQueue(),this},e.prototype.runQueue=function(){var t=this,e=function(){t._running&&t._task_queue.length>0&&r()},n=function(t){throw t};if(!this._runnign&&!this._stop){var r=function(){if(t._running&&!t._stop&&t._task_queue.length>0){var r=t._task_queue.shift(),i=r[0],o=r[1];i&&"function"==typeof i.exec?i.exec(o,e,n):o(e,n)}else t._running=!1};this._running=!0,r()}return this},e.prototype.terminate=function(){this._running=!1,this._task_queue=[]},e.prototype.stop=function(){this._running=!1,this._stop=!0},e.prototype.resume=function(){this._runing=!0,this._stop=!1,this.runQueue()},t.Tasker=e}(this)},{}],198:[function(t,e,n){!function(t){"use strict";var e=function(t,e){return t.sort(function(t,i){Array.isArray(e)||(e=[e]);for(var o=0,s=e.length;o<s;o+=1){var a=e[o],u=a.constructor===Object?r(t,i,a):n(t,i,a);if(0!==u)return u}return 0})},n=function(t,e,n){return i(t,e,[n],"desc")},r=function(t,e,n){for(var r in n){var o=n[r].toLowerCase();if("desc"!==o&&"asc"!==o)throw new Error("order error: desc or asc.");var s=i(t,e,Array.isArray(r)?r:[r],o);if(0!==s)return s}return 0},i=function(t,e,n,r){for(var i=0,o=n.length;i<o;i+=1){var s=n[i];if(t[s]<e[s])return"desc"===r?-1:1;if(t[s]>e[s])return"desc"===r?1:-1}return 0};t.arraySortWithObjectElement=e}(this)},{}],199:[function(t,e,n){!function(t){"use strict";var e=function(t,e){var r=t.concat();if(0===t.length)return e;for(var i=0,o=e.length;i<o;i+=1){for(var s=!1,a=0,u=r.length;a<u;a+=1)if(n(r[a],e[i])){s=!0;break}s||(r[r.length]=e[i])}return r},n=function r(t,e){var n=Object.keys(t).sort(),i=Object.keys(e).sort();if(n.length!==i.length)return!1;for(var o=0,s=n.length;o<s;o+=1){var a=n[o],u=i[o];if(a!==u)return!1;if(t[a].constructor===Object&&e[u].constructor===Object){if(!r(t[a],e[u]))return!1}else if(t[a]!==e[u])return!1}return!0};t.arrayUniqueMerge=e}(this)},{}],200:[function(t,e,n){arguments[4][10][0].apply(n,arguments)},{"./SyncPromise.js":195,dup:10}],201:[function(t,e,n){!function(t){"use strict";var e=function(){var t=(0,eval)("this"),e={},n=["indexedDB","IDBDatabase","IDBFactory","IDBEnvironment","IDBIndex","IDBObjectStore","IDBOpenDBRequest","IDBRequest","IDBTransaction","IDBKeyRange","IDBCursor"],r=["webkit","moz","ms"],i=0,o=0,s=0,a=0;for(i=0,s=n.length;i<s;i+=1){var u=n[i];if(t[u])e[u]=t[u];else for(o=0,a=r.length;o<a;o+=1){var c=t[r[o]+u.substr(0,1).toUpperCase()+u.substr(1,u.length-1)];c&&(e[u]=c)}}return 0===Object.keys(e).length?null:e};t.idbInit=e}(this)},{}],202:[function(t,e,n){!function(t){"use strict";var e={setWithTableNameAndAlias:function(t,e,n,r,i){var o={};if(o[r]=t,n(o)){var s={};return s[i]=t,e[e.length]=s,!0}return!1},setWithTableName:function(t,e,n,r){var i={};return i[r]=t,!!n(i)&&(e[e.length]=t,!0)},setWithAlias:function(t,e,n,r,i){if(n(t)){var o={};return o[i]=t,e[e.length]=o,!0}return!1},setWithNoTableNameAndNoAlias:function(t,e,n){return!!n(t)&&(e[e.length]=t,!0)},setWithNoJoinAndAliasWhere:function(t,e,n,r){var i={};return i[r]=t,!!n.match(i)&&(e[e.length]=t,!0)},setWithHasJoinAndAliasWhere:function(t,e,n,r){var i={};return i[r]=t,!!n.match(i)&&(e[e.length]=i,!0)},setWithNoJoinAndNoAliasWhere:function(t,e,n){return!!n.match(t)&&(e[e.length]=t,!0)},setWithHasJoinAndNoAliasWhere:function(t,e,n,r){if(n.match(t)){var i={};return i[r]=t,e[e.length]=i,!0}return!1},setWithNoJoinAndNoWhere:function(t,e){return e[e.length]=t,!0},setWithHasJoinAndNoWhere:function(t,e,n,r){var i={};return i[r]=t,e[e.length]=i,!0}};t.setFunction=e}(this)},{}],203:[function(t,e,n){!function(t){"use strict";var e={not_open:new Error("SLI2 is not open."),already_open:new Error("SLI2 is already opened."),closed:new Error("SLI2 is already closed."),no_version_map:function(t){return new Error("SLI2 has no version-map ("+t+")")},no_definition:function(t){return new Error("SLI2 has no version-definition ("+t+")")},upgrade_error:function(t){return new Error("Upgrade error: "+t.name+": "+t.message+".")},transaction_abort:function(t){return new Error("Transaction abort at '"+t+"'.")},transaction_error:function(t){return new Error("Transaction error: "+t.name+": "+t.message+".")},transaction_already_exist:new Error("Transaction already exist."),no_transaction:function(t){return t?new Error("SLI2 has no transaction('"+t+"')"):new Error("SLI2 has no transaction.")},table_already_exist:function(t){return new Error("Table '"+t+"' is already exist.")},table_not_exist:function(t){return new Error("Table '"+t+"' is not exist.")},table_already_opened:function(t,e){return new Error("Table '"+t+"' is already opened from '"+e+"'.")},table_cannot_close:function(t,e,n){return new Error("Table '"+t+"' can not close from '"+n+"'. (handling '"+e+"')")},index_already_exist:function(t){return new Error("Index '"+t+"' is already exist.")},index_not_exist:function(t){return new Error("Index '"+t+"' is not exist.")},no_option:function(t){return new Error("No options as '"+t+"'")},idb_objects_not_exists:new Error("IDB objects not exists."),idb_objects_not_used:new Error("IDB objects not used(not exec SLI2#useIndexedDB)."),mode_is_no_idb:new Error("SLI2 mode is 'no_idb'."),upgrade_unable:new Error("Upgrade unable (upgrading only on DatabaseDefinition)"),invalid_description:function(t){return new Error("Invalid description: "+t)},invalid_argument:function(t){return new Error("Invalid argument: "+t)},invalid_state:function(t){return new Error("Invalid state: "+t)},querable_is_not_initialized:new Error("Dml is not initialized (no SLI2 object)."),require_select_query:new Error("Joined qauery must be select query."),kriteria_prefix_conflict:function(t,e){return new Error("Kriteria Error: key prefix conflict '"+t+"', '"+e+"'.")},dml_exec_error:function(t){return new Error("Dml#exec error at: "+t)},ddl_exec_error:function(t){return new Error("Ddl#exec error at: "+t)},cannot_execute:function(t){return new Error("Can not execute "+t)},indexed_operation:function(t){return new Error("Indexed operation error at '"+t+"'.")},invalid_version_number:function(t){return new Error("Invalid version number: "+t)},is_not_array:function(t){return new Error(t+" is not array")},is_not_function:function(t){return new Error(t+" is not function")}};t.ERROR=e}(this)},{}],204:[function(t,e,n){!function(e,n){"use strict";var r=t("./lib/getProperty.js").getProperty,i=t("./lib/matchPrefix.js").matchPrefix,o=t("./lib/Condition.js").Condition,s=t("./lib/evaluation.js").evaluation,a=function(){this._conditionAnd=[],this._conditionOr=[],this._not_flg=!1};a._name_="Kriteria",a.prototype.getConditionAnd=function(){return this._conditionAnd},a.prototype.getConditionOr=function(){return this._conditionOr},a._JS_OPERATOR={eq:"===",ne:"!==",lt:"<",le:"<=",gt:">",ge:">="},a.prototype.addAnd=function(t){this._conditionAnd[this._conditionAnd.length]=t},a.prototype.addOr=function(t){this._conditionOr[this._conditionOr.length]=t},a.prototype.and=function(t){var e=typeof t,n=null;if("string"===e||t instanceof String||"number"===e||t instanceof Number)return s("and",t,this);if(t instanceof a)return n=t,this.addAnd(new o("","",[],"",n)),this;if("function"==typeof t)return n=new a,t(n),this.addAnd(new o("","",[],"",n)),this;throw new Error("invalid type of argument. ("+e+")")},a.prototype.or=function(t){var e=typeof t,n=null;if("string"===e||t instanceof String||"number"===e||t instanceof Number)return s("or",t,this);if(t instanceof a)return n=t,this.addOr(new o("","",[],"",n)),this;if("function"==typeof t)return n=new a,t(n),this.addOr(new o("","",[],"",n)),this;throw new Error("invalid type of argument. ("+e+")")},a.prototype.not=function(){return this._not_flg=!this._not_flg,this},a.parse=function(t){var e=new a,n="";for(n in t.and)e.addAnd(t.and[n]);for(n in t.or)e.andOr(t.or[n]);return t.not&&e.not(),e},a.prototype.match=function(t){var e=0,n=0,i=0,o=0,s="",u="",c=[],l="",f=null,h=[],p=!1,d=null,_=null;for(e=0,n=this._conditionAnd.length;e<n;e+=1)if(d=this._conditionAnd[e],d.criteria instanceof a){if(p=d.criteria.match(t),!p)break}else{if(s=d.left_key,u=d.operator,c=d.right_key,l=d.key_type,f=r(t,s),"value"===l)h=c;else if("key"===l)if(_=r(t,c[0]),Array.isArray(_))if("match"===u||"not_match"===u)for(h=[],i=0,o=_.length;i<o;i+=1)null===_[i]||void 0===_[i]||""===_[i]?h[i]=_[i]:h[i]=new RegExp(_[i]);else h=_;else h="match"===u||"not_match"===u?null===_||void 0===_||""===_?_:[new RegExp(_)]:[_];if(p=void 0!==h&&!~h.indexOf(void 0)&&void 0!==f&&this._compare(f,u,h),!p)break}if(p)return!!(!0^this._not_flg);for(e=0,n=this._conditionOr.length;e<n;e+=1)if(d=this._conditionOr[e],d.criteria instanceof a){if(p=d.criteria.match(t))return!!(!0^this._not_flg)}else{if(s=d.left_key,u=d.operator,c=d.right_key,l=d.key_type,f=r(t,s),"value"===l)h=c;else if("key"===l)if(_=r(t,c[0]),Array.isArray(_))if("match"===u||"not_match"===u)for(h=[],i=0,o=_.length;i<o;i+=1)null===_[i]||void 0===_[i]||""===_[i]?h[i]=_[i]:h[i]=new RegExp(_[i]);else h=_;else h="match"===u||"not_match"===u?null===_||void 0===_||""!==_?_:[new RegExp(_)]:[_];
if(p=void 0!==h&&!~h.indexOf(void 0)&&void 0!==f&&this._compare(f,u,h))return!!(!0^this._not_flg)}return!!(!1^this._not_flg)},a.prototype._compare=function(t,e,n){var r=!1;switch(e){case"eq":r=n[0]===t;break;case"ne":r=n[0]!==t;break;case"lt":r=n[0]>t;break;case"le":r=n[0]>=t;break;case"gt":r=n[0]<t;break;case"ge":r=n[0]<=t;break;case"in":r=!!~n.indexOf(t);break;case"not_in":r=!~n.indexOf(t);break;case"between":r=n[0]<=t&&n[1]>=t;break;case"not_between":r=n[0]>t||n[1]<t;break;case"match":r=null===n[0]?null===t||void 0===t:null!==t&&(""===n[0]?""===t:n[0].test(t));break;case"not_match":r=null===n[0]?null!==t&&void 0!==t:null===t||(""===n[0]?""!==t:!n[0].test(t))}return r},a.prototype.matcher=function(){return new Function("$","return "+this._createMatchingExpression())},a.prototype._createMatchingExpression=function(){var t=0,e=0,n=[],r=[],i="",o="",s=null,u="";for(t=0,e=this._conditionAnd.length;t<e;t+=1)s=this._conditionAnd[t],s.criteria instanceof a?n[n.length]="("+s.criteria._createMatchingExpression()+")":n[n.length]=this._createExpression(s);for(t=0,e=this._conditionOr.length;t<e;t+=1)s=this._conditionOr[t],s.criteria instanceof a?r[r.length]="("+s.criteria._createMatchingExpression()+")":r[r.length]=this._createExpression(s);return i=n.join(" && "),o=r.join(" || "),i&&o?u=i+" || "+o+" ":o?i||(u=o):u=i,this._not_flg&&(u="!("+u+")"),u},a.prototype._createExpression=function(t){return"("+this._createJsExpressionOfKeyIsNotUndefined(t.left_key)+" && "+("key"===t.key_type?this._createJsExpressionOfKeyIsNotUndefined(t.right_key[0])+" && ":"")+this._createJsExpression(t)+")"},a.prototype._createJsExpression=function(t){var e="$."+t.left_key,n=t.operator,r=t.right_key,i=t.key_type,o=a._JS_OPERATOR[n];return o?e+" "+o+" "+this._toStringExpressionFromValue(r[0],i):"in"===n?"value"===i?"!!~"+this._toStringExpressionFromArray(r)+".indexOf("+e+")":"(Array.isArray($."+r[0]+") ? !!~$."+r[0]+".indexOf("+e+"): $."+r[0]+" === "+e+")":"not_in"===n?"value"===i?"!~"+this._toStringExpressionFromArray(r)+".indexOf("+e+")":"(Array.isArray($."+r[0]+") ? !~$."+r[0]+".indexOf("+e+"): $."+r[0]+" !== "+e+")":"between"===n?e+" >= "+this._toStringExpressionFromValue(r[0],i)+" && "+e+" <= "+this._toStringExpressionFromValue(r[1],i):"not_between"===n?e+" < "+this._toStringExpressionFromValue(r[0],i)+" || "+e+" > "+this._toStringExpressionFromValue(r[1],i):"match"===n?void 0!==r[0]&&(null===r[0]?"("+e+" === null ? true : false)":""===r[0]?"("+e+" === '' ? true : false)":"("+r[0]+".test("+e+"))"):"not_match"===n?void 0!==r[0]&&(null===r[0]?"("+e+" === null ? false : true)":""===r[0]?"("+e+" === '' ? false : true)":"(!"+r[0]+".test("+e+"))"):null},a.prototype._createJsExpressionOfKeyIsNotUndefined=function(t){for(var e=t.split("."),n=[],r=[],i=0,o=e.length;i<o;i+=1)n[n.length]=e[i],r[r.length]="$."+n.join(".")+" !== void 0";return r.join(" && ")},a.prototype._createJSExpressionOfKeyIsUndefined=function(t){for(var e=t.split("."),n=[],r=[],i=0,o=e.length;i<o;i+=1)n[n.length]=e[i],r[r.length]="$."+n.join(".")+" === void 0",r[r.length]="$."+n.join(".")+" === null";return r.join(" || ")},a.prototype._toStringExpressionFromArray=function(t){for(var e=[],n=0,r=t.length;n<r;n+=1)e[e.length]=this._toStringExpressionFromValue(t[n],"value");return"["+e.join(", ")+"]"},a.prototype._toStringExpressionFromValue=function(t,e){return"value"===e&&("string"==typeof t||t instanceof String)?'"'+t+'"':"key"===e?"$."+t:t+""},a.prototype.splitByKeyPrefixes=function(t){if(!Array.isArray(t)||0===t.length)return null;var e={},n=null,r=null,o=[],s="",u="",c="",l=!0,f=!0,h=!0,p="",d=0,_=0,g=0,y=0;for(d=0,_=t.length;d<_;d+=1)e[t[d]]=new a;for(e["else"]=new a,d=0,_=this._conditionAnd.length;d<_;d+=1)if(n=this._conditionAnd[d],n.criteria instanceof a){r=n.criteria.splitByKeyPrefixes(t);for(p in r)null!==r[p]&&e[p].and(r[p])}else{for(o=[],s=n.left_key,u=n.right_key[0],c=n.key_type,h=!1,g=0,y=t.length;g<y;g+=1)if(o[o.length]=t[g],l=i(s,o),"key"===c&&(f=i(u,o)),"value"===c&&l||"key"===c&&l&&f){e[t[g]].addAnd(n),h=!0;break}h||e["else"].addAnd(n)}for(d=0,_=this._conditionOr.length;d<_;d+=1)if(n=this._conditionOr[d],n.criteria instanceof a){r=n.criteria.splitByKeyPrefixes(t);for(p in r)null!==r[p]&&e[p].or(r[p])}else{for(o=[],s=n.left_key,u=n.right_key[0],c=n.key_type,h=!1,g=0,y=t.length;g<y;g+=1)if(o[o.length]=t[g],l=i(s,o),"key"===c&&(f=i(u,o)),"value"===c&&l||"key"===c&&l&&f){e[t[g]].addOr(n),h=!0;break}h||e["else"].addOr(n)}for(p in e)e[p].getConditionAnd().length>0||e[p].getConditionOr().length>0?e[p]._not_flg=this._not_flg:e[p]=null;return e},a.prototype.merge=function(t,e){var n=new a,r=t.getConditionAnd(),i=t.getConditionOr(),o=null,s=!1,u=0,c=0,l=0,f=0;if(this._not_flg!==t._not_flg)throw new Error("Kriteria#merge - collision to not flag.");for(u=0,c=this._conditionAnd.length;u<c;u+=1)n.addAnd(this._conditionAnd[u]);for(u=0,c=this._conditionOr.length;u<c;u+=1)n.addOr(this._conditionOr[u]);if(e){for(u=0,c=r.length;u<c;u+=1){for(o=r[u],s=!1,l=0,f=this._conditionAnd.length;l<f;l+=1)if(0===o.compareTo(this._conditionAnd[l])){s=!0;break}s||n.addAnd(o)}for(u=0,c=i.length;u<c;u+=1){for(o=i[u],s=!1,l=0,f=this._conditionOr.length;l<f;l+=1)if(0===o.compareTo(this._conditionOr[l])){s=!0;break}s||n.addOr(o)}}else{for(u=0,c=r.length;u<c;u+=1)n.addAnd(r[u]);for(u=0,c=i.length;u<c;u+=1)n.addOr(i[u])}return n},a.prototype.compareTo=function(t){var e=function(t,e){return t.compareTo(e)},n=t.getConditionAnd(),r=t.getConditionOr(),i=null,o=null,s=!0,a=0,u=0,c=0,l=0;if(this._conditionAnd.sort(e),n.sort(e),this._conditionOr.sort(e),r.sort(e),this._not_flg&&!t._not_flg)return-1;if(!this._not_flg&&t._not_flg)return 1;for(a=this._conditionAnd.length,u=n.length,l=a>u?a:u,c=0;c<l;c+=1){if(i=this._conditionAnd[c],o=n[c],!i)return-1;if(!o)return 1;if(s=i.compareTo(o),0!==s)return s}for(a=this._conditionOr.length,u=r.length,l=a>u?a:u,c=0;c<l;c+=1){if(i=this._conditionOr[c],o=r[c],!i)return-1;if(!o)return 1;if(s=i.compareTo(o),0!==s)return s}return 0},a.prototype.removePrefixes=function(t){var e=null,n=null,r=0,i=0;if(null===t||void 0===t||!Array.isArray(t)||0===t.length)return this;for(e=new RegExp("^("+t.join("|")+")."),r=0,i=this._conditionAnd.length;r<i;r+=1)n=this._conditionAnd[r],n.criteria instanceof a?n.criteria.removePrefixes(t):(n.left_key=n.left_key.replace(e,""),"key"===n.key_type&&(n.right_key[0]=n.right_key[0].replace(e,"")));for(r=0,i=this._conditionOr.length;r<i;r+=1)n=this._conditionOr[r],n.criteria instanceof a?n.criteria.removePrefixes(t):(n.left_key=n.left_key.replace(e,""),"key"===n.key_type&&(n.right_key[0]=n.right_key[0].replace(e,"")));return this},e.Kriteria=a,n.Kriteria=a}(this,(0,eval)("this").window||this)},{"./lib/Condition.js":205,"./lib/evaluation.js":206,"./lib/getProperty.js":207,"./lib/matchPrefix.js":208}],205:[function(t,e,n){!function(t){"use strict";var e=function(t,e,n,r,i){this.left_key=t,this.operator=e,this.right_key=Array.isArray(n)||void 0===n||null===n?n:[n],this.key_type=r,this.criteria=i};e.prototype.clone=function(){return new e(this.left_key,this.operator,this.right_key.concat(),this.key_type,this.criteria)},e.prototype.not=function(){switch(this.operator){case"eq":this.operator="ne";break;case"ne":this.operator="eq";break;case"lt":this.operator="ge";break;case"le":this.operator="gt";break;case"gt":this.operator="le";break;case"ge":this.operator="lt";break;case"in":this.operator="not_in";break;case"not_in":this.operator="in";break;case"between":this.operator="not_between";break;case"not_between":this.operator="between";break;case"match":this.operator="not_match";break;case"not_match":this.operator="match"}return this},e.prototype.normalize=function(){var t=[],n=0,r=0;if("value"===this.key_type)switch(this.operator){case"in":for(n=0,r=this.right_key.length;n<r;n+=1)t[t.length]=new e(this.left_key,"eq",[this.right_key[n]],this.key_type,null);break;case"not_in":for(n=0,r=this.right_key.length;n<r;n+=1)t[t.length]=new e(this.left_key,"ne",[this.right_key[n]],this.key_type,null);break;case"between":t[t.length]=new e(this.left_key,"ge",[this.right_key[0]],this.key_type,null),t[t.length]=new e(this.left_key,"le",[this.right_key[1]],this.key_type,null);break;case"not_between":t[t.length]=new e(this.left_key,"lt",[this.right_key[0]],this.key_type,null),t[t.length]=new e(this.left_key,"gt",[this.right_key[1]],this.key_type,null);break;default:t[t.length]=this.clone()}else t[t.length]=this.clone();return t},e.prototype.compareTo=function(t){if(this.criteria&&!t.criteria)return 1;if(!this.criteria&&t.criteria)return-1;if(this.criteria&&t.criteria)return this.criteria.compareTo(t.criteria);if(this.left_key>t.left_key)return 1;if(this.left_key<t.left_key)return-1;if(this.operator>t.operator)return 1;if(this.operator<t.operator)return-1;if(this.key_type>t.key_type)return 1;if(this.key_type<t.key_type)return-1;for(var e=0,n=this.right_key.length;e<n;e+=1){if(this.right_key[e]>t.right_key[e])return 1;if(this.right_key[e]<t.right_key[e])return-1}return 0},t.Condition=e}(this)},{}],206:[function(t,e,n){!function(e){"use strict";var n=t("./Condition.js").Condition,r=function(t,e,n){return{eq:{key:function(r){return i(n,t,"eq",e,"key",[r]),n},value:function(r){return i(n,t,"eq",e,"value",[r]),n}},ne:{key:function(r){return i(n,t,"ne",e,"key",[r]),n},value:function(r){return i(n,t,"ne",e,"value",[r]),n}},lt:{key:function(r){return i(n,t,"lt",e,"key",[r]),n},value:function(r){return i(n,t,"lt",e,"value",[r]),n}},le:{key:function(r){return i(n,t,"le",e,"key",[r]),n},value:function(r){return i(n,t,"le",e,"value",[r]),n}},gt:{key:function(r){return i(n,t,"gt",e,"key",[r]),n},value:function(r){return i(n,t,"gt",e,"value",[r]),n}},ge:{key:function(r){return i(n,t,"ge",e,"key",[r]),n},value:function(r){return i(n,t,"ge",e,"value",[r]),n}},"in":{key:function(){return i(n,t,"in",e,"key",[arguments[0]]),n},value:function(){return i(n,t,"in",e,"value",Array.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments)),n}},not_in:{key:function(){return i(n,t,"not_in",e,"key",[arguments[0]]),n},value:function(){return i(n,t,"not_in",e,"value",Array.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments)),n}},between:function(r,o){return i(n,t,"between",e,"value",[r,o]),n},not_between:function(r,o){return i(n,t,"not_between",e,"value",[r,o]),n},match:function(r){var o=r instanceof RegExp?r:null===r?null:void 0===r?void 0:""===r?"":new RegExp(r);return i(n,t,"match",e,"value",[o]),n},not_match:function(r){var o=r instanceof RegExp?r:null===r?null:void 0===r?void 0:""===r?"":new RegExp(r);return i(n,t,"not_match",e,"value",[o]),n}}},i=function(t,e,r,i,o,s){if("and"===e.toLowerCase())t.addAnd(new n(i,r,s,o,null));else{if("or"!==e.toLowerCase())throw new Error("invalid type: "+e+"(at key_name:"+i+", key_type: "+o+", operator:"+r+")");t.addOr(new n(i,r,s,o,null))}};e.evaluation=r}(this)},{"./Condition.js":205}],207:[function(t,e,n){!function(t){"use strict";var e=function(t,e){for(var n=e.split("."),r=t,i=0,o=n.length;i<o;i+=1){if("string"==typeof r||r instanceof String||"number"==typeof r||r instanceof Number)return;if(!(n[i]in r))return;r=r[n[i]]}return r};t.getProperty=e}(this)},{}],208:[function(t,e,n){!function(t){"use strict";var e=function(t,e){if(0===e.length)return!0;for(var n=0,r=e.length;n<r;n+=1)if(0===t.indexOf(e[n]+"."))return!0;return!1};t.matchPrefix=e}(this)},{}],209:[function(t,e,n){(function(t){var n=function(){"use strict";function e(n,r,i,o){function a(n,i){if(null===n)return null;if(0==i)return n;var u,h;if("object"!=typeof n)return n;if(e.__isArray(n))u=[];else if(e.__isRegExp(n))u=new RegExp(n.source,s(n)),n.lastIndex&&(u.lastIndex=n.lastIndex);else if(e.__isDate(n))u=new Date(n.getTime());else{if(f&&t.isBuffer(n))return u=new t(n.length),n.copy(u),u;"undefined"==typeof o?(h=Object.getPrototypeOf(n),u=Object.create(h)):(u=Object.create(o),h=o)}if(r){var p=c.indexOf(n);if(p!=-1)return l[p];c.push(n),l.push(u)}for(var d in n){var _;h&&(_=Object.getOwnPropertyDescriptor(h,d)),_&&null==_.set||(u[d]=a(n[d],i-1))}return u}var u;"object"==typeof r&&(i=r.depth,o=r.prototype,u=r.filter,r=r.circular);var c=[],l=[],f="undefined"!=typeof t;return"undefined"==typeof r&&(r=!0),"undefined"==typeof i&&(i=1/0),a(n,i)}function n(t){return Object.prototype.toString.call(t)}function r(t){return"object"==typeof t&&"[object Date]"===n(t)}function i(t){return"object"==typeof t&&"[object Array]"===n(t)}function o(t){return"object"==typeof t&&"[object RegExp]"===n(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return e.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},e.__objToStr=n,e.__isDate=r,e.__isArray=i,e.__isRegExp=o,e.__getRegExpFlags=s,e}();"object"==typeof e&&e.exports&&(e.exports=n)}).call(this,t("buffer").Buffer)},{buffer:21}],210:[function(t,e,n){!function(e){"use strict";var n=t("./lib/createQueryParameterFromConditionsAndIndices.js").createQueryParameterFromConditionsAndIndices,r=t("./lib/analyzeConditionsFromCriteria.js").analyzeConditionsFromCriteria,i=t("./lib/createIndicesFromObjectStore.js").createIndicesFromObjectStore,o=function(t,e,o){return n(r(t,!1),i(e),o&&o.priority?o.priority:[])},s=function(t,e){var n=e||(0,eval)("this").IDBKeyRange,r=null;if(!n)throw new Error("IDBKeyRange is not available.");if(!t.method)return null;switch(t.method[0]){case"only":r=1===t.value1.length?n[t.method[0]](t.value1[0]):n[t.method[0]](t.value1);break;case"upperBound":r=1===t.value1.length?n[t.method[0]](t.value1[0],t.method[1]):n[t.method[0]](t.value1,t.method[1]);break;case"lowerBound":r=1===t.value2.length?n[t.method[0]](t.value2[0],t.method[1]):n[t.method[0]](t.value2,t.method[1]);break;case"bound":r=1===t.value1.length?n[t.method[0]](t.value1[0],t.value2[0],t.method[1],t.method[2]):n[t.method[0]](t.value1,t.value2,t.method[1],t.method[2])}return r};e.criteria2IDBQuery={createQueryParameter:o,createIDBKeyRange:s}}((0,eval)("this").window||this)},{"./lib/analyzeConditionsFromCriteria.js":213,"./lib/createIndicesFromObjectStore.js":214,"./lib/createQueryParameterFromConditionsAndIndices.js":215}],211:[function(t,e,n){!function(t){"use strict";var e=function(){this._keys=[],this._priority_keys=[]};e.prototype.init=function(t,e){for(var n=0,r=t.length;r>n;n+=1)this.set(t[n]);Array.isArray(e)?this._priority_keys=e:""!==e&&null!==e&&void 0!==e&&(this._priority_keys=[e])},e.prototype.set=function(t){this._keys[this._keys.length]={};var e=this._keys.length-1;if(null===t.keyPath)this._keys[e]=[];else if(Array.isArray(t.keyPath))for(var n=0,r=t.keyPath.length;r>n;n+=1)this._keys[e][t.keyPath[n]]=0;else this._keys[e][t.keyPath]=0},e.prototype.calc=function(t){for(var e=0,n=this._keys.length;n>e;e+=1)void 0!==this._keys[e][t]&&(this._keys[e][t]=1)},e.prototype.clone=function(){var t=new e;t._keys=[],t._priority_keys=[];for(var n=0,r=this._keys.length;r>n;n+=1){t._keys[n]||(t._keys[n]={});for(var i in this._keys[n])t._keys[n][i]=0}for(n=0,r=this._priority_keys.length;r>n;n+=1)t._priority_keys[n]=this._priority_keys[n];return t},e.prototype.getResult=function(){for(var t=[],e=0,n=this._keys.length;n>e;e+=1){var r=0,i=0,o=0;for(var s in this._keys[e])r+=1,i+=this._keys[e][s],~this._priority_keys.indexOf(s)&&(o+=1);0!==r&&r===i&&(t[t.length]={index:e,match_num:i,priority_num:o})}return t.sort(function(t,e){return t.priority_num<e.priority_num?1:t.priority_num>e.priority_num?-1:t.match_num<e.match_num?1:t.match_num>e.match_num?-1:0}),t},t.IndexAggregator=e}(this)},{}],212:[function(t,e,n){!function(t){"use strict";var e=function(){this.keys=[],this.conditions=[]};e.prototype.addKeysFromCondition=function(t){"value"!==t.key_type||~this.keys.indexOf(t.left_key)||(this.keys[this.keys.length]=t.left_key)},e.prototype.addCondition=function(t,e){this.addKeysFromCondition(t),e?this.conditions=this.conditions.concat(t.clone().not().normalize()):this.conditions=this.conditions.concat(t.clone().normalize())},e.prototype.merge=function(t){var e=0,n=0;for(e=0,n=t.keys.length;n>e;e+=1)~this.keys.indexOf(t.keys[e])||(this.keys[this.keys.length]=t.keys[e]);for(e=0,n=t.conditions.length;n>e;e+=1)this.conditions[this.conditions.length]=t.conditions[e].clone();return this},e.prototype.clone=function(){var t=new e;t.keys=this.keys.concat();for(var n=0,r=this.conditions.length;r>n;n+=1)t.conditions[n]=this.conditions[n].clone();return t},e.prototype.not=function(){for(var t=[],n=0,r=this.conditions.length;r>n;n+=1){var i=new e;i.addCondition(this.conditions[n],!0),t[t.length]=i}return t},t.Query=e}(this)},{}],213:[function(t,e,n){!function(e){"use strict";var n=t("kriteria").Kriteria||(0,eval)("this").Kriteria,r=t("./Query.js").Query,i=function a(t,e){var i=[],u=[],c=!!(t._not_flg^e),l=null,f=[],h=[],p=null,d=0,_=0;if(c?(i=t.getConditionOr(),u=t.getConditionAnd()):(i=t.getConditionAnd(),u=t.getConditionOr()),i.length>0){for(p=new r,d=0,_=i.length;_>d;d+=1)l=i[d],l.criteria instanceof n?h=o(h,a(l.criteria,c)):!c&&("in"===l.operator||"not_between"===l.operator)||c&&("not_in"===l.operator||"between"===l.operator)?h=o(h,s(l,c)):p.addCondition(l,c);f=f.concat(o([p],h))}if(u.length>0)for(d=0,_=u.length;_>d;d+=1)l=u[d],l.criteria instanceof n?f=f.concat(a(l.criteria,c)):!c&&("in"===l.operator||"not_between"===l.operator)||c&&("not_in"===l.operator||"between"===l.operator)?f=f.concat(s(l,c)):(p=new r,p.addCondition(l,c),f=f.concat([p]));return f},o=function(t,e){var n=[];if(t.length>0&&e.length)for(var r=0,i=t.length;i>r;r+=1)for(var o=0,s=e.length;s>o;o+=1)n[n.length]=t[r].clone().merge(e[o]);else n=0===t.length?e.concat():t.concat();return n},s=function(t,e){for(var n=t.normalize(),i=[],o=0,s=n.length;s>o;o+=1){var a=new r;e?a.addCondition(n[o].not()):a.addCondition(n[o]),i[i.length]=a}return i};e.analyzeConditionsFromCriteria=i}(this)},{"./Query.js":212,kriteria:216}],214:[function(t,e,n){!function(t){"use strict";var e=function(t){for(var e=[t],n=0,r=t.indexNames.length;r>n;n=n+1|0)e[e.length]=t.index(t.indexNames[n]);return e};t.createIndicesFromObjectStore=e}(this)},{}],215:[function(t,e,n){!function(e){"use strict";var n=t("kriteria").Kriteria||(0,eval)("this").Kriteria,r=t("./IndexAggregator.js").IndexAggregator,i=function(t,e,i){var c=new r,l=0,f=0,h=0,p=0,d=0,_=0,g="",y=[];for(c.init(e,i),l=0,f=t.length;f>l;l+=1){var v=t[l],m=c.clone(),b={store:e[0],method:null,keypath:null,value1:null,value2:null,filter:n.parse({and:v.conditions}).matcher()},w=o(m,v);if(0===w.length)y[y.length]=b;else{var x=[],j=[[],[]],k=[],E=[],A=0;for(h=0,p=w.length;p>h;h+=1){var O=w[h].index,S=[];for(A=e[O],x=[],j=[[],[]],E=[],k=[],d=0,_=v.conditions.length;_>d;d+=1){var R=v.conditions[d],T=A.keyPath.indexOf(R.left_key);~T&&s(R,T,S)}for(g in S)a(S[g],g,{method:k,value:j,method_level:E,target_keypath:x});if(!u(k))break}if(h===w.length&&(x=[],j=[[],[]],E=[],k=[]),k.length>0){var I=[],C=0;for(d=0,_=k.length;_>d;d+=1)void 0!==k[d]&&E[d]>C&&(I=k[d].concat(),C=E[d]);y[y.length]={store:A,method:I,keypath:x,value1:j[0],value2:j[1],filter:n.parse({and:v.conditions}).matcher()}}else y[y.length]=b}}return y},o=function(t,e){for(var n=0,r=e.keys.length;r>n;n+=1)for(var i=0,o=e.conditions.length;o>i;i+=1){var s=e.conditions[i].operator;e.conditions[i].left_key===e.keys[n]&&"value"===e.conditions[i].key_type&&"ne"!==s&&"match"!==s&&"not_match"!==s&&t.calc(e.keys[n])}return t.getResult()},s=function(t,e,n){var r=t.left_key;switch(n[r]||(n[r]={keypath_index:e,val1:null,val2:null,flg_eq:!1,flg_lt:!1,flg_le:!1,flg_gt:!1,flg_ge:!1}),t.operator){case"eq":n[r].flg_eq=!0,n[r].flg_lt=!1,n[r].flg_le=!1,n[r].flg_gt=!1,n[r].flg_ge=!1,n[r].val1=t.right_key[0],n[r].val2=t.right_key[0];break;case"ne":break;case"lt":n[r].flg_eq||(n[r].flg_lt=!0,(null===n[r].val2||n[r].val2>t.right_key[0])&&(n[r].val2=t.right_key[0]));break;case"le":n[r].flg_eq||(n[r].flg_le=!0,n[r].flg_lt=!1,(null===n[r].val2||n[r].val2>t.right_key[0])&&(n[r].val2=t.right_key[0]));break;case"gt":n[r].flg_eq||(n[r].flg_gt=!0,(null===n[r].val1||n[r].val1<t.right_key[0])&&(n[r].val1=t.right_key[0]));break;case"ge":n[r].flg_eq||(n[r].flg_ge=!0,n[r].flg_gt=!1,(null===n[r].val1||n[r].val1<t.right_key[0])&&(n[r].val1=t.right_key[0]));break;case"match":case"not_match":}},a=function(t,e,n){var r=n.method,i=n.value,o=n.method_level,s=n.target_keypath;t.keypath_index>=0&&(void 0===o[t.keypath_index]&&(o[t.keypath_index]=0),t.flg_ge?t.flg_le?(r[t.keypath_index]=["bound",!1,!1],i[0][t.keypath_index]=t.val1,i[1][t.keypath_index]=t.val2,o[t.keypath_index]=2):t.flg_lt?(r[t.keypath_index]=["bound",!0,!1],i[0][t.keypath_index]=t.val1,i[1][t.keypath_index]=t.val2,o[t.keypath_index]=2):o[t.keypath_index]<=1&&(r[t.keypath_index]=["lowerBound",!1],i[1][t.keypath_index]=t.val1,o[t.keypath_index]=3):t.flg_gt?t.flg_le?(r[t.keypath_index]=["bound",!1,!0],i[0][t.keypath_index]=t.val1,i[1][t.keypath_index]=t.val2,o[t.keypath_index]=2):t.flg_lt?(r[t.keypath_index]=["bound",!0,!0],i[0][t.keypath_index]=t.val1,i[1][t.keypath_index]=t.val2,o[t.keypath_index]=2):o[t.keypath_index]<=1&&(r[t.keypath_index]=["lowerBound",!0],i[1][t.keypath_index]=t.val1,o[t.keypath_index]=3):t.flg_le?(r[t.keypath_index]=["upperBound",!1],i[0][t.keypath_index]=t.val2,o[t.keypath_index]=3):t.flg_lt?(r[t.keypath_index]=["upperBound",!0],i[0][t.keypath_index]=t.val2,o[t.keypath_index]=3):t.flg_eq&&(r[t.keypath_index]=["only"],i[0][t.keypath_index]=t.val1,i[1][t.keypath_index]=t.val2,o[t.keypath_index]=1),s[t.keypath_index]=e)},u=function(t){for(var e=!1,n=!1,r=0,i=t.length;i>r;r+=1)switch(t[r][0]){case"lowerBound":e=!0;break;case"upperBound":n=!0}return!(!e||!n)};e.createQueryParameterFromConditionsAndIndices=i}(this)},{"./IndexAggregator.js":211,kriteria:216}],216:[function(t,e,n){!function(e){"use strict";var n=t("./lib/getProperty.js").getProperty,r=t("./lib/Condition.js").Condition,i=t("./lib/evaluation.js").evaluation,o=function(){this._conditionAnd=[],this._conditionOr=[],this._not_flg=!1};o._name_="Kriteria",o.prototype.getConditionAnd=function(){return this._conditionAnd},o.prototype.getConditionOr=function(){return this._conditionOr},o._JS_OPERATOR={eq:"===",ne:"!==",lt:"<",le:"<=",gt:">",ge:">="},o.prototype.addAnd=function(t){this._conditionAnd[this._conditionAnd.length]=t},o.prototype.addOr=function(t){this._conditionOr[this._conditionOr.length]=t},o.prototype.and=function(t){var e=typeof t,n=null;if("string"===e||t instanceof String||"number"===e||t instanceof Number)return i("and",t,this);if(t instanceof o)return n=t,this.addAnd(new r("","",[],"",n)),this;if("function"==typeof t)return n=new o,t(n),this.addAnd(new r("","",[],"",n)),this;throw new Error("invalid type of argument. ("+e+")")},o.prototype.or=function(t){var e=typeof t,n=null;if("string"===e||t instanceof String||"number"===e||t instanceof Number)return i("or",t,this);if(t instanceof o)return n=t,this.addOr(new r("","",[],"",n)),this;if("function"==typeof t)return n=new o,t(n),this.addOr(new r("","",[],"",n)),this;throw new Error("invalid type of argument. ("+e+")")},o.prototype.not=function(){return this._not_flg=!this._not_flg,this},o.parse=function(t){var e=new o,n="";for(n in t.and)e.addAnd(t.and[n]);for(n in t.or)e.andOr(t.or[n]);return t.not&&e.not(),e},o.prototype.match=function(t){var e=0,r=0,i=0,s=0,a="",u="",c=[],l="",f=null,h=[],p=!1,d=null,_=null;for(e=0,r=this._conditionAnd.length;r>e;e+=1)if(d=this._conditionAnd[e],d.criteria instanceof o){if(p=d.criteria.match(t),!p)break}else{if(a=d.left_key,u=d.operator,c=d.right_key,l=d.key_type,f=n(t,a),"value"===l)h=c;else if("key"===l)if(_=n(t,c[0]),Array.isArray(_))if("match"===u||"not_match"===u)for(h=[],i=0,s=_.length;s>i;i+=1)null!==_[i]&&void 0!==_[i]&&""!==_?h[i]=new RegExp(_[i]):h[i]=_[i];else h=_;else h="match"===u||"not_match"===u?null!==_&&void 0!==_&&""!==_?[new RegExp(_)]:_:[_];if(p=void 0!==h&&!~h.indexOf(void 0)&&void 0!==f&&this._compare(f,u,h),!p)break}if(p)return!!(!0^this._not_flg);for(e=0,r=this._conditionOr.length;r>e;e+=1)if(d=this._conditionOr[e],d.criteria instanceof o){if(p=d.criteria.match(t))return!!(!0^this._not_flg)}else{if(a=d.left_key,u=d.operator,c=d.right_key,l=d.key_type,f=n(t,a),"value"===l)h=c;else if("key"===l)if(_=n(t,c),Array.isArray(_))if("match"===u||"not_match"===u)for(h=[],i=0,s=_.length;s>i;i+=1)null!==_[i]&&void 0!==_[i]&&""!==_[i]?h[i]=new RegExp(_[i]):h[i]=_[i];else h=_;else h="match"===u||"not_match"===u?null!==_&&void 0!==_&&""!==_?[new RegExp(_)]:_:[_];if(p=!~h.indexOf(void 0)&&"undefined"!=typeof f&&this._compare(f,u,h))return!!(!0^this._not_flg)}return!!(!1^this._not_flg)},o.prototype._compare=function(t,e,n){var r=!1;switch(e){case"eq":r=n[0]===t;break;case"ne":r=n[0]!==t;break;case"lt":r=n[0]>t;break;case"le":r=n[0]>=t;break;case"gt":r=n[0]<t;break;case"ge":r=n[0]<=t;break;case"in":r=!!~n.indexOf(t);break;case"not_in":r=!~n.indexOf(t);break;case"between":r=n[0]<=t&&n[1]>=t;break;case"not_between":r=n[0]>t||n[1]<t;break;case"match":r=null===n[0]?null===t||void 0===t:null!==t&&(""===n[0]?""===t:n[0].test(t));break;case"not_match":r=null===n[0]?null!==t&&void 0!==t:null===t||(""===n[0]?""!==t:!n[0].test(t))}return r},o.prototype.matcher=function(){return new Function("$","return "+this.createMatchingExpression())},o.prototype.createMatchingExpression=function(){var t=0,e=0,n=[],r=[],i="",s="",a=null,u="";for(t=0,e=this._conditionAnd.length;e>t;t+=1)a=this._conditionAnd[t],a.criteria instanceof o?n[n.length]="("+a.criteria.createMatchingExpression()+")":n[n.length]="("+this._createJsExpressionOfKeyIsUndefined(a.left_key)+" && "+("key"===a.key_type?this._createJsExpressionOfKeyIsUndefined(a.right_key[0])+" && ":"")+this._createJsExpression(a)+")";for(t=0,e=this._conditionOr.length;e>t;t+=1)a=this._conditionOr[t],a.criteria instanceof o?r[r.length]="("+a.criteria.createMatchingExpression()+")":r[r.length]="("+this._createJsExpressionOfKeyIsUndefined(a.left_key)+" && "+this._createJsExpression(a)+")";return i=n.join(" && "),s=r.join(" || "),i&&s?u=i+" || "+s+" ":s?i||(u=s):u=i,this._not_flg&&(u="!("+u+")"),u},o.prototype._createJsExpression=function(t){var e="$."+t.left_key,n=t.operator,r=t.right_key,i=t.key_type,s=o._JS_OPERATOR[n];return s?e+" "+s+" "+this._toStringExpressionFromValue(r[0],i):"in"===n?"value"===i?"!!~"+this._toStringExpressionFromArray(r)+".indexOf("+e+")":"(Array.isArray($."+r[0]+") ? !!~$."+r[0]+".indexOf("+e+"): $."+r[0]+" === "+e+")":"not_in"===n?"value"===i?"!~"+this._toStringExpressionFromArray(r)+".indexOf("+e+")":"(Array.isArray($."+r[0]+") ? !~$."+r[0]+".indexOf("+e+"): $."+r[0]+" !== "+e+")":"between"===n?e+" >= "+this._toStringExpressionFromValue(r[0],i)+" && "+e+" <= "+this._toStringExpressionFromValue(r[1],i):"not_between"===n?e+" < "+this._toStringExpressionFromValue(r[0],i)+" || "+e+" > "+this._toStringExpressionFromValue(r[1],i):"match"===n?void 0!==r[0]&&(null===r[0]?"("+e+" === null ? true : false)":""===r[0]?"("+e+" === '' ? true : false)":"("+r[0]+".test("+e+"))"):"not_match"===n?void 0!==r[0]&&(null===r[0]?"("+e+" === null ? false : true)":""===r[0]?"("+e+" === '' ? false : true)":"(!"+r[0]+".test("+e+"))"):null},o.prototype._createJsExpressionOfKeyIsUndefined=function(t){for(var e=t.split("."),n=[],r=[],i=0,o=e.length;o>i;i+=1)n[n.length]=e[i],r[r.length]="$."+n.join(".")+" !== void 0";return r.join(" && ")},o.prototype._toStringExpressionFromArray=function(t){for(var e=[],n=0,r=t.length;r>n;n+=1)e[e.length]=this._toStringExpressionFromValue(t[n],"value");return"["+e.join(", ")+"]"},o.prototype._toStringExpressionFromValue=function(t,e){return"value"===e&&("string"==typeof t||t instanceof String)?'"'+t+'"':"key"===e?"$."+t:t+""},e.Kriteria=o}((0,eval)("this").window||this)},{"./lib/Condition.js":217,"./lib/evaluation.js":218,"./lib/getProperty.js":219}],217:[function(t,e,n){!function(t){"use strict";var e=function(t,e,n,r,i){this.left_key=t,this.operator=e,this.right_key=n,this.key_type=r,this.criteria=i};e.prototype.clone=function(){return new e(this.left_key,this.operator,this.right_key.concat(),this.key_type,this.criteria)},e.prototype.not=function(){switch(this.operator){case"eq":this.operator="ne";break;case"ne":this.operator="eq";break;case"lt":this.operator="ge";break;case"le":this.operator="gt";break;case"gt":this.operator="le";break;case"ge":this.operator="lt";break;case"in":this.operator="not_in";break;case"not_in":this.operator="in";break;case"between":this.operator="not_between";break;case"not_between":this.operator="between";break;case"match":this.operator="not_match";break;case"not_match":this.operator="match"}return this},e.prototype.normalize=function(){var t=[],n=0,r=0;if("value"===this.key_type)switch(this.operator){case"in":for(n=0,r=this.right_key.length;r>n;n+=1)t[t.length]=new e(this.left_key,"eq",[this.right_key[n]],this.key_type,null);break;case"not_in":for(n=0,r=this.right_key.length;r>n;n+=1)t[t.length]=new e(this.left_key,"ne",[this.right_key[n]],this.key_type,null);break;case"between":t[t.length]=new e(this.left_key,"ge",[this.right_key[0]],this.key_type,null),t[t.length]=new e(this.left_key,"le",[this.right_key[1]],this.key_type,null);break;case"not_between":t[t.length]=new e(this.left_key,"lt",[this.right_key[0]],this.key_type,null),t[t.length]=new e(this.left_key,"gt",[this.right_key[1]],this.key_type,null);break;default:t[t.length]=this.clone()}else t[t.length]=this.clone();return t},t.Condition=e}(this)},{}],218:[function(t,e,n){!function(e){"use strict";var n=t("./Condition.js").Condition,r=function(t,e,n){return{eq:{key:function(r){return i(n,t,"eq",e,"key",[r]),n},value:function(r){return i(n,t,"eq",e,"value",[r]),n}},ne:{key:function(r){return i(n,t,"ne",e,"key",[r]),n},value:function(r){return i(n,t,"ne",e,"value",[r]),n}},lt:{key:function(r){return i(n,t,"lt",e,"key",[r]),n},value:function(r){return i(n,t,"lt",e,"value",[r]),n}},le:{key:function(r){return i(n,t,"le",e,"key",[r]),n},value:function(r){return i(n,t,"le",e,"value",[r]),n}},gt:{key:function(r){return i(n,t,"gt",e,"key",[r]),n},value:function(r){return i(n,t,"gt",e,"value",[r]),n}},ge:{key:function(r){return i(n,t,"ge",e,"key",[r]),n},value:function(r){return i(n,t,"ge",e,"value",[r]),n}},"in":{key:function(){return i(n,t,"in",e,"key",[].slice.apply(arguments)),n},value:function(){return i(n,t,"in",e,"value",[].slice.apply(arguments)),n}},not_in:{key:function(){return i(n,t,"not_in",e,"key",[].slice.apply(arguments)),n},value:function(){return i(n,t,"not_in",e,"value",[].slice.apply(arguments)),n}},between:function(r,o){return i(n,t,"between",e,"value",[r,o]),n},not_between:function(r,o){return i(n,t,"not_between",e,"value",[r,o]),n},match:function(r){var o=r instanceof RegExp?r:null===r?null:void 0===r?void 0:""===r?"":new RegExp(r);return i(n,t,"match",e,"value",[o]),n},not_match:function(r){var o=r instanceof RegExp?r:null===r?null:void 0===r?void 0:""===r?"":new RegExp(r);return i(n,t,"not_match",e,"value",[o]),n}}},i=function(t,e,r,i,o,s){if("and"===e.toLowerCase())t.addAnd(new n(i,r,s,o,null));else{if("or"!==e.toLowerCase())throw new Error("invalid type: "+e+"(at key_name:"+i+", key_type: "+o+", operator:"+r+")");t.addOr(new n(i,r,s,o,null))}};e.evaluation=r}(this)},{"./Condition.js":217}],219:[function(t,e,n){!function(t){"use strict";var e=function(t,e){for(var n=e.split("."),r=t,i=0,o=n.length;o>i;i+=1){if("string"==typeof r||r instanceof String||"number"==typeof r||r instanceof Number)return;if(!(n[i]in r))return;r=r[n[i]]}return r};t.getProperty=e}(this)},{}]},{},[1]);